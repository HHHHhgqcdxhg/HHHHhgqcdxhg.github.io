<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[anime-want2watch]]></title>
    <url>%2Fanime-want2watch%2F</url>
    <content type="text"><![CDATA[å¯’è‰é¸£æ³£ä¹‹æ—¶ æ— å¤´éª‘å£«å¼‚é—»å½• ç«å½±å¿è€… å…‰ä¹‹ç¾å°‘å¥³]]></content>
  </entry>
  <entry>
    <title><![CDATA[ã€Šshaderå…¥é—¨ç²¾è¦ã€‹ç¬”è®°-ç¬¬16ç« -Unityä¸­çš„æ¸²æŸ“ä¼˜åŒ–]]></title>
    <url>%2Fshader-r-optimalize%2F</url>
    <content type="text"><![CDATA[Â§ å½±å“æ€§èƒ½çš„å› ç´  CPUè´Ÿè´£ä¿è¯å¸§ç‡,GPUè´Ÿè´£åˆ†è¾¨ç‡å…ˆå…³çš„ä¸€äº›å¤„ç† CPU è¿‡å¤šçš„draw call å¤æ‚çš„è„šæœ¬æˆ–è€…ç‰©ç†æ¨¡æ‹Ÿ GPU é¡¶ç‚¹å¤„ç† è¿‡å¤šçš„é¡¶ç‚¹ è¿‡å¤šçš„é€é¡¶ç‚¹è®¡ç®— ç‰‡å…ƒå¤„ç† è¿‡å¤šçš„ç‰‡å…ƒ(æ—¢å¯èƒ½æ˜¯ç”±äºåˆ†è¾¨ç‡é€ æˆçš„,ä¹Ÿå¯èƒ½æ˜¯ç”±äºoverdrawé€ æˆçš„) è¿‡å¤šçš„é€ç‰‡å…ƒè®¡ç®— å®½å¸¦ ä½¿ç”¨äº†å°ºå¯¸å¾ˆå¤§ä¸”æœªå‹ç¼©çš„çº¹ç† åˆ†è¾¨ç‡è¿‡é«˜çš„å¸§ç¼“å­˜ å¯¹äºCPUæ¥è¯´,é™åˆ¶å®ƒçš„ä¸»è¦åŸå› æ˜¯æ¯ä¸€å¸§ä¸­draw callçš„æ•°ç›®. CPUæ¯æ¬¡é€šçŸ¥GPUæ¸²æŸ“ä¹‹å‰,éƒ½è¦æå‰å‡†å¤‡å¥½é¡¶ç‚¹æ•°æ®(å¦‚ä½ç½®,æ³•çº¿,é¢œè‰²,çº¹ç†åæ ‡ç­‰),ç„¶åè°ƒç”¨ä¸€ç³»åˆ—APIå°†å®ƒä»¬æ”¾åˆ°GPUçš„æŒ‡å®šä½ç½®,æœ€å,è°ƒç”¨ä¸€ä¸ªæŒ‡ä»¤,é€šçŸ¥GPUå¼€å§‹æ¸²æŸ“. è€Œè°ƒç”¨ç»˜åˆ¶å‘½ä»¤æ—¶,å°±ä¼šäº§ç”Ÿä¸€ä¸ªdrawcall.è¿‡å¤šçš„drawcallä¼šé€ æˆCPUçš„æ€§èƒ½ç“¶é¢ˆ,è¿™æ˜¯å› ä¸ºæ¯æ¬¡è°ƒç”¨drawcallæ˜¯,CPUå¾€å¾€éƒ½éœ€è¦ æ”¹å˜å¾ˆå¤šæ¸²æŸ“çŠ¶æ€çš„è®¾ç½®,è€Œè¿™äº›æ“ä½œæ˜¯éå¸¸è€—æ—¶çš„.å¦‚æœä¸€å¸§ä¸­éœ€è¦çš„drawcallè¿‡å¤šçš„è¯,å°±ä¼šå¯¼è‡´CPUæŠŠå¤§éƒ¨åˆ†æ—¶é—´éƒ½èŠ±è´¹åœ¨æäº¤drawcallä¸Šé¢. å½“ç„¶,å…¶ä»–æ“ä½œä¹Ÿå¯èƒ½é€ æˆCPUç“¶é¢ˆ,ä¾‹å¦‚ç‰©ç†,å¸ƒæ–™æ¨¡æ‹Ÿ,è’™çš®,ç²’å­æ¨¡æ‹Ÿç­‰,è¿™äº›éƒ½æ˜¯è®¡ç®—é‡å¾ˆå¤§çš„æ“ä½œ. è€Œå¯¹äºGPUæ¥è¯´,å®ƒè´Ÿè´£æ•´ä¸ªæ¸²æŸ“æµæ°´çº¿.ä»–ä»å¤„ç†CPUä¼ é€’è¿‡æ¥çš„æ¨¡å‹æ•°æ®å¼€å§‹,è¿›è¡Œé¡¶ç‚¹ç€è‰²å™¨,ç‰‡å…ƒç€è‰²å™¨ç­‰ä¸€ç³»åˆ—å·¥ä½œ,æœ€åè¾“å‡ºåˆ°å±å¹•ä¸Šçš„æ¯ä¸ªåƒç´ .å› æ­¤,GPUæ€§èƒ½ç“¶é¢ˆå’Œéœ€è¦å¤„ç†çš„å®šç‚¹æ•°,å±å¹•åˆ†è¾¨ç‡,æ˜¾å­˜ç­‰å› ç´ æœ‰å…³. è€Œç›¸å…³çš„ä¼˜åŒ–ç­–ç•¥å¯ä»¥ä»å‡å°‘å¤„ç†çš„æ•°æ®è§„æ¨¡(åŒ…æ‹¬é¡¶ç‚¹æ•°ç›®å’Œç‰‡æºæ•°ç›®),å‡å°‘è¿ç®—å¤æ‚åº¦ç­‰æ–¹é¢å…¥æ‰‹. äº†è§£äº†ä¸Šé¢çš„åŸºæœ¬å†…å®¹å,æœ¬ç« èŠ‚åç»­ä¼šæ¶‰åŠçš„ä¼˜åŒ–æŠ€æœ¯æœ‰: GPUä¼˜åŒ– ä½¿ç”¨æ‰¹å¤„ç†æŠ€æœ¯å‡å°‘drawcallæ•° GPUä¼˜åŒ– å‡å°‘éœ€è¦å¤„ç†çš„é¡¶ç‚¹æ•°ç›® ä¼˜åŒ–å‡ ä½•ä½“ ä½¿ç”¨æ¨¡å‹çš„LOD(Level of Detail)æŠ€æœ¯ ä½¿ç”¨é®æŒ¡å‰”é™¤(Occlusion Culling)æŠ€æœ¯ å‡å°‘éœ€è¦å¤„ç†çš„ç‰‡å…ƒæ•°ç›® æ§åˆ¶ç»˜åˆ¶é¡ºåº è­¦æƒ•é€æ˜ç‰©ä½“ å‡å°‘å®æ—¶å…‰ç…§ å‡å°‘è®¡ç®—å¤æ‚åº¦ ä½¿ç”¨Shaderçš„LODæŠ€æœ¯ ä»£ç æ–¹é¢çš„ä¼˜åŒ– èŠ‚çœå†…å­˜å¸¦å®½ å‡å°‘çº¹ç†å¤§å° åˆ©ç”¨åˆ†è¾¨ç‡ç¼©æ”¾ Â§ å‡å°‘drawcallæ•°ç›® æ‰¹å¤„ç†(batching)æ˜¯ç»å¸¸çœ‹åˆ°çš„ä¼˜åŒ–æŠ€æœ¯.æ‰¹å¤„ç†çš„å®ç°åŸç†å°±æ˜¯ä¸ºäº†å‡å°‘æ¯ä¸€å¸§å‡ºç°çš„drawcallæ•°ç›®. ä¸ºäº†æŠŠä¸€ä¸ªå¯¹è±¡æ¸²æŸ“åˆ°å±å¹•ä¸Š,CPUéœ€è¦æ£€æŸ¥å“ªäº›å…‰æºå½±å“äº†è¯¥ç‰©ä½“,ç»‘å®šshaderå¹¶è®¾ç½®å®ƒçš„å‚æ•°,å†æŠŠæ¸²æŸ“å‘½ä»¤å‘é€ç»™GPU. å½“åœºæ™¯åŒ…å«å¤§é‡å¯¹è±¡æ—¶,è¿™äº›æ“ä½œå°±ä¼šéå¸¸è€—æ—¶.ä¸€ä¸ªæç«¯çš„ä¾‹å­æ˜¯,å¦‚æœæˆ‘ä»¬éœ€è¦æ¸²æŸ“1000ä¸ªä¸‰è§’å½¢,æŠŠå®ƒä»¬æŒ‰1000ä¸ªå•ç‹¬çš„ç½‘æ ¼è¿›è¡Œæ¸²æŸ“æ‰€èŠ±è´¹çš„æ—¶é—´è¦è¿œå¤§äºæ¸²æŸ“ä¸€ä¸ªåŒ…å«äº†1000ä¸ªä¸‰è§’å½¢çš„ç½‘æ ¼.åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹,GPUæ€§èƒ½æ¶ˆè€—å…¶å®å¹¶æ²¡æœ‰å¤šå¤§çš„åŒºåˆ«,ä½†CPUçš„drawcallæ•°ç›®ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆ. å› æ­¤,æ‰¹å¤„ç†çš„æ€æƒ³å¾ˆç®€å•,å°±æ˜¯åœ¨æ¯æ¬¡è°ƒç”¨drawcallæ—¶å°½å¯èƒ½å¤šçš„å¤„ç†å¤šä¸ªç‰©ä½“. ä½¿ç”¨åŒä¸€æè´¨çš„ç‰©ä½“å¯ä»¥ä¸€èµ·æ‰¹å¤„ç†.è¿™æ˜¯å› ä¸º,å¯¹äºä½¿ç”¨åŒä¸€æè´¨çš„ç‰©ä½“,ä»–ä»¬ä¹‹é—´çš„ä¸åŒä»…ä»…åœ¨äºé¡¶ç‚¹æ•°æ®ä¸Šçš„å·®è·. æˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›é¡¶ç‚¹åˆå¹¶åœ¨ä¸€èµ·å‘ç»™GPU,å°±å¯ä»¥å®Œæˆä¸€æ¬¡æ‰¹å¤„ç†. Unityä¸­æ”¯æŒä¸¤ç§æ‰¹å¤„ç†:ä¸€ç§æ˜¯åŠ¨æ€æ‰¹å¤„ç†,ä¸€ç§æ˜¯é™æ€æ‰¹å¤„ç†. å¯¹äºåŠ¨æ€æ‰¹å¤„ç†æ¥è¯´,ä¼˜ç‚¹æ˜¯ä¸€åˆ‡å¤„ç†éƒ½æ˜¯ç”±Unityè‡ªåŠ¨å®Œæˆçš„,ä¸éœ€è¦æˆ‘ä»¬åšä»»ä½•æ“ä½œ,è€Œä¸”ç‰©ä½“æ˜¯å¯ä»¥ç§»åŠ¨çš„,ä½†ç¼ºç‚¹æ˜¯,é™åˆ¶å¾ˆå¤š,å¯èƒ½ä¸€ä¸å°å¿ƒå°±ä¼šç ´åäº†è¿™ç§æœºåˆ¶,å¯¼è‡´Unityæ— æ³•åŠ¨æ€æ‰¹å¤„ç†ä¸€äº›ä½¿ç”¨äº†ç›¸åŒæè´¨çš„ç‰©ä½“. è€Œå¯¹äºé™æ€æ‰¹å¤„ç†æ¥è¯´,å®ƒçš„ä¼˜ç‚¹æ˜¯è‡ªç”±åº¦å¾ˆé«˜,é™åˆ¶å¾ˆå°‘;ä½†ç¼ºç‚¹æ˜¯å¯èƒ½ä¼šå ç”¨æ›´å¤šçš„å†…å­˜,è€Œä¸”ç»è¿‡é™æ€æ‰¹å¤„ç†åçš„æ‰€æœ‰ç‰©ä½“éƒ½ä¸å¯ä»¥å†ç§»åŠ¨äº†(å³ä¾¿åœ¨è„šæœ¬ä¸­å°è¯•æ”¹å˜ç‰©ä½“çš„ä½ç½®ä¹Ÿæ˜¯æ— æ•ˆçš„). Â§ åŠ¨æ€æ‰¹å¤„ç† å¦‚æœåœºæ™¯ä¸­æœ‰ä¸€äº›æ¨¡å‹å…±äº«äº†åŒä¸€ä¸ªæè´¨å¹¶æ»¡è¶³ä¸€äº›æ¡ä»¶,Unityå°±ä¼šè‡ªåŠ¨æŠŠå®ƒä»¬è¿›è¡Œæ‰¹å¤„ç†,ä»è€ŒåªèŠ±è´¹ä¸€ä¸ªdrawcallå°±å¯ä»¥æ¸²æŸ“æ‰€æœ‰æ¨¡å‹. åŠ¨æ€æ‰¹å¤„ç†çš„åŸºæœ¬åŸç†æ˜¯,æ¯ä¸€å¸§éƒ½å¯ä»¥è¿›è¡Œæ‰¹å¤„ç†çš„æ¨¡å‹ç½‘æ ¼è¿›è¡Œåˆå¹¶,å†æŠŠåˆå¹¶åçš„æ¨¡å‹æ•°æ®ä¼ é€’ç»™GPU,ç„¶åä½¿ç”¨åŒä¸€æè´¨å¯¹å…¶æ¸²æŸ“. é™¤äº†å®ç°æ–¹ä¾¿,åŠ¨æ€æ‰¹å¤„ç†çš„å¦ä¸€å¥½å¤„æ˜¯,ç»è¿‡æ‰¹å¤„ç†çš„ç‰©ä½“ä»ç„¶å¯ä»¥ç§»åŠ¨,è¿™æ˜¯ç”±äºåœ¨å¤„ç†æ¯å¸§æ—¶Unityéƒ½ä¼šé‡æ–°åˆå¹¶ä¸€æ¬¡ç½‘æ ¼. è™½ç„¶UnityåŠ¨æ€æ‰¹å¤„ç†ä¸éœ€è¦æˆ‘ä»¬è¿›è¡Œé¢å¤–çš„å·¥ä½œ,ä½†åªæœ‰æ»¡è¶³æ¡ä»¶çš„æ¨¡å‹å’Œæè´¨æ‰å¯ä»¥è¢«åŠ¨æ€æ‰¹å¤„ç†.éœ€è¦æ³¨æ„çš„æ˜¯,éšç€Unityç‰ˆæœ¬çš„å˜åŒ–,è¿™äº›æ¡ä»¶ä¹Ÿæœ‰ä¸€äº›æ”¹å˜. åœ¨æœ¬èŠ‚ä¸­,æˆ‘ä»¬ç»™å‡ºä¸€äº›ä¸»è¦çš„æ¡ä»¶é™åˆ¶: èƒ½å¤Ÿè¿›è¡ŒåŠ¨æ€æ‰¹å¤„ç†çš„ç½‘æ ¼çš„é¡¶ç‚¹å±æ€§è§„æ¨¡è¦å°äº900. ä¾‹å¦‚,å¦‚æœshaderä¸­éœ€è¦ä½¿ç”¨é¡¶ç‚¹ä½ç½®,å‘ä¿¡å’Œçº¹ç†åæ ‡è¿™ä¸‰ä¸ªé¡¶ç‚¹å±æ€§,é‚£ä¹ˆè¦æƒ³è®©æ¨¡å‹èƒ½å¤Ÿè¢«åŠ¨æ€æ‰¹å¤„ç†,å®ƒçš„é¡¶ç‚¹æ•°ç›®ä¸èƒ½è¶…è¿‡300.éœ€è¦æ³¨æ„çš„æ˜¯,è¿™ä¸ªæ•°å­—åœ¨æœªæ¥æœ‰å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–,å› æ­¤ä¸éœ€è¦ä¾èµ–è¿™ä¸ªæ•°æ®. ä¸€èˆ¬æ¥è¯´,æ‰€æœ‰å¯¹è±¡éƒ½éœ€è¦ä½¿ç”¨åŒä¸€ä¸ªç¼©æ”¾å°ºåº¦ ä¸€ä¸ªä¾‹å¤–æƒ…å†µæ˜¯,å¦‚æœæ‰€æœ‰ç‰©ä½“éƒ½æ˜¯ç”¨äº†ä¸åŒçš„éç»Ÿä¸€ç¼©æ”¾,é‚£ä¹ˆå®ƒä»¬ä¹Ÿæ˜¯å¯ä»¥è¢«åŠ¨æ€æ‰¹å¤„ç†çš„.ä½†åœ¨Unity5ä¸­,è¿™ç§å¯¹æ¨¡å‹ç¼©æ”¾çš„é™åˆ¶å·²ç»ä¸å­˜åœ¨äº†. ä½¿ç”¨å…‰ç…§çº¹ç†(lightmap)çš„ç‰©ä½“éœ€è¦å°å¿ƒå¤„ç†. è¿™äº›ç‰©ä½“éœ€è¦é¢å¤–çš„æ¸²æŸ“å‚æ•°,ä¾‹å¦‚,åœ¨å…‰ç…§çº¹ç†ä¸Šçš„ç´¢å¼•,åç§»é‡å’Œç¼©æ”¾ä¿¡æ¯ç­‰.å› æ­¤,ä¸ºäº†è®©è¿™äº›ç‰©ä½“å¯ä»¥è¢«åŠ¨æ€æ‰¹å¤„ç†,æˆ‘ä»¬éœ€è¦ä¿è¯å®ƒä»¬æŒ‡å‘å…‰ç…§çº¹ç†ä¸­çš„åŒä¸€ä¸ªä½ç½®(?) å¤šPassçš„Shaderä¼šä¸­æ–­æ‰¹å¤„ç†. åœ¨å‰å‘æ¸²æŸ“ä¸­,æˆ‘ä»¬æœ‰æ—¶éœ€è¦ä½¿ç”¨é¢å¤–çš„passæ¥ä¸ºæ¨¡å‹æ·»åŠ æ›´å¤šçš„å…‰ç…§æ•ˆæœ,ä½†è¿™æ ·ä¸€æ¥æ¨¡å‹å°±ä¸ä¼šè¢«åŠ¨æ€æ‰¹å¤„ç†äº†. åŠ¨æ€æ‰¹å¤„ç†çš„é™åˆ¶æ¯”è¾ƒå¤š,ä¾‹å¦‚å¾ˆå¤šæ—¶å€™,æˆ‘ä»¬çš„æ¨¡å‹æ•°æ®å¾€å¾€ä¼šè¶…è¿‡900çš„é¡¶ç‚¹å±æ€§é™åˆ¶.è¿™ç§æ—¶å€™ä¾èµ–åŠ¨æ€æ‰¹å¤„ç†æ¥å‡å°‘drawcallæ˜¾ç„¶å·²ç»ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚äº†. Â§ é™æ€æ‰¹å¤„ç† ç›¸å¯¹äºåŠ¨æ€æ‰¹å¤„ç†æ¥è¯´,é™æ€æ‰¹å¤„ç†é€‚ç”¨äºä»»ä½•å¤§å°çš„å‡ ä½•æ¨¡å‹. å®ƒçš„åŸç†æ˜¯.åªåœ¨è¿è¡Œå¼€å§‹é˜¶æ®µ,æŠŠéœ€è¦è¿›è¡Œé™æ€æ‰¹å¤„ç†çš„æ¨¡å‹åˆå¹¶åˆ°ä¸€ä¸ªæ–°çš„ç½‘æ ¼ä¸­,è¿™æ„å‘³ç€æ¨¡å‹ä¸å¯ä»¥åœ¨è¿è¡Œæ—¶è¢«ç§»åŠ¨.ä½†ç”±äºä»–åªéœ€è¦è¿›è¡Œä¸€æ¬¡åˆå¹¶æ“ä½œ,æ¯”åŠ¨æ€æ‰¹å¤„ç†æ›´åŠ é«˜æ•ˆ. é™æ€æ‰¹å¤„ç†çš„ä¸€ä¸ªç¼ºç‚¹åœ¨äº,ä»–å¾€å¾€éœ€è¦æ›´å¤§çš„å†…å­˜æ¥å­˜å‚¨åˆå¹¶åçš„å‡ ä½•ç»“æ„. è¿™æ˜¯å› ä¸º,å¦‚æœåœ¨é™æ€æ‰¹å¤„ç†å‰ä¸€äº›ç‰©ä½“å…±äº«äº†ç›¸åŒçš„ç½‘æ ¼,é‚£ä¹ˆåœ¨å†…å­˜ä¸­æ¯ä¸€ä¸ªç‰©ä½“éƒ½ä¼šå¯¹åº”ä¸€ä¸ªè¯¥ç½‘æ ¼çš„å¤åˆ¶å“,å³ä¸€ä¸ªç½‘æ ¼ä¼šå˜æˆå¤šä¸ªç½‘æ ¼å†å‘ç»™GPU.å¦‚æœè¿™ç±»ä½¿ç”¨åŒä¸€ç½‘æ ¼çš„å¯¹è±¡å¾ˆå¤š,é‚£ä¹ˆè¿™å°±ä¼šæˆä¸ºä¸€ä¸ªæ€§èƒ½ç“¶é¢ˆäº†. ä¾‹å¦‚,å¦‚æœå†ä¸€ä¸ªä½¿ç”¨äº†1000ä¸ªç›¸åŒæ ‘æ¨¡å‹çš„æ£®æ—ä¸­ä½¿ç”¨äº†é™æ€æ‰¹å¤„ç†,é‚£ä¹ˆå°±ä¼šä½¿ç”¨1000å€çš„å†…å­˜,è¿™ä¼šå¯¼è‡´ä¸¥é‡çš„å†…å­˜å½±å“. è¿™ç§æ—¶å€™,è§£å†³æ–¹æ³•è¦ä¹ˆå¿å—è¿™ç§ç‰ºç‰²å†…å­˜æ¢å–æ€§èƒ½çš„åšæ³•,è¦ä¹ˆä¸ä½¿ç”¨é™æ€æ‰¹å¤„ç†,è€Œä½¿ç”¨åŠ¨æ€æ‰¹å¤„ç†æŠ€æœ¯(ä½†è¦å°å¿ƒæ§åˆ¶æ¨¡å‹çš„é¡¶ç‚¹æ•°å’Œå±æ€§æ•°ç›®),æˆ–è€…è‡ªå·±ç¼–å†™æ‰¹å¤„ç†æ–¹æ³•. åœ¨å†…éƒ¨å®ç°ä¸Š,Unityé¦–å…ˆå°†è¿™äº›é™æ€ç‰©ä½“å˜æ¢åˆ°ä¸–ç•Œç©ºé—´ä¸‹,ç„¶åä¸ºä»–ä»¬æ„å»ºä¸€ä¸ªæ›´å¤§çš„é¡¶ç‚¹å’Œç´¢å¼•ç¼“å­˜. å¯¹äºä½¿ç”¨äº†åŒä¸€æè´¨çš„ç‰©ä½“,é™æ€æ‰¹å¤„ç†åªéœ€è¦è°ƒç”¨ä¸€ä¸ªdrawcallå°±å¯ä»¥ç»˜åˆ¶å…¨éƒ¨ç‰©ä½“. è€Œå¯¹äºä½¿ç”¨äº†ä¸åŒæè´¨çš„ç‰©ä½“,é™æ€æ‰¹å¤„ç†åŒæ ·å¯ä»¥æå‡æ¸²æŸ“æ€§èƒ½,å°½ç®¡è¿™äº›ç‰©ä½“ä»ç„¶éœ€è¦è°ƒç”¨å¤šä¸ªdrawcall,ä½†é™æ€æ‰¹å¤„ç†å¯ä»¥å‡å°‘è¿™äº›drawcallä¹‹é—´çš„çŠ¶æ€åˆ‡æ¢,è€Œè¿™äº›åˆ‡æ¢å¾€å¾€æ˜¯è´¹æ—¶çš„æ“ä½œ. Â§ å…±äº«æè´¨ ä»ä¹‹å‰çš„å†…å®¹å¯ä»¥çœ‹å‡º,æ— è®ºæ˜¯åŠ¨æ€æ‰¹å¤„ç†è¿˜æ˜¯é™æ€æ‰¹å¤„ç†,éƒ½è¦æ±‚æ¨¡å‹ä¹‹é—´éœ€è¦å…±äº«åŒä¸€ä¸ªæè´¨.ä½†ä¸åŒçš„æ¨¡å‹ä¹‹é—´æ€»ä¼šéœ€è¦ä¸åŒçš„æ¸²æŸ“å±æ€§,ä¾‹å¦‚,ä½¿ç”¨ä¸åŒçš„çº¹ç†,é¢œè‰²ç­‰.è¿™æ—¶,æˆ‘ä»¬éœ€è¦ä¸€äº›ç­–ç•¥ æ¥å°½å¯èƒ½åœ°åˆå¹¶æè´¨. å¦‚æœä¸¤ä¸ªæè´¨ä¹‹é—´åªæœ‰ä½¿ç”¨çš„çº¹ç†ä¸ç”¨,æˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›çº¹ç†åˆå¹¶åˆ°ä¸€å¼ æ›´å¤§çš„æ–‡ç«‹ä¸­,è¿™å¼ æ›´å¤§çš„çº¹ç†è¢«ç§°ä¸ºä¸€ä¸ªå›¾é›†(atlas). ä¸€æ—¦ä½¿ç”¨äº†åŒä¸€å¼ çº¹ç†,æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªæè´¨,å†ä½¿ç”¨ä¸åŒçš„é‡‡æ ·åæ ‡å¯¹çº¹ç†é‡‡æ ·åŠå¯. ä½†æœ‰æ—¶,é™¤äº†çº¹ç†ä¸åŒå¤–,ä¸åŒçš„ç‰©ä½“åœ¨æè´¨ä¸Šè¿˜æœ‰ä¸€äº›å¾®ç¬‘çš„å‚æ•°å˜åŒ–,ä¾‹å¦‚,é¢œè‰²ä¸åŒ,æŸäº›æµ®ç‚¹å±æ€§ä¸åŒ.ä½†æ˜¯,ä¸ç®¡åŠ¨æ€æ‰¹å¤„ç†è¿˜æ˜¯é™æ€æ‰¹å¤„ç†,å®ƒä»¬çš„æä½ éƒ½æ˜¯è¦ä½¿ç”¨åŒä¸€ä¸ªæè´¨. æ˜¯åŒä¸€ä¸ª,è€Œä¸æ˜¯ä½¿ç”¨äº†åŒä¸€ç§shaderçš„æè´¨,ä¹Ÿå°±æ˜¯è¯´å®ƒä»¬æŒ‡å‘çš„æè´¨å¿…é¡»æ˜¯åŒä¸€ä¸ªå®ä½“.è¿™æ„å‘³ç€,åªè¦æˆ‘ä»¬è°ƒæ•´äº†å‚æ•°,å°±ä¼šå½±å“åˆ°æ‰€æœ‰ä½¿ç”¨è¿™ä¸ªæè´¨çš„å¯¹è±¡.é‚£ä¹ˆæƒ³è¦å¾®å°çš„è°ƒæ•´,ä¸€ä¸ªå¸¸ç”¨çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨ç½‘æ ¼çš„é¡¶ç‚¹æ•°æ®(æœ€å¸¸è§çš„å°±æ˜¯é¡¶ç‚¹é¢œè‰²æ•°æ®)æ¥å­˜å‚¨è¿™äº›å‚æ•°. (è¿™é‡Œè¿˜æœ‰ä¸€æ®µè¾ƒè¯¦ç»†çš„,ä»¥åå†çœ‹) Â§ æ‰¹å¤„ç†çš„æ³¨æ„äº‹é¡¹ å°½å¯èƒ½é€‰æ‹©é™æ€æ‰¹å¤„ç†,ä½†æ—¶åˆ»å°å¿ƒå¯¹å†…å­˜çš„æ¶ˆè€—,å¹¶ä¸”è®°ä½ç»è¿‡é™æ€æ‰¹å¤„ç†çš„ç‰©ä½“ä¸å¯ä»¥å†è¢«ç§»åŠ¨ å¦‚æœæ— æ³•è¿›è¡Œé™æ€æ‰¹å¤„ç†,è€Œè¦ä½¿ç”¨åŠ¨æ€æ‰¹å¤„ç†çš„è¯,é‚£ä¹ˆè¯·å°å¿ƒä¸Šé¢æåˆ°çš„å„ç§é™åˆ¶. ä¾‹å¦‚,å°½å¯èƒ½è®©è¿™æ ·çš„ç‰©ä½“å°‘å¹¶ä¸”å°½å¯èƒ½è®©è¿™äº›ç‰©ä½“åŒ…å«å°‘é‡çš„é¡¶ç‚¹å±æ€§å’Œé¡¶ç‚¹æ•°ç›®. å¯¹äºæ¸¸æˆä¸­çš„å°é“å…·,ä¾‹å¦‚æ¡æ‹¾çš„é‡‘å¸ç­‰,å¯ä»¥ä½¿ç”¨åŠ¨æ€æ‰¹å¤„ç† å¯¹äºåŒ…å«åŠ¨ç”»è¿™ç±»ç‰©ä½“,æˆ‘ä»¬æ— æ³•å…¨éƒ¨ä½¿ç”¨é™æ€æ‰¹å¤„ç†,ä½†å…¶ä¸­å¦‚æœæœ‰ä¸åŠ¨çš„éƒ¨åˆ†,å¯ä»¥æŠŠè¿™éƒ¨åˆ†æ ‡è¯†ä¸º&quot;Static&quot; é™¤äº†ä¸Šè¿°çš„æç¤ºå¤–,åœ¨ä½¿ç”¨æ‰¹å¤„ç†æ—¶è¿˜æœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹. ç”±äºæ‰¹å¤„ç†éœ€è¦æŠŠå¤šä¸ªæ¨¡å‹å˜æ¢åˆ°ä¸–ç•Œç©ºé—´ä¸‹å†åˆå¹¶å®ƒä»¬,å› æ­¤,å¦‚æœshaderä¸­å­˜åœ¨ä¸€äº›åŸºäºæ¨¡å‹ç©ºé—´ä¸‹çš„åæ ‡çš„è¿ç®—,é‚£ä¹ˆå¾€å¾€ä¼šå¾—åˆ°é”™è¯¯çš„ç»“æœ.ä¸€ä¸ªè§£å†³æ–¹æ³•æ˜¯åœ¨shaderä¸­ä½¿ç”¨DisableBatchingæ ‡ç­¾å¼ºåˆ¶ä½¿ç”¨è¯¥Shaderçš„æè´¨ä¸è¢«æ‰¹å¤„ç†. å¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯,ä½¿ç”¨åŠé€æ˜æè´¨çš„ç‰©ä½“ é€šå¸¸éœ€è¦ä½¿ç”¨ä¸¥æ ¼çš„ä»åå¾€å‰çš„ç»˜åˆ¶é¡ºåºæ¥ä¿è¯é€æ˜æ··åˆçš„æ­£ç¡®æ€§.å¯¹äºè¿™äº›ç‰©ä½“,Unityä¼šé¦–å…ˆä¿è¯å®ƒä»¬çš„ç»˜åˆ¶é¡ºåº,å†å°è¯•å¯¹å®ƒä»¬è¿›è¡Œæ‰¹å¤„ç†.è¿™æ„å‘³ç€,å½“ç»˜åˆ¶é¡ºåºæ— æ³•æ»¡è¶³æ—¶,æ‰¹å¤„ç†æ— æ³•åœ¨è¿™äº›ç‰©ä½“ä¸Šè¢«æˆåŠŸåº”ç”¨. Â§ å‡å°‘éœ€è¦çš„é¡¶ç‚¹æ•°ç›® Â§ ä¼˜åŒ–å‡ ä½•ä½“ Unityä¸­æ˜¾ç¤ºçš„é¡¶ç‚¹æ•°ç›®å¾€å¾€è¦å¤šä½™å»ºæ¨¡è½¯ä»¶é‡Œæ˜¾ç¤ºçš„é¡¶ç‚¹æ•°.é€šå¸¸Unityä¸­æ˜¾ç¤ºçš„æ•°ç›®è¦å¤§å¾ˆå¤š.æˆ‘ä»¬çœŸæ­£åº”è¯¥å…³å¿ƒçš„æ˜¯Unityä¸­æ˜¾ç¤ºçš„æ•°ç›®. ä¸‰ç»´è½¯ä»¶æ›´å¤šçš„æ˜¯ç«™åœ¨æˆ‘ä»¬äººç±»çš„è§’åº¦ç†è§£é¡¶ç‚¹çš„,å³ç»„æˆå‡ ä½•ä½“çš„æ¯ä¸€ä¸ªç‚¹å°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç‚¹. è€ŒUnityæ˜¯ç«™åœ¨GPUçš„è§’åº¦ä¸Šå»è®¡ç®—é¡¶ç‚¹çš„. åœ¨GPUçœ‹æ¥,æœ‰æ—¶éœ€è¦æŠŠä¸€ä¸ªé¡¶ç‚¹æ‹†åˆ†æˆä¸¤ä¸ªæˆ–æ›´å¤šçš„é¡¶ç‚¹.è¿™ç§å°†é¡¶ç‚¹ä¸€åˆ†ä¸ºå¤šçš„åŸå› ä¸»è¦æœ‰ä¸¤ä¸ª:ä¸€æ˜¯ä¸ºäº†åˆ†ç¦»çº¹ç†åæ ‡(uv splits),å¦ä¸€ä¸ªæ˜¯ä¸ºäº†**äº§ç”Ÿå¹³æ»‘çš„è¾¹ç•Œ88(smoothing splits).å®ƒä»¬çš„æœ¬è´¨,å…¶å®éƒ½æ˜¯å¯¹äºGPUæ¥è¯´,é¡¶ç‚¹çš„æ¯ä¸€ä¸ªå±æ€§å’Œé¡¶ç‚¹ä¹‹é—´å¿…é¡»æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³».è€Œåˆ†ç±»çº¹ç†åæ ‡,æ˜¯å› ä¸ºå»ºæ¨¡æ—¶çš„ä¸€ä¸ªé¡¶ç‚¹çš„çº¹ç†åæ ‡æœ‰å¤šä¸ª. ä¾‹å¦‚,å¯¹äºä¸€ä¸ªæ­£æ–¹ä½“,å®ƒçš„å…­ä¸ªé¢ä¹‹é—´è™½ç„¶ä½¿ç”¨äº†ä¸€äº›ç›¸åŒçš„ç‚¹,ä½†åœ¨ä¸åŒé¢ä¸Š,åŒä¸€ä¸ªé¡¶ç‚¹çš„çº¹ç†åæ ‡å¯èƒ½å¹¶ä¸ç›¸åŒ.å¯¹äºGPUæ¥è¯´,è¿™æ˜¯ä¸å¯ç†è§£çš„.å› æ­¤,å®ƒå¿…é¡»æŠŠè¿™ä¸ªé¡¶ç‚¹æ‹†åˆ†æˆå¤šä¸ªå…·æœ‰ä¸åŒçº¹ç†åæ ‡çš„é¡¶ç‚¹. è€Œå¹³æ»‘è¾¹ç•Œä¹Ÿæ˜¯ç±»ä¼¼,ä¸åŒçš„æ˜¯,æ­¤æ—¶ä¸€ä¸ªé¡¶ç‚¹å¯èƒ½ä¼šå¯¹åº”å¤šä¸ªæ³•çº¿ä¿¡æ¯å’Œåˆ‡çº¿ä¿¡æ¯.å’Œé€šå¸¸æ˜¯å› ä¸ºæˆ‘ä»¬è¦å†³å®šä¸€ä¸ªè¾¹æ—¶ä¸€æ¡ç¡¬è¾¹(hard edge)è¿˜æ˜¯ä¸€æ¡å¹³æ»‘è¾¹(smooth edge) å¯¹äºGPUæ¥è¯´,å®ƒæœ¬è´¨åªå…³å¿ƒæœ‰å¤šå°‘ä¸ªé¡¶ç‚¹.å› æ­¤,å°½å¯èƒ½å‡å°‘é¡¶ç‚¹æ•°å…¶å®æ‰æ˜¯æˆ‘ä»¬çœŸæ­£éœ€è¦å…³å¿ƒçš„äº‹æƒ….å› æ­¤,æœ€åä¸€æ¡å‡ ä½•ä½“ä¼˜åŒ–å»ºè®®æ˜¯:ç§»é™¤ä¸å¿…è¦çš„ç¡¬è¾¹ä»¥åŠçº¹ç†è¡”æ¥,é¿å…è¾¹ç•Œå¹³æ»‘å’Œçº¹ç†åˆ†ç¦». Â§ æ¨¡å‹çš„LODç®—æ³• å¦ä¸€ä¸ªå‡å°‘é¡¶ç‚¹æ•°çš„æ–¹æ³•æ˜¯ä½¿ç”¨LODæŠ€æœ¯.è¿™ç§æŠ€æœ¯æ˜¯,å½“ä¸€ä¸ªç‰©ä½“ç¦»æ‘„åƒæœºå¾ˆè¿œæ—¶,æ¨¡å‹ä¸Šçš„å¾ˆå¤šç»†èŠ‚æ˜¯æ— æ³•è¢«å¯Ÿè§‰åˆ°çš„.å› æ­¤,LODå…è®¸å½“å¯¹è±¡é€æ¸è¿œç¦»æ‘„åƒæœºæ—¶,å‡å°‘æ¨¡å‹ä¸Šçš„é¢ç‰‡æ•°é‡,ä»è€Œæé«˜æ€§èƒ½. åœ¨Unityä¸­,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨LOD Groupç»„ä»¶æ¥ä¸ºä¸€ä¸ªç‰©ä½“æ„å»ºä¸€ä¸ªLOD.æˆ‘ä»¬éœ€è¦ä¸ºåŒä¸€ä¸ªå¯¹è±¡å‡†å¤‡å¤šä¸ªåŒ…å«ä¸åŒç»†èŠ‚ç¨‹åº¦çš„æ¨¡å‹,ç„¶åæŠŠä»–ä»¬èµ‹ç»™LOD Groupç»„ä»¶ä¸­çš„ä¸åŒç­‰çº§,Unityå°±ä¼šè‡ªåŠ¨åˆ¤æ–­å½“å‰ä½ç½®ä¸Šéœ€è¦ä½¿ç”¨å“ªä¸ªç­‰çº§çš„æ¨¡å‹ Â§ é®æŒ¡å‰”é™¤æŠ€æœ¯ é®æŒ¡å‰”é™¤(Occlusion culling)å¯ä»¥ç”¨æ¥æ¶ˆé™¤é‚£äº›åœ¨å…¶ä»–ç‰©ä½“åé¢çœ‹ä¸åˆ°çš„ç‰©ä»¶,è¿™æ„å‘³ç€èµ„æºä¸ä¼šæµªè´¹åœ¨é‚£äº›çœ‹ä¸åˆ°çš„é¡¶ç‚¹ä¸Š.è¿›è€Œæå‡æ€§èƒ½. æˆ‘ä»¬éœ€è¦æŠŠé®æŒ¡å‰”é™¤å’Œæ‘„åƒæœºçš„è§†é”¥ä½“å‰”é™¤(Frustum Culling)åŒºåˆ†å¼€æ¥. è§†é”¥ä½“å‰”é™¤åªä¼šå‰”é™¤æ‰é‚£äº›ä¸åœ¨æ‘„åƒæœºçš„è§†é‡èŒƒå›´å†…çš„å¯¹è±¡,ä½†ä¸ä¼šåˆ¤æ–­è§†é‡ä¸­æ˜¯å¦æœ‰ç‰©ä½“è¢«å…¶ä»–ç‰©ä½“æŒ¡ä½.è€Œé®æŒ¡å‰”é™¤ä¼šä½¿ç”¨ä¸€ä¸ªè™šæ‹Ÿçš„æ‘„åƒæœºæ¥éå†åœºæ™¯,ä»è€Œæ„å»ºä¸€ä¸ªæ½œåœ¨æ°ªé‡‘çš„å¯¹è±¡é›†åˆå±‚çº§ç»“æ„. åœ¨è¿è¡Œæ—¶åˆ»,æ¯ä¸ªæ‘„åƒæœºå°†ä¼šä½¿ç”¨è¿™ä¸ªæ•°æ®æ¥è¯†åˆ«å“ªäº›ç‰©ä½“æ˜¯å¯è§çš„,è€Œå“ªäº›ç‰©ä½“è¢«å…¶ä»–ç‰©ä½“æŒ¡ä½ä¸å¯è§.ä½¿ç”¨é®æŒ¡å‰”é™¤æŠ€æœ¯,æˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€ç³»åˆ—é¢å¤–çš„å¤„ç†å·¥ä½œ,å…·ä½“æ­¥éª¤å‚è§Unityæ‰‹å†Œç›¸å…³å†…å®¹(docs.unity3d/Manual/OcclusionCulling.heml) æ¨¡å‹çš„LODæŠ€æœ¯å’Œé®æŒ¡å‰”é™¤æŠ€æœ¯å¯ä»¥åŒæ—¶å‡å°‘CPUå’ŒGPUçš„è´Ÿè·.CPUå¯ä»¥æäº¤æ›´å°‘çš„drawcall,è€ŒGPUéœ€è¦å¤„ç†çš„é¡¶ç‚¹å’Œç‰‡å…ƒæ•°ç›®ä¹Ÿå‡å°‘äº†. Â§ å‡å°‘éœ€è¦å¤„ç†çš„ç‰‡å…ƒæ•°ç›® å¦ä¸€ä¸ªé€ æˆGPUç“¶é¢ˆçš„æ˜¯éœ€è¦å¤„ç†è¿‡å¤šç‰‡å…ƒ.è¿™éƒ¨åˆ†ä¼˜åŒ–çš„é‡ç‚¹åœ¨äºå‡å°‘overdraw.ç®€å•æ¥è¯´,overdrawæŒ‡çš„å°±æ˜¯ åŒä¸€ä¸ªåƒç´ è¢«ç»˜åˆ¶å¤šæ¬¡. Unityä¸­Sceneè§†å›¾å·¦ä¸Šæ–¹çš„ä¸‹æ‹‰èœå•ä¸­é€‰ä¸­Overdrawå³å¯æŸ¥çœ‹overdraw. å®é™…ä¸Š,è¿™é‡Œçš„è§†å›¾åªæ˜¯æä¾›äº†æŸ¥çœ‹ç‰©ä½“ç›¸äº’é®æŒ¡çš„å±‚æ•°,å¹¶ä¸æ˜¯çœŸæ­£çš„æœ€ç»ˆå±å¹•ç»˜åˆ¶çš„overdraw.ä¹Ÿå°±æ˜¯è¯´,å¯ä»¥ç†è§£ä¸ºå®ƒæ˜¾ç¤ºçš„æ˜¯,å¦‚æœæ²¡æœ‰ä»»ä½•æ·±åº¦æµ‹è¯•å’Œå…¶ä»–ä¼˜åŒ–ç­–ç•¥æ—¶çš„overdraw. è¿™ç§è§†å›¾é€šè¿‡å§æ‰€æœ‰æ¸¸æˆå¯¹è±¡éƒ½æ¸²æŸ“æˆä¸€ä¸ªé€æ˜çš„è½®å»“,é€è¿‡æŸ¥çœ‹é€æ˜é¢œè‰²çš„ç´¯ç§¯ç¨‹åº¦æ¥åˆ¤æ–­ç‰©ä½“ä¹‹é—´çš„é®æŒ¡. Â§ æ§åˆ¶ç»˜åˆ¶é¡ºåº ä¸ºäº†æœ€å¤§é™åº¦é¿å…overdraw,ä¸€ä¸ªé‡è¦çš„ä¼˜åŒ–ç­–ç•¥å°±æ˜¯æ§åˆ¶ç»˜åˆ¶é¡ºåº. ç”±äºæ·±åº¦æµ‹è¯•çš„å­˜åœ¨,å¦‚æœæˆ‘ä»¬å¯ä»¥ä¿è¯ç‰©ä½“éƒ½æ˜¯ä»å‰å¾€åç»˜åˆ¶çš„,é‚£ä¹ˆå°±å¯ä»¥å¾ˆå¤§ç¨‹åº¦ä¸Šå‡å°‘overdraw.è¿™æ˜¯å› ä¸º,åœ¨åé¢ç»˜åˆ¶çš„ç‰©ä½“ç”±äºæ— æ³•é€šè¿‡æ·±åº¦æµ‹è¯•,å› æ­¤å°±ä¸ä¼šå†è¿›è¡Œåé¢çš„æ¸²æŸ“å¤„ç†. åœ¨Unityä¸­,é‚£äº›æ¸²æŸ“é˜Ÿåˆ—æ•°ç›®å°äº2500(å¦‚&quot;Background&quot;â€œGeometry&quot;å’Œ&quot;AlphaTestâ€)çš„å¯¹è±¡éƒ½è¢«è®¤ä¸ºæ˜¯ä¸é€æ˜(opaque)çš„ç‰©ä½“,è¿™äº›ç‰©ä½“æ€»ä½“ä¸Šæ˜¯ä»å‰å¾€åç»˜åˆ¶çš„,è€Œä½¿ç”¨å…¶ä»–çš„é˜Ÿåˆ—(å¦‚&quot;ransparent&quot;&quot;Overlay&quot;ç­‰)çš„ç‰©ä½“åˆ™æ˜¯ä»åå¾€å‰ç»˜åˆ¶çš„.è¿™æ„å‘³ç€,æˆ‘ä»¬å¯ä»¥å°½å¯èƒ½åœ°æŠŠç‰©ä½“çš„é˜Ÿåˆ—è®¾ç½®ä¸ºä¸é€æ˜çš„æ¸²æŸ“é˜Ÿåˆ—,è€Œå°½é‡é¿å…ä½¿ç”¨åŠé€æ˜é˜Ÿåˆ—. å¥½æ— èŠäº†è¿™å—ä»¥åå†æ¥çœ‹ Â§ æ—¶åˆ»è­¦æƒ•æ¬§æ˜ç‰©ä½“ Â§ å‡å°‘å®æ—¶å…‰ç…§å’Œé˜´å½±]]></content>
      <categories>
        <category>shader</category>
      </categories>
      <tags>
        <tag>unity</tag>
        <tag>shader</tag>
        <tag>ã€Šshaderå…¥é—¨ç²¾è¦ã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CSharpç¬”è®°-è£…ç®±ä¸æ‹†ç®±]]></title>
    <url>%2Fcsnote-2%2F</url>
    <content type="text"><![CDATA[Â§ å®˜æ–¹æŒ‡å—ç¿»è¯‘ å®˜æ–¹æŒ‡å—: Boxing and Unboxing (C# Programming Guide) è£…ç®±æ˜¯æŠŠä¸€ä¸ªå€¼ç±»å‹è½¬æ¢ä¸ºobjectç±»å‹æˆ–è½¬æ¢ä¸ºä»»ä½•å®ç°äº†è¯¥å€¼ç±»å‹æ¥å£çš„ç±»å‹çš„è¿‡ç¨‹.å½“CLRè£…ç®±ä¸€ä¸ªå€¼ç±»å‹æ—¶,å®ƒå°†è¿™ä¸ªå€¼å°è£…è¿›ä¸€ä¸ªSystem.Objectå¹¶ä¸”å­˜åœ¨å †ä¸­.æ‹†ç®±å°†è¿™ä¸ªå€¼ä»è¿™ä¸ªobjectä¸­å–å‡ºæ¥.è£…ç®±æ˜¯éšå¼çš„,æ‹†ç®±æ˜¯æ˜¾å¼çš„.è£…ç®±å’Œæ‹†ç®±çš„æ¦‚å¿µæ˜¯C#ç±»å‹ç³»ç»Ÿç»Ÿä¸€è§†å›¾çš„åŸºç¡€.C#ç±»å‹ç³»ç»Ÿä¸­,ä¸€ä»»ä½•ç±»å‹çš„å€¼éƒ½å¯ä»¥è¢«å½“åšobject. åœ¨ä¸‹é¢çš„ä¾‹å­é‡Œ,intå€¼iè¢«è£…ç®±,å¹¶èµ‹å€¼ç»™objecto 123int i = 123;// ä¸‹é¢ä¸€è¡Œè£…ç®±äº†i.object o = i; ç„¶åobjectoå¯ä»¥æ‹†ç®±å¹¶èµ‹å€¼ç»™å˜é‡i 12o = 123;i = (int)o; // æ‹†ç®± ä¸‹é¢çš„ä¾‹å­è§£é‡Šäº†è£…ç®±åœ¨C#ä¸­çš„åº”ç”¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162// String.Concat ä¾‹å­// 42å’Œtrueå¿…é¡»è¢«è£…ç®±Console.WriteLine(String.Concat("Answer", 42, true));// List ä¾‹å­// æ–°å»ºä¸€ä¸ªobjectsçš„listå­˜æ”¾å„ç§å„æ ·ç±»å‹çš„å…ƒç´ List&lt;object&gt; mixedList = new List&lt;object&gt;();// å¾€è¿™ä¸ªlistä¸­å¤©é™…ä¸€ä¸ªstringmixedList.Add("First Group:");// å¾€è¿™ä¸ªlistä¸­æ·»åŠ ä¸€äº›intfor (int j = 1; j &lt; 5; j++)&#123; // æ¯ä¸ªæ·»åŠ è¿›è¿™ä¸ªlistçš„jéƒ½ä¼šè¢«è£…ç®± mixedList.Add(j);&#125;// æ·»åŠ å¦ä¸€ä¸ªstringå’Œæ›´å¤šintmixedList.Add("Second Group:");for (int j = 5; j &lt; 10; j++)&#123; mixedList.Add(j);&#125;// æ˜¾ç¤ºè¿™ä¸ªlistä¸­çš„æ‰€æœ‰å…ƒç´ . ç”¨varå£°æ˜å¾ªç¯ä¸­çš„æ‰€æœ‰å˜é‡, ç„¶åç¼–è¯‘å™¨ä¼šåˆ†é…å®ƒçš„ç±»å‹foreach (var item in mixedList)&#123; Console.WriteLine(item);&#125;// ä¸‹é¢çš„å¾ªç¯å°†ç¬¬ä¸€æ‰¹çš„intçš„å¹³æ–¹åŠ èµ·æ¥// è¿™äº›listçš„å…ƒç´ æ˜¯objects,åœ¨è¢«æ‹†ç®±ä¹‹å‰ä¸èƒ½ä¹˜å’ŒåŠ // è¿™ä¸ªæ‹†ç®±å¿…é¡»æ˜¯æ˜¾å¼çš„var sum = 0;for (var j = 1; j &lt; 5; j++)&#123; // ä¸‹é¢çš„è¯­å¥ä¼šå¼•èµ·ä¸€ä¸ªç¼–è¯‘é”™è¯¯: // Operator '*' cannot be applied to operands of type 'object' and 'object'. //sum += mixedList[j] * mixedList[j]); // å½“åˆ—è¡¨å…ƒç´ æ‹†ç®±å,è®¡ç®—ä¸ä¼šå¼•èµ·ç¼–è¯‘é”™è¯¯ sum += (int)mixedList[j] * (int)mixedList[j];&#125;// æ˜¾ç¤ºçš„ç»“æœæ˜¯ 30, 1 + 4 + 9 + 16.Console.WriteLine("Sum: " + sum);// Output:// Answer42True// First Group:// 1// 2// 3// 4// Second Group:// 5// 6// 7// 8// 9// Sum: 30 Â§ æ€§èƒ½ å› ä¸ºæ¶‰åŠåˆ°ä¸€ä¸ªç®€å•çš„åˆ†é…, æ‰€ä»¥è£…ç®±å’Œæ‹†ç®±åœ¨è®¡ç®—ä¸Šæ˜¯æ˜‚è´µçš„. å½“ä¸€ä¸ªå€¼ç±»å‹è¢«è£…ç®±æ—¶, ä¸€ä¸ªæ–°çš„objectå°±ä¼šè¢«æŒ‡æ´¾å’Œåˆ›å»º. åœ¨è¾ƒå°çš„ç¨‹åº¦ä¸Š, æ‹†ç®±éœ€è¦çš„èŠ±è´¹åœ¨è®¡ç®—ä¸Šä¹Ÿæ˜¯å¾ˆæ˜‚è´µ. æ›´å¤šä¿¡æ¯è¯·æµè§ˆæ€§èƒ½ Â§ è£…ç®± è£…ç®±ç”¨æ¥å°†å€¼ç±»å‹å­˜åˆ°åƒåœ¾å›æ”¶(GC)å †ä¸­. è£…ç®±éšå¼åœ°å°†å€¼ç±»å‹è½¬æ¢ä¸ºobjectç±»å‹æˆ–è½¬æ¢ä¸ºä»»ä½•å®ç°äº†è¯¥å€¼ç±»å‹æ¥å£çš„ç±»å‹. å°†ä¸€ä¸ªå€¼ç±»å‹è£…ç®±ä¼šåœ¨å †ä¸­æŒ‡æ´¾ä¸€ä¸ªobjectå®ä¾‹å¹¶å°†è¿™ä¸ªå€¼æ‹·è´è¿›è¿™ä¸ªæ–°çš„object. è€ƒè™‘ä¸‹ä¸‹é¢è¿™ä¸ªå€¼ç±»å‹å˜é‡çš„å£°æ˜: 1int i = 123; ä¸‹é¢çš„è¯­å¥éšå¼åœ°å¯¹å˜é‡iè¿›è¡Œäº†æ‹†ç®±: 12// æ‹†ç®±å°†içš„å€¼æ‹·è´è¿›object oobject o = i; ä¸Šé¢è¯­å¥çš„ç»“æœæ˜¯,åœ¨æ ˆä¸Šåˆ›å»ºä¸€ä¸ªå¯¹è±¡oçš„å¼•ç”¨, å¼•ç”¨äº†åœ¨å †ä¸Šçš„intç±»å‹çš„å€¼. è¿™ä¸ªå€¼æ˜¯ä¸€ä¸ªåˆ†é…åˆ°å˜é‡iä¸Šçš„å€¼ç±»å‹çš„æ‹·è´. iå’Œoè¿™ä¸¤ä¸ªå˜é‡çš„åŒºåˆ«å¯ä»¥ç”¨ä¸‹é¢è¿™å¼ è£…ç®±å˜æ¢çš„å›¾æ¥å½¢è±¡çš„è§£é‡Š: è£…ç®±ä¹Ÿå¯ä»¥åƒä¸‹é¢è¿™æ ·æ˜¾å¼çš„æ‰§è¡Œ, ä¸è¿‡æ˜¾å¼çš„è£…ç®±æ°¸è¿œä¸ä¼šç”¨åˆ°: 12int i = 123;object o = (object)i; // æ˜¾å¼çš„è£…ç®± Â§ æè¿° è¿™ä¸ªä¾‹å­ç”¨è£…ç®±å°†ä¸€ä¸ªintå˜é‡iè½¬æ¢æˆä¸€ä¸ªobjecto. ç„¶å,å¦‚æœå­˜æ”¾åœ¨å˜é‡iä¸­çš„å€¼ä»123å˜ä¸º456â€¦ ä¸‹é¢çš„ä¾‹å­è¡¨æ˜äº†,åœ†æœ¬ çš„å€¼ç±»å‹å’Œè£…ç®±åçš„objectä½¿ç”¨ä¸åŒçš„å†…å­˜åœ°å€, æ‰€ä»¥å¯ä»¥å­˜å‚¨ä¸åŒçš„å€¼. Â§ ä¾‹å­ 123456789101112131415161718192021class TestBoxing&#123; static void Main() &#123; int i = 123; // è£…ç®±å°†içš„å€¼æ‹·è´è¿›object o object o = i; // æ”¹å˜içš„å€¼ i = 456; // içš„æ”¹å˜ä¸ä¼šå½±å“åˆ°oä¸­å€¼çš„å˜åŒ– System.Console.WriteLine("The value-type value = &#123;0&#125;", i); System.Console.WriteLine("The object-type value = &#123;0&#125;", o); &#125;&#125;/* è¾“å‡º: The value-type value = 456 The object-type value = 123*/ Â§ æ‹†ç®± æ‹†ç®±æ˜¾å¼åœ°å°†objectç±»å‹æˆ–ä»»ä½•å®ç°äº†è¯¥å€¼ç±»å‹æ¥å£çš„ç±»å‹è½¬æ¢ä¸ºä¸€ä¸ªå€¼ç±»å‹. ä¸€ä¸ªæ‹†ç®±æ“ä½œç”±ä¸‹é¢ä¸¤éƒ¨åˆ†ç»„æˆ: ç¡®å®šè¿™ä¸ªobjectå®ä¾‹æ˜¯ä¸€ä¸ªç»™å®šå€¼ç±»å‹çš„è£…ç®±. å°†è¿™ä¸ªå®ä¾‹ä¸­çš„å€¼æ‹·è´ç»™ä¸€ä¸ªå€¼ç±»å‹å˜é‡. ä¸‹é¢çš„è¯­å¥å±•ç¤ºäº†è£…ç®±å’Œæ‹†ç®±æ“ä½œ: 123int i = 123; // ä¸€ä¸ªå€¼ç±»å‹object o = i; // è£…ç®±int j = (int)o; // æ‹†ç®± ä¸‹é¢çš„å›¾æ˜¯ä¸Šé¢è¯­å¥çš„æ¼”ç¤º: ä¸ºäº†ç¡®ä¿æ‹†ç®±åœ¨è¿è¡Œæ—¶èƒ½æˆåŠŸ, è¢«æ‹†ç®±çš„ä¸œè¥¿å¿…é¡»æ˜¯ä¸€ä¸ªä¹‹å‰è¢«è£…ç®±åˆ›å»ºçš„objectçš„å¼•ç”¨. å°è¯•å»æ‹†ç®±nullä¼šå¼•å‘ä¸€ä¸ªNullReferenceException.å°è¯•æ‹†ç®±ä¸€ä¸ªä¸ç›¸å®¹çš„ç±»å‹ä¼šå¼•å‘ä¸€ä¸ªInvalidCastException Â§ ä¾‹å­ ä¸‹é¢çš„ä¾‹å­ç¤ºèŒƒäº†ä¸€ä¸ªä¸æ­£ç¡®çš„å¼•å‘äº†InvalidCastExceptionçš„æ‹†ç®±çš„ä¾‹å­: 12345678910111213141516171819class TestUnboxing&#123; static void Main() &#123; int i = 123; object o = i; // éšå¼è£…ç®± try &#123; int j = (short)o; // å°è¯•æ‹†ç®± System.Console.WriteLine("Unboxing OK."); &#125; catch (System.InvalidCastException e) &#123; System.Console.WriteLine("&#123;0&#125; Error: Incorrect unboxing.", e.Message); &#125; &#125;&#125; ä¸Šé¢çš„ç¨‹åºä¼šè¾“å‡º: Specified cast is not valid. Error: Incorrect unboxing. å¦‚æœä½ å°†int j = (short) o;æ”¹ä¸ºint j = (int) o;, è¿™ä¸ªè½¬æ¢å°±ä¼šæˆåŠŸ, ä¼šè¾“å‡ºUnboxing OK.]]></content>
      <categories>
        <category>csharp</category>
      </categories>
      <tags>
        <tag>csharp</tag>
        <tag>unity</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CSharpç¬”è®°-å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹]]></title>
    <url>%2Fcsnote-1%2F</url>
    <content type="text"><![CDATA[ä¹‹å‰ç©pythonçš„æ—¶å€™å°±æœ‰ç‚¹åœ¨æ„ä½†æ˜¯æ²¡ä»”ç»†å­¦â€¦åªçŸ¥é“pythonæ˜¯ç®€å•å€¼ä¼ å€¼,å¤æ‚å€¼ä¼ å¼•ç”¨. Â§ C#ä¸­çš„å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹ C#ä¸­çš„æ‰€æœ‰Objectçš„æ´¾ç”Ÿç±»éƒ½æ˜¯å¼•ç”¨ç±»å‹ byteï¼Œshortï¼Œintï¼Œlongï¼Œfloatï¼Œdoubleï¼Œdecimalï¼Œcharï¼Œboolå’Œstructç»Ÿç§°ä¸ºå€¼ç±»å‹ è¿™é‡Œæ³¨æ„,ç»“æ„ä½“ä¸ºå€¼ç±»å‹è€Œç±»éƒ½æ˜¯å¼•ç”¨ç±»å‹. Â§ å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„åŒºåˆ« ä»¥ä¸‹éƒ¨åˆ†å‚è€ƒäº†çŸ¥ä¹è¿™ç¯‡æ–‡ç« å¹¶åŠ ä¸Šè‡ªå·±çš„ç†è§£ å€¼ç±»å‹çš„æ•°æ®å­˜å‚¨åœ¨å†…å­˜çš„æ ˆä¸­,å¼•ç”¨ç±»å‹çš„æ•°æ®å­˜å‚¨åœ¨å†…å­˜çš„å †ä¸­.è€Œå†…å­˜å•å…ƒä¸­åªå­˜æ”¾å †ä¸­å¯¹è±¡çš„åœ°å€,å› æ­¤å€¼ç±»å‹å­˜å–é€Ÿåº¦å¿«,å¼•ç”¨ç±»å‹å­˜å–é€Ÿåº¦æ…¢ å€¼ç±»å‹è¡¨ç¤ºå®é™…æ•°æ®,å¼•ç”¨ç±»å‹è¡¨ç¤ºæŒ‡å‘å­˜å‚¨åœ¨å†…å­˜å †ä¸­çš„æ•°æ®çš„æŒ‡é’ˆæˆ–å¼•ç”¨ å€¼ç±»å‹ç»§æ‰¿è‡ªSystem.ValueType,å¼•ç”¨ç±»å‹ç»§æ‰¿è‡ªSystem.Object æ ˆçš„å†…å­˜åˆ†é…æ˜¯è‡ªåŠ¨é‡Šæ”¾ï¼›è€Œå †åœ¨.NETä¸­ä¼šæœ‰GCæ¥é‡Šæ”¾ å€¼ç±»å‹æ²¡æ³•ç»§æ‰¿,æ²¡æ³•ç”¨æ¥å£æ¥å¼•ç”¨(è™½ç„¶æ³›å‹+æ¥å£è§£å†³éƒ¨åˆ†é—®é¢˜) ä»¥ä¸‹å‚è€ƒçŸ¥ä¹:C# å¼•ç”¨ç±»å‹ç›¸æ¯”äºå€¼ç±»å‹æ„ä¹‰ä½•åœ¨? - Nanryçš„å›ç­” - çŸ¥ä¹ ç™¾åº¦ç™¾ç§‘å¼•ç”¨ç±»å‹çš„è§£é‡Š: å¼•ç”¨ç±»å‹ ç”±ç±»å‹çš„å®é™…å€¼å¼•ç”¨ï¼ˆç±»ä¼¼äºæŒ‡é’ˆï¼‰è¡¨ç¤ºçš„æ•°æ®ç±»å‹ã€‚å¦‚æœä¸ºæŸä¸ªå˜é‡åˆ†é…ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œåˆ™è¯¥å˜é‡å°†å¼•ç”¨ï¼ˆæˆ–â€œæŒ‡å‘â€ï¼‰åŸå§‹å€¼ã€‚ä¸åˆ›å»ºä»»ä½•å‰¯æœ¬ã€‚å¼•ç”¨ç±»å‹åŒ…æ‹¬ç±»ã€æ¥å£ã€å§”æ‰˜å’Œè£…ç®±å€¼ç±»å‹ã€‚ å€¼ç±»å‹å¹¶ä¸æ˜¯åœ¨ç¨‹åºå¯åŠ¨æ—¶å°±å…¨éƒ¨åˆ†é…åœ¨æ ˆä¸Šçš„,è€Œæ˜¯ä¸€ç›´åœ¨å…¥æ ˆå‡ºæ ˆæ“ä½œ,æ‰€ä»¥æ­£å¸¸æƒ…å†µä¸‹ç”±äºå…¥æ ˆå‡ºæ ˆçš„æ“ä½œ,ä¸ä¼šè¶…è¿‡æ ˆç©ºé—´çš„é™åˆ¶,è¶…è¿‡äº†å°±æ˜¯å¼•èµ·éå¸¸å†…å­˜è®¿é—®äº†(å¦‚æœæ˜¯staticæ˜¯ä¸æ˜¯ä¸€å¼€å§‹å°±å…¨éƒ¨åˆ†é…åœ¨æ ˆä¸Šå‘¢?) C#çš„å€¼ç±»å‹å°±æ˜¯å­˜åœ¨æ ˆä¸­çš„.å€¼ç±»å‹æ˜¯è½»é‡çº§çš„ç±»å‹,å› ä¸ºåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹,å€¼ç±»å‹çš„çš„å®ä¾‹éƒ½åˆ†é…åœ¨çº¿ç¨‹æ ˆä¸­,å› æ­¤å®ƒä¸å—åƒåœ¾å›æ”¶çš„æ§åˆ¶,ç¼“è§£äº†æ‰˜ç®¡å †ä¸­çš„å‹åŠ›,å‡å°‘äº†åº”ç”¨ç¨‹åºçš„åƒåœ¾å›æ”¶çš„æ¬¡æ•°,æé«˜æ€§èƒ½.(æ ˆä¸­å­˜çš„æ•°æ®å¯ä»¥è‡ªåŠ¨æ¸…ç†,å †ä¸­çš„æ•°æ®è¦ä¾é GC) é¡ºä¾¿,æœ‰ä¸€ç§ç¼–ç¨‹æŠ€å·§æå…¶å®¹æ˜“å› ä¸ºæ ˆç©ºé—´ä¸è¶³è€Œå¯¼è‡´éå¸¸å†…å­˜è®¿é—®çš„æƒ…å†µ,é‚£å°±æ˜¯é€’å½’.å¦‚æœä½ åœ¨ä¸€ä¸ªé€’å½’æ–¹æ³•ä¸­ä½¿ç”¨äº†å€¼ç±»å‹,å¹¶ä¸”é€’å½’æ¬¡æ•°è¿‡å¤š,ç»å¸¸ä¼šå‘ç”Ÿæ ˆæº¢å‡ºçš„å¼‚å¸¸ã€‚ ä¸‹é¢æ˜¯ä¸¤ä¸ª,ä¸Šé¢çš„é‚£ä¸ªç­”ä¸»æåˆ°çš„æ‰©å±•é˜…è¯»,ä»¥åå†çœ‹ ä¸€çœ‹å°±æ‡‚ï¼šå›¾è§£C#ä¸­çš„å€¼ç±»å‹ã€å¼•ç”¨ç±»å‹ã€æ ˆã€å †ã€refã€out æ ˆå¤§å°å’Œå†…å­˜åˆ†éƒ¨é—®é¢˜ é¡ºä¾¿å¼•å‡ºçš„ä»¥åå†çœ‹çš„é—®é¢˜: æ ˆå’Œå † å°¾é€’å½’ä¼˜åŒ–]]></content>
      <categories>
        <category>csharp</category>
      </categories>
      <tags>
        <tag>csharp</tag>
        <tag>unity</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AMVCCè®¾è®¡æ¨¡å¼çš„ç†è§£]]></title>
    <url>%2Fnote-AMVCC%2F</url>
    <content type="text"><![CDATA[Â§ å¯¹æ¯”ä»¥å‰å‰ç«¯MVVMè®¾è®¡æ¨¡å¼åšå‡ºç†è§£ Â§ MVVM MVVMåœ¨viewå±‚è´Ÿè´£æ ¹æ®æ•°æ®å±•ç¤ºè§†å›¾,å¦‚v-if,v-foræ ‡ç­¾çš„ä½œç”¨. viewå±‚ä¼šå“åº”äº‹ä»¶,è°ƒç”¨modelå±‚æ–¹æ³•,å¦‚@clickæ ‡ç­¾ç­‰. modelå±‚åˆ™è´Ÿè´£æ‰€æœ‰æ•°æ®çš„æ“ä½œ. Â§ MVC Unityä¸­çš„MVCçš„viewå±‚æ ¹æ®æ•°æ®å±•ç¤ºè§†å›¾ viewå±‚ä¼šå“åº”äº‹ä»¶,ä¹‹åé€šçŸ¥Controllerå±‚,å¯¹äº‹ä»¶è¿›è¡Œå“åº”. MVCåƒæ˜¯æŠŠMVVMçš„modelæ‹†æˆmodelå’Œcontrollerä¸¤å±‚. controllerå±‚ä¼šä½¿ç”¨å’Œæ›´æ”¹æ•°æ®,ä½†ä¸ä¼šå­˜å‚¨æ•°æ®.å­˜å‚¨æ•°æ®äº¤ç»™modelå±‚. ä¸ªäººç†è§£,è¿™æ ·åšçš„å¥½å¤„æ˜¯æ¡ç†æ›´æ¸…æ™°,æ¯”å¦‚æ‰€æœ‰å–æ•°æ®,éƒ½åœ¨APP.Model.someData,å¹¶ä¸”åœ¨Unityä¸­è°ƒæ•´å˜é‡å€¼çš„åœ°æ–¹æ›´åŠ é›†ä¸­,å®¹æ˜“ç®¡ç†.Unityä¼ ç»Ÿçš„ECæ¨¡å‹ç›¸å¯¹äºMVC,åœ¨è„šæœ¬ä¹‹é—´äº’ç›¸è°ƒç”¨å’Œäº’ç›¸ä¼ å‚ååˆ†éº»çƒ¦. Â§ Controllerçš„switch-case è¿™é‡Œçš„&quot;é¿å…åºå¤§çš„switch-case&quot;ä»…ä¸ºä»£ç ä¹¦å†™ä¸Š,ä¸ä¼šæ˜¾å¾—å¤ªå¤šswitch-case,å®é™…æ‰§è¡Œçš„é€»è¾‘ä¸Šè¿˜æ˜¯è¯¥å¤šå°‘è¿˜æ˜¯å¤šå°‘.]]></content>
      <tags>
        <tag>Unity</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½¬è½½ç¿»è¯‘ Unity with MVC-How to Level Up Your Game Development]]></title>
    <url>%2Funity-with-mvc-how-to-level-up-your-game-development%2F</url>
    <content type="text"><![CDATA[Unity with MVC: How to Level Up Your Game Developmentçš„ç¿»è¯‘ æ²¡æœ‰æ‰¾åˆ°å¥½çš„å›½å†…çš„unity mvcçš„èµ„æ–™,å›½å¤–çš„æ‰¾åˆ°äº†è¿™ä¸ª. è‡ªå·±ç¿»è¯‘ä¸‹,åŠŸåŠ›å°šæµ…æœ›è½»å–·.(é¡µé¢æœ€ä¸‹é¢æœ‰è¯„è®ºæ¿å—) åŸæ–‡åœ°å€: https://www.toptal.com/unity-unity3d/unity-with-mvc-how-to-level-up-your-game-development (ä»¥æ‹¬å·å¼€å¤´å’Œç»“å°¾çš„ä»£ç å—ä¸ºè¯‘è€…çš„æ³¨é‡Šå’Œåæ§½,æ¯”å¦‚è¿™è¡Œå’Œä¸‹é¢ä¸€è¡Œ) (è¿™ä¸ªæ ‡é¢˜è¯´æ˜¯MVC,å®é™…ä¸Šè®²çš„æ˜¯MVCçš„ä¸€ä¸ªå˜ç§: AMVCCæ¨¡å¼) ç¨‹åºçŒ¿ç»å¸¸ä»ç»å…¸çš„Hello Worldç€æ‰‹å¼€å§‹å­¦ä¹ .ä»é‚£å¼€å§‹,é¡¹ç›®è¶Šåšè¶Šå¤§.æ¯ä¸ªæ–°æŒ‘æˆ˜éƒ½æŒ‡å‘ä¸€ä¸ªé‡è¦çš„è¯¾é¢˜: é¡¹ç›®è¶Šå¤§,å°±è¶Šä¹±. ä¸ä¹…å,å°±å¯ä»¥çœ‹åˆ°å¤§å°å›¢é˜Ÿä¸ä¼šéšæ„çš„ä¸é¡¾ä¸€åˆ‡çš„åšé¡¹ç›®.ä»£ç åº”è¯¥è¢«ç»´æŠ¤ä¸”èƒ½é•¿æ—¶é—´æŒç»­ä½¿ç”¨.ä½ å·¥ä½œè¿‡çš„å…¬å¸ä¸ä¼šåªè¦ä½ è”ç³»æ–¹å¼è€Œæ˜¯æ¯æ¬¡éœ€è¦ä¿®æˆ–æ”¹å–„ä»£ç çš„æ—¶å€™å«ä½ (ç„¶è€Œä½ ä¸å¸Œæœ›è¿™æ ·). è¿™å°±æ˜¯è½¯ä»¶è®¾è®¡æ¨¡å¼å­˜åœ¨çš„ç†ç”±;ä»–ä»¬åˆ©ç”¨ç®€å•çš„è§„åˆ™æ¥æ“æ§ä¸€ä¸ªè½¯ä»¶å·¥ç¨‹çš„æ•´ä½“æ¶æ„.ä»–ä»¬ä½¿ä¸€ä¸ªæˆ–å¤šä¸ªç¨‹åºçŒ¿æŠŠä¸€ä¸ªå¤§é¡¹ç›®çš„éƒ¨åˆ†åˆ†å¼€æˆä¸€äº›æ ¸å¿ƒéƒ¨åˆ†æ¥å†™,å¹¶ä¸”ç”¨ä¸€ä¸ªæ ‡å‡†åŒ–çš„æ–¹æ³•æ¥ç»„ç»‡,ä½¿å¾—é‡åˆ°ä¸ç†Ÿæ‚‰çš„ä»£ç çš„éƒ¨åˆ†æ—¶èƒ½æ¶ˆé™¤æ··ä¹±. å¦‚æœæ‰€æœ‰äººéƒ½éµå®ˆè¿™äº›è§„åˆ™,å°±ä¼šä½¿ä¼ ç»Ÿä»£ç èƒ½æ›´å¥½çš„ç»´æŠ¤å’Œæ“çºµ,å¹¶ä¸”æ–°çš„ä»£ç å¯ä»¥æ›´çµæ´»åœ°æ·»åŠ è¿›å».è§„åˆ’å¼€å‘çš„æ–¹æ³•è®ºèŠ±è´¹çš„æ—¶é—´æ›´å°‘.å› ä¸ºé—®é¢˜æ˜¯å¤šç§å¤šæ ·çš„,æ‰€ä»¥è®¾è®¡æ¨¡å¼ä¸å­˜åœ¨æœ€å¼ºæ€æ‹›.å¿…é¡»ä»”ç»†è€ƒè™‘æ¯ä¸ªæ¨¡å¼çš„ä¼˜ç‚¹å’Œç¼ºç‚¹,ç„¶åæ‰¾åˆ°æœ€é€‚åˆæ‹¿æ¥è§£å†³æ‰‹å¤´çš„é—®é¢˜çš„. åœ¨è¿™ä»½æ•™ç¨‹ä¸­,æˆ‘ä¼šç»“åˆæˆ‘åœ¨Unityæ¸¸æˆå¼€å‘å¹³å°å’ŒModel-View-Controller(MVC)æ¨¡å¼ä¸Šçš„ç»éªŒ.åœ¨æˆ‘ä¸ƒå¹´çš„å¼€å‘,åœ¨ä¸æˆ‘ä¹±æˆä¸€é”…ç²¥çš„æ¸¸æˆå¼€å‘çš„æ­£é¢å¯¹å†³ä¸­,æˆ‘åˆ©ç”¨è®¾è®¡æ¨¡å¼å¾—åˆ°äº†å¾ˆå¥½çš„ä»£ç ç»“æ„å’Œå¼€å‘é€Ÿåº¦. æˆ‘ä¸€å¼€å§‹ä¼šè®²ä¸€äº›unintyçš„åŸºç¡€æ¶æ„:Entity-Componentæ¨¡å¼.ç„¶åæˆ‘ä¼šè§£é‡ŠMVCå¦‚ä½•é€‚åº”å®ƒ,å¹¶ä¸”ç”¨ä¸€äº›æ¨¡æ‹Ÿçš„é¡¹ç›®æ¥è§£é‡Šå®ƒ. Â§ åŠ¨æœº åœ¨è½¯ä»¶ç›¸å…³çš„æ–‡çŒ®ä¸­,æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä¸€å¤§å †å…³äºè®¾è®¡æ¨¡å¼çš„.çºµç„¶ä»–ä»¬æœ‰ä¸€ç³»åˆ—è§„åˆ™,å¼€å‘è€…ä»ç„¶ç»å¸¸éœ€è¦åšä¸€äº›å°çš„æ”¹åŠ¨æ¥ä½¿è®¾è®¡æ¨¡å¼æ›´èƒ½é€‚åº”ä»–ä»¬ç‹¬ç‰¹çš„é—®é¢˜. è¿™ç§&quot;ç¨‹åºç¼–åˆ¶çš„è‡ªç”±æ€§&quot;è¯æ˜äº†æˆ‘ä»¬æ‰¾ä¸åˆ°ä¸€ä¸ªå•ä¸€çš„,ç¡®å®šçš„æ–¹æ³•æ¥è®¾è®¡è½¯ä»¶.æ‰€ä»¥,è¿™ç¯‡æ–‡ç« ä¸åº”æ˜¯è§£å†³ä½ é—®é¢˜çš„ç»ˆææ–¹æ¡ˆ,è€Œæ˜¯å±•ç¤ºä¸¤ç§æµè¡Œçš„è®¾è®¡æ¨¡å¼:Entity-Componentå’ŒModel-View-Controlleçš„æ•ˆç›Šå’Œå‘å±•æ½œåŠ›. Â§ Entity-Componentæ¨¡å¼ Entity-Component(EC)æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼,æˆ‘ä»¬é¦–å…ˆå®šä¹‰ç»„æˆåº”ç”¨çš„å…ƒç´ ä»¬çš„å±‚çº§(Entities),ç„¶åå®šä¹‰å°†è¦è¢«åŒ…å«çš„ç‰¹å¾å’Œæ•°æ®(Components).åœ¨æ›´å¤šçš„&quot;ç¨‹åºçŒ¿&quot;çœ‹æ¥,ä¸€ä¸ªEntityå¯ä»¥æ˜¯ä¸€ä¸ªåŒ…å«äº†æœ‰0ä¸ªæˆ–å¤šä¸ªComponentsçš„å¯¹è±¡.è®©æˆ‘ä»¬è¿™æ ·æè¿°ä¸€ä¸ªEntity: some-entity [component0, component1, â€¦] è¿™é‡Œæ˜¯ä¸€ä¸ªç®€å•çš„ECæ ‘çš„ä¾‹å­: 1234567891011- app [Application] - game [Game] - player [KeyboardInput, Renderer] - enemies - spider [SpiderAI, Renderer] - ogre [OgreAI, Renderer] ui [UI] - hud [HUD, MouseInput, Renderer] - pause-menu [PauseMenu, MouseInput, Renderer] - victory-modal [VictoryModal, MouseInput, Renderer] - defeat-modal [DefeatModal, MouseInput, Renderer] ECåœ¨ç¼“è§£å¤šé‡ç»§æ‰¿çš„é—®é¢˜æ–¹é¢æ˜¯ä¸€ä¸ªå¥½çš„æ¨¡å¼,å½“ä¸€ä¸ªå¤æ‚çš„ç±»ç»“æ„å¼•å‡ºé—®é¢˜æ—¶,ä¾‹å¦‚é’»çŸ³é—®é¢˜: ä¸€ä¸ªç±»D,ç»§æ‰¿è‡ªä¸¤ä¸ªç±»,Bå’ŒC,è€ŒBå’ŒCç»§æ‰¿è‡ªåŒä¸€ä¸ªç±»A,è¿™æ—¶å°±ä¼šå¼•å‘å†²çª,å› ä¸ºBå’ŒCä¼šä¸åŒåœ°ä¿®æ”¹Açš„å±æ€§. å› ä¸ºåœ¨æ¸¸æˆå¼€å‘ä¸­ç»§æ‰¿åº”ç”¨å¾ˆå¹¿æ³›,æ‰€ä»¥è¿™ç§é—®é¢˜ä¼šå¾ˆå¸¸è§. é€šè¿‡åˆ†è§£å°çš„Componentçš„å±æ€§å’Œæ•°æ®æ“ä½œå™¨,å¯ä»¥ä½¿ä»–ä»¬å¯ä»¥é™„åŠ åœ¨ä¸åŒçš„Entitiyä¸Šå¹¶é‡ç”¨,è€Œä¸ç”¨ä¾èµ–äºå¤æ‚çš„ç»§æ‰¿å…³ç³»(é¡ºä¾¿,è¿™ä¸åªæ˜¯C#æˆ–JavaScript,Unityå¸¸ç”¨çš„è¯­è¨€çš„ç‰¹å¾). Â§ Entity-Componentæ¨¡å¼çš„ä¸è¶³ ECåœ¨OOPä¹‹ä¸Šçš„ä¸€ä¸ªå±‚é¢,ECæœ‰åˆ©äºæ•´ç†å’Œæ›´å¥½çš„ç»„ç»‡ä½ çš„ä»£ç æ¶æ„.ç„¶è€Œ,åœ¨å¤§é¡¹ç›®ä¸­,æˆ‘ä»¬ä»ç„¶&quot;å¤ªè¿‡éšæ„&quot;ç„¶åæˆ‘ä»¬ä¼šå‘ç°è‡ªå·±èº«å¤„ä¸€ä¸ª&quot;å±æ€§æµ·æ´‹&quot;,å¯èƒ½ä¼šè´¹ä¸€æ®µè‰°è‹¦çš„æ—¶å…‰æ¥æ‰¾åˆ°å¯¹çš„Entityå’ŒComponent,æˆ–ææ¸…æ¥šå®ƒä»¬åº”è¯¥å¦‚ä½•ç›¸äº’å½±å“.ä¸€ä¸ªç»™å®šçš„ä»»åŠ¡ä¸­ä¼šæœ‰æ— ç©·ç§Entityå’ŒComponentçš„ç»„åˆæ–¹å¼. ä¸€ä¸ªæ‘†è„±æ··ä¹±çš„é€”å¾„æ˜¯åœ¨Entity-Componentä¹‹ä¸Šæ·»åŠ ä¸€äº›çš„é¢å¤–çš„å‚è€ƒ.æ¯”å¦‚,æˆ‘å–œæ¬¢çš„ä¸€ç§è€ƒè™‘è½¯ä»¶çš„æ–¹å¼æ˜¯å°†å…¶å·®åˆ†æˆä¸‰ç§ä¸åŒçš„ç±»åˆ«: ä¸€äº›å¤„ç†åŸæ•°æ®,å…è®¸åˆ›å»º,è¯»å–,æ›´æ–°,åˆ é™¤å’ŒæŸ¥æ‰¾(ä¹Ÿå°±æ˜¯CRUD) å¦ä¸€äº›å®ç°ä¸€äº›æ¥å£æ¥å’Œå…¶ä»–å…ƒç´ ç›¸äº’ä½œç”¨,æ£€æµ‹ä»–ä»¬èŒƒå›´å†…ç›¸å…³çš„äº‹ä»¶å¹¶ä¸”å½“å‘ç”Ÿæ—¶è§¦å‘é€šçŸ¥ æœ€å,ä¸€äº›å…ƒç´ è´Ÿè´£æ¥æ”¶è¿™äº›é€šçŸ¥,åˆ¶å®šäº‹åŠ¡é€»è¾‘å†³ç­–,å¹¶å†³å®šå¦‚ä½•æ“ä½œæ•°æ® å¹¸è¿çš„æ˜¯,æˆ‘ä»¬å·²ç»æœ‰è¡¨ç°å¾—ç¬¦åˆè¿™äº›éœ€æ±‚çš„è®¾è®¡æ¨¡å¼äº†. Â§ Model-View-Controller(MVC)æ¨¡å¼ Model-View-Controller pattern(MVC)æ¨¡å¼å°†è½¯ä»¶åˆ†æˆä¸‰ä¸ªä¸»è¦æ¨¡å—:Models (æ•°æ®CRUD), Views (ç•Œé¢/äº‹ä»¶æ£€æµ‹)å’ŒControllers (å†³ç­–/å¤„ç†).MVCå®ç°èµ·æ¥è¶³å¤Ÿçµæ´»,å³ä½¿æ˜¯å»ºç«‹åœ¨ECSæˆ–OOPä¹‹ä¸Š. æ¸¸æˆå’ŒUIçš„å¼€å‘æœ‰é€šå¸¸çš„å·¥ä½œæµç¨‹: ç­‰å¾…ç”¨æˆ·è¾“å…¥,æˆ–å…¶ä»–çš„è§¦å‘æ¡ä»¶,å‘åˆé€‚çš„åœ°æ–¹å‘é€è¿™äº›é€šçŸ¥,å†³å®šå¦‚ä½•å“åº”,å¹¶åšå‡ºç›¸åº”çš„æ•°æ®æ“ä½œ.è¿™äº›è¡Œä¸ºæ¸…æ¥šåœ°è¡¨ç°äº†MVCåº”ç”¨çš„å…¼å®¹æ€§. è¿™ç§æ–¹æ³•è®ºå¼•å…¥äº†å…¶ä»–çš„æŠ½è±¡å±‚,ä¼šå¯¹è½¯ä»¶è§„åˆ’æœ‰å¸®åŠ©,å¹¶ä¸”è®©æ–°æ¥çš„ç¨‹åºçŒ¿èƒ½æŒæ§ä¸€ä¸ªå°±ç®—å¾ˆå¤§çš„ä»£ç åº“.é€šè¿‡å°†æ€è€ƒè¿‡ç¨‹åˆ†ç¦»æˆæ•°æ®,æ¥å£å’Œå†³ç­–,å¯ä»¥å‡å°‘å¼€å‘è€…å¿…é¡»é€šè¿‡æŸ¥æ‰¾æ¥æ·»åŠ æˆ–ä¿®æ”¹åŠŸèƒ½çš„æºæ–‡ä»¶. Â§ Unityå’ŒEC è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹unityé¢„å…ˆç»™æˆ‘ä»¬äº†ä»€ä¹ˆ. Unityæ˜¯ä¸€ä¸ªå»ºç«‹åœ¨ECä¸Šçš„å¼€å‘å¹³å°,æ‰€æœ‰çš„Entityéƒ½æ˜¯GameObjectçš„å®ä¾‹,å®ƒä»¬çš„å±æ€§å¯ä»¥ä½¿ä»–ä»¬&quot;å¯è§&quot;,â€œå¯ç§»åŠ¨â€,â€œå¯äº¤äº’â€,ç­‰ç­‰,éƒ½æ˜¯ç”±ç»§æ‰¿Componentçš„ç±»æä¾›çš„. Unity editorçš„Hierarchyé¢æ¿å’ŒInspectoré¢æ¿æä¾›äº†è£…é…ä½ çš„åº”ç”¨çš„å¼ºå¤§çš„æ–¹æ³•,ç”¨æ¯”é€šå¸¸æƒ…å†µä¸‹æ›´å°‘çš„ä»£ç æ¥é™„åŠ ç»„ä»¶,é…ç½®å®ƒä»¬çš„åˆå§‹åŒ–çŠ¶æ€å’Œå¼•å¯¼ä½ çš„æ¸¸æˆ. å°½ç®¡å¦‚æ­¤,æˆ‘ä»¬è®¨è®ºè¿‡çš„,æˆ‘ä»¬ä¼šé‡åˆ°&quot;å¤ªå¤šå±æ€§&quot;çš„é—®é¢˜å¹¶ä¸”å‘ç°æˆ‘ä»¬èº«å¤„ä¸€ä¸ªåºå¤§çš„å±‚çº§ä¸­,å±æ€§åˆ†æ•£åœ¨å„ä¸ªåœ°æ–¹,ä½¿å¼€å‘è€…æ›´åŠ éš¾ä»¥å­˜æ´». æŒ‰MVCçš„æ–¹å¼æ€è€ƒ,æˆ‘ä»¬å¯ä»¥æŒ‰äº‹ç‰©çš„åŠŸèƒ½å°†å®ƒä»¬åˆ†ç±»,ä½¿æˆ‘ä»¬çš„åº”ç”¨çš„ç»“æ„åƒä¸‹é¢è¿™ä¸ªä¾‹å­è¿™æ ·: Â§ å°†MVCæ‰“é€ è¿›æ¸¸æˆå¼€å‘ç¯å¢ƒ ç°åœ¨æˆ‘è¦ä»‹ç»ä¸¤ç§ç®€å•çš„ ä¸€èˆ¬çš„MVCæ¨¡å¼çš„å˜ç§,å¯ä»¥å°†å…¶æ‰“é€ è¿›æˆ‘æ›¾ç”¨MVCå»ºç«‹Unityé¡¹ç›®æ—¶é‡åˆ°çš„ç‰¹æ®Šçš„æƒ…å†µ: MVCçš„ç±»å®¹æ˜“æ•£å¸ƒåœ¨ä»£ç é‡Œ åœ¨Unityä¸­,å¼€å‘è€…é€šå¸¸å¿…é¡»æ‹–æ‹½å¯¹è±¡æ¥è·å–å®ƒä»¬,æˆ–è€…ä½¿ç”¨ç±»ä¼¼GetComponent( â€¦ )çš„ç¬¨é‡çš„æŸ¥æ‰¾è¯­å¥æ¥è·å–å¯¹è±¡ å¦‚æœUnityå´©æºƒäº†æˆ–è€…ä¸€äº›bugä½¿æ‰€æœ‰çš„æ‹–æ‹½æ¥çš„å¼•ç”¨ä¸¢å¤±äº†,ä¼šä½¿è¯¥æ­»çš„å¼•ç”¨ä¸¢å¤±æ¥è¿å‘ç”Ÿ. å¿…é¡»ä½¿ç”¨ä¸€ä¸ªç‹¬ç‰¹çš„æ ¹å¼•ç”¨å¯¹è±¡,é€šè¿‡å®ƒæ¥ä½¿Applicationä¸­çš„æ‰€æœ‰å¯¹è±¡å¯è·å–å’Œé‡æ–°è·å¾—. ä¸€äº›å…ƒç´ å°è£…äº†ä¸€äº› ä¸€èˆ¬çš„,éœ€è¦é«˜åº¦é‡ç”¨çš„,ä¸èƒ½è‡ªç„¶åœ°åˆ†ç±»åˆ°Model,Viewæˆ–Controllerä¸­çš„åŠŸèƒ½.æˆ‘ç®€å•åœ°å«å®ƒä»¬ç»„ä»¶.å®ƒä»¬ä¹Ÿæ˜¯Entity-Componentä¸­çš„&quot;Components&quot;çš„æ¦‚å¿µ.ä½†æ˜¯åœ¨MVCæ¡†æ¶ä¸­ä»…ä»…ä½œä¸ºè¾…åŠ©è€…. ä¾‹å¦‚,ä¸€ä¸ªRotatorç»„ä»¶,åªä¼šæŒ‰ç…§è§’é€Ÿåº¦æ—‹è½¬ç‰©ä½“,ä½†ä¸ä¼šé€šçŸ¥,å­˜å‚¨,æˆ–å†³å®šä»»ä½•äº‹. ä¸ºäº†å¸®åŠ©ç¼“è§£ä¸¤ç§é—®é¢˜,æˆ‘æå‡ºäº†ä¸€ç§é­”æ”¹çš„è®¾è®¡æ¨¡å¼,æˆ‘å«å®ƒAMVCC,æˆ–Application-Model-View-Controller-Component. Application ä½ çš„åº”ç”¨çš„å•ç‹¬çš„å…¥å£,æ˜¯æ‰€æœ‰å†³å®šæ€§çš„å®ä¾‹å’Œä¾èµ–åº”ç”¨çš„æ•°æ®çš„å®¹å™¨ MVC åˆ°ç›®å‰ä¸ºæ­¢ä½ åº”è¯¥çŸ¥é“çš„. ğŸ˜ƒ Component å¯å¤ç”¨çš„,å°çš„,å®¹æ˜“è¢«åŒ…å«çš„è„šæœ¬ Â§ ä¾‹å­: 10 Bounces ä½œä¸ºä¸€ä¸ªç®€å•çš„ä¾‹å­,è®©æˆ‘ä»¬æ¥çœ‹ä¸‹ä¸€ä¸ªç®€å•çš„å«10 Bouncesçš„æ¸¸æˆ,åœ¨æ­¤æˆ‘ä¼šä½¿ç”¨AMVCCæ¨¡å¼çš„æ ¸å¿ƒè¦ç´  è¿™ä¸ªæ¸¸æˆçš„ç»“æ„å¾ˆç®€å•: ä¸€ä¸ªå¸¦æœ‰ä¸€ä¸ªSphereColliderå’Œä¸€ä¸ªRigidbodyçš„Ball(å°†ä¼šåœ¨&quot;Play&quot;ä¹‹åå¼€å§‹ä¸‹è½),ä¸€ä¸ªå½“åšåœ°é¢çš„Cubeå’Œ5ä¸ªæ­å»ºAMVCCçš„è„šæœ¬. Â§ Hierarchy åœ¨å†™ä»£ç ä¹‹å‰,æˆ‘é€šå¸¸ä¼šä»hierarchyå¼€å§‹å¹¶åˆ›å»ºæˆ‘çš„ç±»å’Œç‰©ä»¶çš„å¤§çº².é€šå¸¸éµå®ˆè¿™ä¸ªæ–°çš„AMVCCé£æ ¼. æˆ‘ä»¬å¯ä»¥çœ‹åˆ°,view GameObjectåŒ…å«äº†æ‰€æœ‰çš„å¯è§çš„å…ƒç´ ,å’Œå…¶ä»–çš„åŒ…å«äº†View è„šæœ¬çš„ç‰©ä»¶(???). modelå’Œcontrollerç»„ä»¶åœ¨ä¸€äº›å°é¡¹ç›®ä¸­é€šå¸¸åªåŒ…å«ä»–ä»¬å„è‡ªçš„è„šæœ¬.åœ¨å¤§é¡¹ç›®ä¸­,ä»–ä»¬ä¼šåŒ…å« åŒ…å«äº†å„è‡ªçš„è„šæœ¬çš„GameObjects. å½“å…¶ä»–äººæ‹¿åˆ°ä½ çš„é¡¹ç›®å¸Œæœ›çœ‹åˆ°: æ•°æ®: æŸ¥çœ‹application &gt; model &gt; â€¦ é€»è¾‘/å·¥ä½œæµç¨‹: æŸ¥çœ‹application &gt; controller &gt; â€¦ æ¸²æŸ“/æ¥å£/ç›‘å¬å™¨: æŸ¥çœ‹application &gt; view &gt; â€¦ å¦‚æœæ‰€æœ‰çš„å›¢é˜Ÿéƒ½éµä»è¿™äº›ç®€å•çš„è§„åˆ™,ä¼ ç»Ÿé¡¹ç›®å°†ä¸å†æˆä¸ºé—®é¢˜(æˆ‘è°”è°”) éœ€è¦æ³¨æ„çš„æ˜¯,Componentæ²¡æœ‰å›ºå®šçš„å®¹å™¨,å®ƒä»¬éå¸¸çµæ´»,å¯ä»¥åœ¨å¼€å‘è€…ç©ºé—²çš„æ—¶å€™é™„åŠ åˆ°ä¸åŒçš„å…ƒç´ ä¸Š. Â§ å†™è„šæœ¬ æ³¨æ„:ä¸‹é¢çš„è„šæœ¬éƒ½æ˜¯çœŸå®ä¸–ç•Œçš„å®ç°çš„æŠ½è±¡ç‰ˆæœ¬.ä¸€ä¸ªè¯¦ç»†çš„å®ç°å¯¹æ¸²æŸ“ä¸å¤ªå¥½.ç„¶è€Œ,å¦‚æœä½ æƒ³æµè§ˆæ›´å¤š,ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹æˆ‘çš„ä¸ªäººçš„Unity MVCæ¡†æ¶,Unity MVC.ä½ å¯ä»¥æ‰¾åˆ°å¤§å¤šæ•°åº”ç”¨éœ€è¦çš„å®ç°AMVCCç»“æ„æ¡†æ¶éœ€è¦çš„æ ¸å¿ƒclass. è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ„æˆ10 Bouncesçš„è„šæœ¬çš„ç»“æ„. åœ¨å¼€å§‹ä¹‹å‰,å› ä¸ºå’Œå¸¸è§çš„Unityçš„å·¥ä½œæµç¨‹ä¸åŒ,è®©æˆ‘ä»¬å…ˆç®€ç•¥åœ°é˜æ˜è„šæœ¬å’ŒGameObjectsæ˜¯å¦‚ä½•å…±åŒå·¥ä½œçš„.åœ¨Unityä¸­,â€œç»„ä»¶â€,åœ¨Entity-Componentçš„æ¦‚å¿µä¸­,ç”±MonoBehaviourç±»è¡¨ç°.ä¸€ä¸ªç»„ä»¶è¦åœ¨è¿è¡Œæ—¶å­˜åœ¨,å¼€å‘è€…éœ€è¦å°†å…¶æ‹–æ‹½å…¥ä¸€ä¸ªGameObject(åœ¨Entity-Componentæ¨¡å¼ä¸­çš„&quot;Entity&quot;)æˆ–è€…ç”¨AddComponent()å‘½ä»¤.åœ¨æ­¤ä¹‹å,è„šæœ¬å°±ä¼šè¢«å®ä¾‹åŒ–å¹¶ä¸”å‡†å¤‡å¥½åœ¨æ‰§è¡Œæ—¶ä½¿ç”¨. é¦–å…ˆ,æˆ‘ä»¬å®šä¹‰Applicationç±»(AMVCCä¸­çš„&quot;A&quot;),ä½œä¸ºä¸»è¦çš„ç±»,åŒ…å«æ‰€æœ‰å®ä¾‹åŒ–çš„æ¸¸æˆå…ƒç´ çš„å¼•ç”¨.æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªè¾…åŠ©çš„åŸºç±»å«Element,è®©æˆ‘ä»¬èƒ½æ‹¿åˆ°Applicationå®ä¾‹å’Œä»–çš„å­å…ƒç´ çš„MVCå®ä¾‹.(å­å…ƒç´ çš„MVCå®ä¾‹æ˜¯ä»€ä¹ˆé¬¼å•Šæ™•äº†æ™•äº†) è€ƒè™‘åˆ°è¿™ä¸€ç‚¹,è®©æˆ‘ä»¬å¼€å§‹å®šä¹‰Applicationç±»(AMVCCä¸­çš„&quot;A&quot;),å°†è¦åŒ…å«ä¸€ä¸ªç‹¬ç‰¹çš„å®ä¾‹.åœ¨å®ƒé‡Œé¢,ä¸‰ä¸ªå˜é‡model,view,å’Œcontroller,å°†åœ¨è¿è¡Œæ—¶ç»™æˆ‘ä¹ˆæä¾›æ‰€æœ‰çš„MVCå®ä¾‹çš„æ¥å…¥ç‚¹.è¿™äº›å˜é‡éœ€è¦æ˜¯åŒ…å« æƒ³è¦çš„è„šæœ¬çš„publicå¼•ç”¨çš„MonoBehaviour. ä¹‹å,æˆ‘ä»¬ä¹Ÿè¦åˆ›å»ºä¸€ä¸ªè¾…åŠ©åŸºç±»å«åšElement,æ¥ç»™æˆ‘ä»¬æä¾›Applicationçš„å®ä¾‹. æ³¨æ„è¿™ä¸¤ä¸ªç±»éƒ½è¦ç»§æ‰¿MonoBehaviour,ä»–ä»¬æ˜¯å°†è¦è¢«é™„åŠ åˆ°GameObject â€œEntities&quot;ä¸Šçš„&quot;ç»„ä»¶â€. 1234567891011121314151617181920// BounceApplication.cs// æ‰€æœ‰å…ƒç´ çš„åŸºç¡€ç±»éƒ½åœ¨è¿™ä¸ªåº”ç”¨ä¸­public class BounceElement : MonoBehaviour&#123; // åº”ç”¨å’Œæ‰€æœ‰å®ä¾‹çš„å…¥å£. public BounceApplication app &#123; get &#123; return GameObject.FindObjectOfType&lt;BounceApplication&gt;(); &#125;&#125;&#125;// 10 Bounces å…¥å£.public class BounceApplication : MonoBehaviour&#123; // MVCæ ¹å®ä¾‹çš„å¼•ç”¨. public BounceModel model; public BounceView view; public BounceController controller; // Init things here void Start() &#123; &#125;&#125; æˆ‘ä»¬å¯ä»¥åœ¨BounceElementä¸­åˆ›å»ºMVCçš„æ ¸å¿ƒç±»,BounceModel,BounceViewå’ŒBounceControlleré€šå¸¸ä¼šæ˜¯æ›´å¤šä¸“é—¨çš„å®ä¾‹çš„å®¹å™¨,ä¸è¿‡æˆ‘ä»¬è¿™ä¸ªä¾‹å­æ¯”è¾ƒç®€å•,æ‰€ä»¥åªæœ‰Viewæœ‰åµŒå¥—ç»“æ„.Modelå’ŒControllerå¯ä»¥å„è‡ªç”¨ä¸€ä¸ªè„šæœ¬æ¥å®Œæˆ: 123456789// BounceModel.cs// åŒ…å«è¿™ä¸ªåº”ç”¨çš„æ‰€æœ‰ç›¸å…³æ•°æ®.public class BounceModel : BounceElement&#123; // æ•°æ® public int bounces; public int winCondition;&#125; 12345678// BounceView .cs// åŒ…å«è¿™ä¸ªåº”ç”¨çš„æ‰€æœ‰ç›¸å…³è§†å›¾.public class BounceView : BounceElement&#123; // ballçš„å¼•ç”¨ public BallView ball;&#125; 123456789// BallView.cs// è®°å½•Ballçš„è§†å›¾å’Œå±æ€§.public class BallView : BounceElement&#123; // åªæœ‰è¿™ä¸ªæ˜¯å¿…é¡»çš„.ç‰©ç†éƒ¨åˆ†åœ¨å·¥ä½œçš„å…¶ä»–éƒ¨åˆ†å®ç°. // ç¢°æ’ä½“çš„å›è°ƒå‡½æ•°. void OnCollisionEnter() &#123; app.controller.OnBallGroundHit(); &#125;&#125; 123456789101112131415161718192021// BounceController.cs// æ§åˆ¶åº”ç”¨å·¥ä½œæµç¨‹.public class BounceController : BounceElement&#123; // å¤„ç†Ballçš„ç¢°æ’äº‹ä»¶ public void OnBallGroundHit() &#123; app.model.bounces++; Debug.Log("Bounce "+app.model.bounces); if(app.model.bounces &gt;= app.model.winCondition) &#123; app.view.ball.enabled = false; app.view.ball.GetComponent&lt;Rigidbody&gt;().isKinematic=true; // ä½¿ballåœä¸‹ OnGameComplete(); &#125; &#125; // å¤„ç†èƒœåˆ©çš„æƒ…å†µ public void OnGameComplete() &#123; Debug.Log("Victory!!"); &#125;&#125; åˆ›å»ºå¥½äº†æ‰€æœ‰çš„è„šæœ¬ä¹‹å,æˆ‘ä»¬ç»§ç»­é…ç½®å’Œé™„åŠ å®ƒä»¬. å±‚çº§å¸ƒå±€ä¼šç±»ä¼¼è¿™æ ·: 1234567- application [BounceApplication] - model [BounceModel] - controller [BounceController] - view [BounceView] - ... - ball [BallView] - ... æ‹¿BounceModelåšä¾‹å­,æˆ‘ä»¬çœ‹ä¸‹å®ƒåœ¨Unityé‡Œæ˜¯ä»€ä¹ˆæ ·å­çš„: æ‰€æœ‰çš„è„šæœ¬éƒ½è®¾å®šå¥½å¹¶ä¸”è¿è¡Œä¹‹å,æˆ‘ä»¬ä¼šåœ¨Console Panelä¸­çœ‹åˆ°è¿™æ ·çš„è¾“å‡º: (åˆ«å¿˜è®°ç»™ballæ·»åŠ Rigidbodyå’Œç»™ballå’Œgroundæ·»åŠ ç¢°æ’ä½“) Â§ é€šçŸ¥ å°±åƒä¸Šé¢è¿™ä¸ªä¾‹å­,ä¸€ä¸ªçƒç¢°åˆ°åœ°æ¿çš„æ—¶å€™ä¼šæ‰§è¡Œapp.controller.OnBallGroundHit()å‡½æ•°.æ— è®ºå¦‚ä½•,åœ¨åº”ç”¨ä¸­çš„æ‰€æœ‰é€šçŸ¥éƒ½ç”¨è¿™ç§æ–¹æ³•å¹¶ä¸æ˜¯&quot;é”™è¯¯&quot;çš„,ä½†æ˜¯,ä»¥æˆ‘çš„ç»éªŒ,åœ¨AMVCCçš„Applicationç±»ä¸­ç”¨ä¸€ä¸ªç®€å•çš„é€šçŸ¥ç³»ç»Ÿèƒ½å¾—åˆ°æ›´å¥½çš„ç»“æœ. è®©æˆ‘ä»¬ä¿®æ”¹BounceApplicationç»“æ„æ¥å®ç°: 123456789101112131415161718// BounceApplication.csclass BounceApplication &#123; // éå†æ‰€æœ‰Controllerå¹¶ä½œä¸ºé€šçŸ¥æ•°æ®çš„ä»£è¡¨ // è¿™ä¸ªæ–¹æ³•å¾ˆå®¹æ˜“æ‰¾åˆ°,å› ä¸ºæ¯ä¸ªç±»éƒ½æ˜¯"BounceElement",éƒ½æœ‰ä¸€ä¸ª"app"å®ä¾‹ public void Notify(string p_event_path, Object p_target, params object[] p_data) &#123; BounceController[] controller_list = GetAllControllers(); foreach(BounceController c in controller_list) &#123; c.OnNotification(p_event_path,p_target,p_data); &#125; &#125; // Fetches all scene Controllers. public BounceController[] GetAllControllers() &#123; /* ... */ &#125;&#125; ç„¶å,æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„è„šæœ¬è®©æ‰€æœ‰å¼€å‘è€…æ·»åŠ é€šçŸ¥çš„äº‹ä»¶å,è¿™äº›äº‹ä»¶ä¼šåœ¨è¿è¡Œæ—¶è¿›è¡Œè°ƒåº¦. 123456789101112// BounceNotifications.cs// è¿™ä¸ªç±»å°†æ‰€æœ‰çš„äº‹ä»¶åå®šä¹‰ä¸ºstatic.class BounceNotification&#123; public const string BallHitGround = "ball.hit.ground"; public const string GameComplete = "game.complete"; /* ... */ public const string GameStart = "game.start"; public const string SceneLoad = "scene.load"; /* ... */&#125; (ä¸Šé¢ä»£ç å—ä¸­çš„&quot;const&quot;åŸæ–‡ä¸­çš†ä¸ºstatic,æŒ‰åŸæ–‡å†™ç¼–è¯‘å‡ºé”™) æ˜¾è€Œæ˜“è§,é€šè¿‡è¿™ç§æ–¹å¼,ç¨‹åºçš„å¯è¯»æ€§å¢åŠ äº†,å› ä¸ºå¼€å‘è€…ä¸éœ€è¦åœ¨æ‰€æœ‰çš„æºç ä¸­æ‰¾controller.OnSomethingComplexNameæ–¹æ³•æ¥ç†è§£è¿è¡Œæ—¶ä¼šäº§ç”Ÿä»€ä¹ˆæ ·çš„è¡Œä¸º.åªéœ€æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶,å°±å¯ä»¥ç†è§£è¿™ä¸ªåº”ç”¨çš„æ‰€æœ‰è¡Œä¸º. ç°åœ¨,æˆ‘ä»¬åªéœ€è¦æ”¹å˜BallViewå’ŒBounceControlleræ¥é€‚åº”è¿™ç§æ–°ç³»ç»Ÿ: 123456789// BallView.cs// è®°å½•Ballçš„è§†å›¾å’Œå±æ€§.public class BallView : BounceElement&#123; // åªæœ‰è¿™ä¸ªæ˜¯å¿…é¡»çš„.ç‰©ç†éƒ¨åˆ†åœ¨å·¥ä½œçš„å…¶ä»–éƒ¨åˆ†å®ç°. // ç¢°æ’ä½“çš„å›è°ƒå‡½æ•°. void OnCollisionEnter() &#123; app.Notify(BounceNotification.BallHitGround,this); &#125;&#125; 12345678910111213141516171819202122232425262728// BounceController.cs// æ§åˆ¶åº”ç”¨å·¥ä½œæµç¨‹.public class BounceController : BounceElement&#123; // å¤„ç†Ballçš„ç¢°æ’äº‹ä»¶ public void OnNotification(string p_event_path,Object p_target,params object[] p_data) &#123; switch(p_event_path) &#123; case BounceNotification.BallHitGround: app.model.bounces++; Debug.Log("Bounce " + app.model.bounces); if(app.model.bounces &gt;= app.model.winCondition) &#123; app.view.ball.enabled = false; app.view.ball.GetComponent&lt;RigidBody&gt;().isKinematic=true; // ä½¿ballåœä¸‹ // é€šçŸ¥è‡ªèº«,è¯´ä¸å®šæœ‰å…¶ä»–å…¶ä»–controllerå“åº” app.Notify(BounceNotification.GameComplete,this); &#125; break; case BounceNotification.GameComplete: Debug.Log("Victory!!"); break; &#125; &#125;&#125; å¤§é¡¹ç›®å°†ä¼šç”±å¾ˆå¤šé€šçŸ¥.æ‰€ä»¥ä¸ºäº†é¿å…ä¸€ä¸ªåºå¤§çš„switch-caseç»“æ„,å¯ä»¥åˆ›å»ºä¸åŒçš„controlleræ¥å¤„ç†ä¸åŒèŒƒå›´çš„æ¶ˆæ¯. Â§ å®é™…é¡¹ç›®ä¸­çš„AMVCC ä¸Šé¢çš„ä¾‹å­å±•ç¤ºäº†ä¸€ä¸ªAMVCCæ¨¡å¼çš„åº”ç”¨åœºåˆ.ä¸ºäº†ä½¿ä½ çš„æ€ç»´æ–¹å¼èƒ½ç¬¦åˆMVCçš„ä¸‰ä¸ªå…ƒç´ ,è€Œä¸”æŒ‰ä¸€ä¸ªæœ‰åºçš„å±‚çº§å±•ç¤ºentityåº”è¯¥æ˜ç¡®è¿™ç§æŠ€èƒ½. åœ¨å¤§é¡¹ç›®ä¸­,å¼€å‘è€…éœ€è¦é¢å¯¹æ›´å¤šçš„å¤æ‚çš„åœºæ™¯,å¹¶ä¸”ä¸å¥½çš„å†³å®šä¸€äº›äº‹ç‰©æ˜¯è¯¥æ”¾åˆ°Viewå±‚è¿˜æ˜¯Controllerå±‚,æˆ–è€…é‡åˆ°ä¸€ä¸ªç»™å®šçš„classéœ€è¦æ›´åŠ å½»åº•åœ°åˆ†æ•£åˆ°æ›´å°çš„æ¨¡å—. Â§ ç¿»é˜…çš„è§„åˆ™ (by Eduardo) å¹¶ä¸å­˜åœ¨ä»€ä¹ˆ&quot;æ™®éçš„MVCæ•´ç†è§„åˆ™&quot;.ä½†æ˜¯æœ‰ä¸€äº›ç®€å•çš„è§„åˆ™,æˆ‘éµå®ˆå®ƒä»¬æ¥å¸®æˆ‘å†³å®šä¸€äº›äº‹ç‰©æ˜¯Model,View,Controller,è¿˜æ˜¯éœ€è¦åˆ†è§£æˆæ›´å°çš„æ¨¡å—. Â§ Classçš„åˆ†ç±» Â§ Model åŒ…å«ä¸€ä¸ªåº”ç”¨çš„æ ¸å¿ƒæ•°æ®æˆ–çŠ¶æ€,æ¯”å¦‚playerçš„health,æˆ–æ˜¯æªçš„ammo(å¼¹è¯) åºåˆ—åŒ–çš„,å¹¶è¡Œçš„,å’Œ/æˆ–è¿™ä¸¤ç§çš„å˜ç§ åŠ è½½/ä¿å­˜æ•°æ®(æœ¬åœ°æˆ–è€…ç½‘ç»œ) åœ¨è¿è¡Œä¸­é€šçŸ¥Controller ä¸ºæ¸¸æˆçš„æœ‰é™çŠ¶æ€æœºä¿å­˜æ¸¸æˆçŠ¶æ€ ä¸ä¼šæ¥è§¦åˆ°Views Â§ View ä»Modelå±‚ä¸­è·å–æ•°æ®æ¥ä¸ºç”¨æˆ·å±•ç¤ºå®æ—¶çš„æ¸¸æˆçŠ¶æ€.æ¯”å¦‚,ä¸€ä¸ªViewå±‚çš„æ–¹æ³•player.Run()ä¼šåœ¨å†…éƒ¨è°ƒç”¨model.speedæ˜¾ç¤ºplayerçš„è¡Œä¸º ä¸ä¼šæ”¹åŠ¨Modelå±‚ ä¸¥æ ¼çš„å®ç°è‡ªèº«ç±»çš„åŠŸèƒ½.æ¯”å¦‚: ä¸€ä¸ªPlayerViewä¸åº”è¯¥å®ç°è¾“å…¥æ£€æµ‹æˆ–æ›´æ”¹æ¸¸æˆçŠ¶æ€ ä¸€ä¸ªViewåº”è¯¥è¡¨ç°å¾—åƒæ˜¯æœ‰é€šçŸ¥é‡è¦äº‹ä»¶çš„æ¥å£çš„é»‘ç›’å­ ä¸å­˜å‚¨æ ¸å¿ƒæ•°æ®(æ¯”å¦‚é€Ÿåº¦,è¡€é‡,â€¦) Â§ Controller ä¸å­˜å‚¨æ ¸å¿ƒæ•°æ® ä¼šè¿‡æ»¤æ‰ ä¸å¸Œæœ›æœ‰çš„View å‘æ¥çš„é€šçŸ¥ æ›´æ–°å’Œä½¿ç”¨Modelçš„æ•°æ® ç®¡ç†Unityçš„åœºæ™¯çš„å·¥ä½œæµ Â§ Classçš„å±‚çº§ æ—¢ç„¶è¿™æ ·,æˆ‘ä¸éœ€è¦éµå®ˆå¤ªå¤šçš„æ­¥éª¤.é€šå¸¸,å½“æˆ‘éœ€è¦ç»™å˜é‡ååŠ å¤ªå¤šçš„&quot;å‰ç¼€&quot;æ—¶,æˆ‘å°±ä¼šæ„è¯†åˆ°éœ€è¦æŠŠç±»åˆ†è§£,æˆ–åŒä¸ªå…ƒç´ æœ‰å¤ªå¤šçš„å˜ç§(å¦‚MMOæ¸¸æˆä¸­çš„Playerç±»æˆ–FPSæ¸¸æˆä¸­çš„Gunç±»). æ¯”å¦‚,ä¸€ä¸ªå•ä¸ªçš„åŒ…å«äº†Playeræ•°æ®çš„Modelä¼šæœ‰å¾ˆå¤šplayerDataA, playerDataB,â€¦; ä¸€ä¸ªå¤„ç†Playeré€šçŸ¥çš„Controllerä¼šæœ‰å¾ˆå¤šOnPlayerDidA,OnPlayerDidB,â€¦. æˆ‘ä»¬æƒ³è¦å‡å°ä»£ç ä½“ç§¯å¹¶ä¸”å»æ‰playerå’ŒOnPlayerå‰ç¼€. å› ä¸ºåªç”¨æ•°æ®ç†è§£èµ·æ¥å¾ˆç®€å•,æ‰€ä»¥æˆ‘ä»¬ç”¨ä¸€ä¸ªModelç±»æ¥åšä¾‹å­. åœ¨å†™ä»£ç æ—¶,æˆ‘é€šå¸¸å…ˆç”¨ä¸€ä¸ªå•ä¸ªçš„Modelç±»åŒ…å«æ¸¸æˆä¸­çš„æ‰€æœ‰æ•°æ®. 12345678910111213141516171819// Model.csclass Model&#123; public float playerHealth; public int playerLives; public GameObject playerGunPrefabA; public int playerGunAmmoA; public GameObject playerGunPrefabB; public int playerGunAmmoB; // Ops Gun[C D E ...] will appear... /* ... */ public float gameSpeed; public int gameLevel;&#125; å¾ˆå®¹æ˜“çœ‹å‡º,æ¸¸æˆè¶Šå¤æ‚,å˜é‡æ•°ä¼šæ›´å¤š.å½“å®ƒå¤Ÿå¤æ‚æ—¶,æˆ‘ä»¬å¯èƒ½ä¼šä»¥ä¸€ä¸ªåºå¤§çš„åŒ…å«äº†model.playerABCDFooçš„ç±»æ¥å‘Šç»ˆ.åµŒå¥—çš„å…ƒç´ ä¼šç®€åŒ–ä»£ç å®Œæˆ,å¹¶ä¸”ä½¿æ•°æ®æœ‰å˜ç§çš„ç©ºé—´. 1234567// Model.csclass Model&#123; public PlayerModel player; // Playeræ•°æ®çš„å®¹å™¨ public GameModel game; // Gameæ•°æ®çš„å®¹å™¨&#125; 1234567// GameModel.csclass GameModel&#123; public float speed; // æ¸¸æˆè¿è¡Œé€Ÿåº¦ (å½±å“æ¸¸æˆéš¾åº¦) public int level; // å½“å‰è½½å…¥çš„æ¸¸æˆå…³å¡/é˜¶æ®µ&#125; 12345678// PlayerModel.csclass PlayerModel&#123; public float health; // Player è¡€é‡ (åœ¨0.0 å’Œ 1.0ä¹‹é—´) public int lives; // Player æ­»å"retry"çš„æ¬¡æ•°. public GunModel[] guns; // å½“å‰Playeråœ¨æ¸¸æˆä¸­å¯åˆ‡æ¢çš„æªçš„æ•°ç»„&#125; 123456789// GunModel.csclass GunModel&#123; public GunType type; // åˆ—ä¸¾æªçš„ç±»å‹ public GameObject prefab; // æªçš„3D Assetæ¨¡æ¿ public int ammo; // å½“å‰å­å¼¹æ•° public int clips; // å¯èƒ½çš„å†è£…å¡«å¼¹è¯çš„æ¬¡æ•°&#125; æœ‰äº†è¿™äº›ç±»çš„é…ç½®,å¼€å‘è€…å¯ä»¥åœ¨æŸæ—¶ç›´è§‚åœ°æ“çºµæºç ä¸­çš„ä¸€ä¸ªæ¦‚å¿µ.è®©æˆ‘ä»¬å‡è®¾ä¸€ä¸ªæ­¦å™¨å’Œå®ƒä»¬çš„é…ç½®éå¸¸å¤šçš„FPSæ¸¸æˆ.GunModelå®é™…ä¸Šè¢«åŒ…å«åœ¨ä¸€ä¸ªç±»ä¸­,è¿™ä¸ªç±»ä¹Ÿå¯ä»¥ä»ä¸€ç³»åˆ—Prefabsä¸­ä¸ºå„ä¸ªç§ç±»åˆ›å»ºå®ä¾‹å¹¶å°†å…¶å­˜å‚¨èµ·æ¥æ–¹ä¾¿ä»¥åç”¨åˆ°. ç›¸æ¯”ä¹‹ä¸‹,å¦‚æœæ‰€æœ‰çš„æªçš„ä¿¡æ¯éƒ½åŒ…å«åœ¨ä¸€ä¸ªå•ç‹¬çš„GunModelä¸­,å¦‚gun0Ammo,gun1Ammo,gun0Clipsç­‰ç­‰,ç„¶åå½“ç”¨æˆ·éœ€è¦å­˜å‚¨Gunæ•°æ®çš„æ—¶å€™,å°†è¦éœ€è¦å­˜å‚¨æ•´ä¸ªModel,å³ä¾¿å®ƒè¿˜åŒ…å«äº†ä¸éœ€è¦çš„Playeræ•°æ®.åœ¨è¿™ç§æƒ…å†µä¸‹,å¾ˆæ˜æ˜¾ç”¨ä¸€ä¸ªæ–°çš„GunModelç±»ä¼šæ¯”è¾ƒå¥½. å°±åƒæ‰€æœ‰äº‹ç‰©éƒ½ä¼šæœ‰ä¼˜ç¼ºç‚¹ä¸€æ ·.æœ‰æ—¶äººä¼šä¸å¿…è¦åœ°è¿‡åˆ†åˆ’åˆ†å¹¶ä¸”å¢åŠ ä»£ç å¤æ‚åº¦.åªæœ‰ç»éªŒèƒ½ç£¨ç‚¼ä½ çš„ä¸ºä½ çš„é¡¹ç›®å¯»æ‰¾MVCåˆ†ç±»çš„æŠ€èƒ½. è§£é”æ–°çš„æ¸¸æˆå¼€å‘ç‰¹æ®Šèƒ½åŠ›: åœ¨Unityæ¸¸æˆä¸­ä½¿ç”¨MVCæ¨¡å¼ Â§ ç»“è®º é™¤æ­¤ä¹‹å¤–è¿˜æœ‰å¤§é‡çš„è½¯ä»¶è®¾è®¡æ¨¡å¼.åœ¨è¿™ç¯‡æ–‡ç« ä¸­,æˆ‘å°è¯•ç€å±•ç¤ºäº†åœ¨è¿‡å»çš„é¡¹ç›®ä¸­å¯¹æˆ‘å¸®åŠ©æœ€å¤§çš„ä¸€ä¸ª.å¼€å‘è€…åº”è¯¥ä¸€ç›´åœ¨å¸æ”¶æ–°çš„çŸ¥è¯†çš„åŒæ—¶ä¸€ç›´ä¿æŒæ€€ç–‘.æˆ‘å¸Œæœ›è¿™ç¯‡æ•™ç¨‹èƒ½å¸®åŠ©ä½ å­¦ä¹ æ–°çš„ä¸œè¥¿,å¹¶ä¸æ­¤åŒæ—¶,æˆä¸ºä¸€ä¸ªä½ å½¢æˆè‡ªå·±çš„å¼€å‘é£æ ¼çš„è·³æ¿. åŒæ—¶,æˆ‘çœŸçš„å¸Œæœ›ä½ å»å¤šå¤šæŸ¥æ‰¾å…¶ä»–çš„æ¨¡å¼æ¥æ‰¾åˆ°æœ€é€‚åˆä½ çš„é‚£ä¸ª.ä¸€ä¸ªå¥½çš„å‡ºå‘ç‚¹æ˜¯è¿™ç¯‡wikipediaæ–‡ç« ,é‡Œé¢æœ‰å‡ºè‰²çš„æ¨¡å¼åˆ—è¡¨å’Œä»–ä»¬çš„ç‰¹å¾. å¦‚æœä½ å–œæ¬¢AMVCCæ¨¡å¼å¹¶ä¸”æƒ³è¦å°è¯•å®ƒ,ä¸è¦å¿˜äº†å°è¯•ä¸‹æˆ‘çš„åº“,Unity MVC,è¿™é‡ŒåŒ…å«äº†æ‰€æœ‰çš„,åˆ›å»ºAMVCCåº”ç”¨çš„æ ¸å¿ƒç±». Â§ å…³äºä½œè€… https://www.toptal.com/resume/eduardo-dias-da-costa Â§ å…³äºè¯‘è€… https://blog.ggemo.com/]]></content>
      <tags>
        <tag>unity</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>ç¿»è¯‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[bili_bangumi_style-id]]></title>
    <url>%2Fbili-bangumi-style-id%2F</url>
    <content type="text"><![CDATA[id æè¿° 9 å°‘å¥³ 16 æ—¥å¸¸ 141 èè‰]]></content>
  </entry>
  <entry>
    <title><![CDATA[lua-study]]></title>
    <url>%2Flua-study%2F</url>
    <content type="text"><![CDATA[Â§ Luaè¯­æ³•åŸºç¡€ Â§ Luaä»¤ç‰Œæ ‡è®° Luaç¨‹åºç”±å„ç§æ ‡è®°ç»„æˆ,æ ‡è®°å¯æ˜¯å…³é”®å­—,æ ‡è¯†ç¬¦,å¸¸é‡,å­—ç¬¦ä¸²æˆ–ç¬¦å·. 1io.write("Hello World, from",_VERSION,"\n") Â§ æ³¨é‡Š Luaçš„æ³¨é‡Šä»¥â€”å¼€å¤´ç»“å°¾ 12--- è¿™é‡Œæ˜¯æ³¨é‡Šprint("23333") Â§ Luaå˜é‡ æ ¹æ®å˜é‡èŒƒå›´,Luaå˜é‡æœ‰ä¸‰ç§ç±»å‹: å…¨å±€å˜é‡ æ‰€æœ‰å˜é‡è¢«å£°æ˜ä¸ºå…¨å±€å˜é‡,é™¤éæ˜ç¡®å£°æ˜ä¸ºå±€åŸŸå˜é‡ å±€åŸŸå˜é‡ å½“å˜é‡æŒ‡å®šç±»å‹ä¸ºlocalæ—¶,å…¶å•ä½å—å‡½æ•°èŒƒå›´çš„é™åˆ¶ è¡¨å­—æ®µ è¿™æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å˜é‡,å¯ä»¥ä¿å­˜nilä¹‹å¤–çš„ä»»ä½•å¯¹è±¡ Â§ Luaå˜é‡å£°æ˜å’Œå®šä¹‰ å˜é‡å®šä¹‰å‘Šè¯‰è§£é‡Šå™¨ä¸ºå˜é‡åˆ›å»ºå­˜å‚¨çš„ä½ç½®å’Œæ•°é‡,å˜é‡å…·æœ‰å¯é€‰ç±»å‹,å¹¶ä¸”åŒ…å«è¯¥ç±»å‹ä¸€ä¸ªæ´»å¤šä¸ªå˜é‡çš„åˆ—è¡¨(åæ§½: è¦è·Ÿpythonåˆ—è¡¨å¼„æ··äº†) 1type variable_list è¿™é‡Œ,typeæ˜¯å¯é€‰çš„æœ¬åœ°æˆ–å…¨å±€ç±»å‹.è€Œvariable_listå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªç”±é€—å·åˆ†éš”çš„æ ‡è¯†ç¬¦åç§°. 123local i,jlocal ilocal a,c å˜é‡å¯ä»¥åœ¨å£°æ˜æ—¶åˆå§‹åŒ–: 1234567local a, b = 0, 1c, d = 2, 3e,f = 4print(e,f)--- 4 nil--- æ³¨æ„è¿™é‡Œåªèµ‹ç»™äº†e,æ²¡æœ‰èµ‹ç»™f Luaå¯ä»¥åƒpyé‚£æ ·å¹³è¡Œèµ‹å€¼ 12345a = 0b = 1a, b = b, aprint(a, b)--- 1 0 Â§ Luaæ•°æ®ç±»å‹ Luaæ˜¯ä¸€ç§åŠ¨æ€ç±»å‹è¯­è¨€,å³ å˜é‡æ²¡æœ‰ç±»å‹,åªæœ‰å€¼æœ‰ç±»å‹ æ•°æ®ç±»å‹: å€¼ç±»å‹ æè¿° nil ç”¨äºåŒºåˆ†å€¼ä¸æŸäº›æ•°æ®æˆ–æ²¡æœ‰æ•°æ®(ç±»ä¼¼jsé‡Œçš„nullæˆ–pyé‡Œçš„None?) boolean boolean number è¡¨ç¤ºå®æ•°(åŒç²¾åº¦æµ®ç‚¹)æ•°å­— string è¡¨ç¤ºå­—ç¬¦æ•°ç»„ function è¡¨ç¤ºç”¨Cè¯­è¨€æˆ–Luaç¼–å†™çš„æ–¹æ³• userdata è¡¨ç¤ºä»»æ„Cè¯­è¨€æ•°æ® thread è¡¨ç¤ºç‹¬ç«‹çš„æ‰§è¡Œçº¿ç¨‹,ç”¨äºå®ç°ååŒç¨‹åº table è¡¨ç¤ºæ™®é€šæ•°ç»„,ç¬¦å·è¡¨,é›†åˆ,è®°å½•,å›¾å½¢,æ ‘ç­‰,å¹¶å®ç°å…³è”æ•°ç»„.å®ƒå¯ä»¥ä¿å­˜ä»»ä½•nilä»¥å¤–çš„å€¼ Â§ typeå‡½æ•° 12print(type(0))---number é»˜è®¤æƒ…å†µä¸‹,åœ¨åˆ†é…å€¼æˆ–åˆå§‹åŒ–ä¹‹å‰,æ‰€æœ‰å˜é‡éƒ½æŒ‡å‘nil. Â§ Luaå­—ç¬¦ä¸² Luaå­—ç¬¦ä¸²å¯ä»¥ç”¨ä¸‰ç§å½¢å¼åˆå§‹åŒ– å•å¼•å·ä¹‹é—´çš„å­—ç¬¦ä¸² 1'lua' åŒå¼•å·ä¹‹é—´çš„å­—ç¬¦ä¸² 1"lua" [[å’Œ]]ä¹‹é—´çš„å­—ç¬¦ä¸² 12[[lua hhhhhhhhaaaaaaa]] [[å’Œ]]ä¹‹é—´çš„å­—ç¬¦ä¸²å¯ä»¥æ¢è¡Œ,ç±»ä¼¼pyçš„ä¸‰ä¸ªå¼•å·çš„å­—ç¬¦ä¸² Â§ å­—ç¬¦ä¸²æ“ä½œ æ–¹æ³• ä½œç”¨ string.upper(â€œSome Stringâ€) è¿”å›å‚æ•°çš„å¤§å†™è¡¨ç¤º string.lower(â€œSome Stringâ€) è¿”å›å‚æ•°çš„å°å†™è¡¨ç¤º string.gsub(â€œSome Stringâ€, â€œSâ€, â€œå•Šâ€) ç±»ä¼¼pyçš„replace string.find(â€œSome Stringâ€, â€œSâ€) è¿”å›mainSträ¸­,findStrçš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®.æˆ‘ä½›è¾£,è¿™ä¸ªluaæ€ä¹ˆç´¢å¼•éƒ½æ˜¯ä»1å¼€å§‹çš„ string.reverse(â€œSome Stringâ€) è¿”å›å‚æ•°çš„å€’åºå­—ç¬¦ä¸² string.format(â€œSome String %d %sâ€,12,â€œcccâ€) æ ¼å¼åŒ–å­—ç¬¦ä¸² string.char(â€œSome Stringâ€)å’Œstring.byte(â€œSome Stringâ€) ä¸è§£é‡Š string.len(â€œSome Stringâ€) è¿”å›é•¿åº¦ntmä¸æ˜¯æœ‰#è¿ç®—ç¬¦äº†ä¹ˆ??? string.rep(â€œSome Stringâ€,2) è¿”å›å‚æ•°å­—ç¬¦ä¸²é‡å¤næ¬¡åçš„ç»“æœ â€¦ â€¦è¿ç®—é“¾æ¥ä¸¤ä¸ªå­—ç¬¦ä¸² Â§ Luaæ•°ç»„ 1234567array = &#123;"a", "b"&#125;print(array[0])--- nilprint(array[1])--- aprint(array[2])--- b Luaæ•°ç»„çš„ç´¢å¼•æ˜¯ä»1å¼€å§‹çš„â€¦ Luaæ•°ç»„æ¥å—è´Ÿæ•°å’Œ0ç´¢å¼• 1234array = &#123;&#125;array[-1] = 10print(array[-1])--- 10 Â§ Luaè¿ç®—ç¬¦ Â§ ç®—æœ¯è¿ç®—ç¬¦ ä»¥ä¸‹æ˜¯Luaè¯­è¨€æ”¯æŒçš„æ‰€æœ‰ç®—æœ¯è¿ç®—ç¬¦.å‡è®¾å˜é‡A=10, B=20 è¿ç®—ç¬¦ æè¿° ç¤ºä¾‹ + ä¸¤ç›¸åŠ æ“ä½œæ•° A + B : 30 - ç¬¬ä¸€ä¸ªå‡å»ç¬¬äºŒä¸ªæ“ä½œæ•° A - B : -10 * å°†ä¸¤ä¸ªæ“ä½œæ•°ç›¸ä¹˜ A * B : 200 / ç¬¬ä¸€ä¸ªæ“ä½œæ•°é™¤ä»¥ç¬¬äºŒä¸ªæ“ä½œæ•° A / B : 2 % æ¨¡æ•°è¿ç®—ç¬¦,å»æ•´é™¤åçš„ä½™æ•° B % A : 0 ^ æŒ‡æ•°è¿ç®—ç¬¦,å–æŒ‡æ•°å¹‚å€¼ A ^ 2 : 100 - ä¸€å…ƒè¿ç®—ç¬¦,å……å½“å¦å®š -A : -10 Â§ å…³ç³»è¿ç®—ç¬¦ å…³ç³»è¿ç®—ç¬¦ ==, &gt;, &lt;, &gt;=, &lt;=ç­‰,è·Ÿå…¶ä»–è¯­è¨€å·®ä¸å¤š. æ³¨æ„ä¸ç­‰äºæ˜¯~=,è€Œé!= Â§ é€»è¾‘è¿ç®—ç¬¦ and, or, not,å’Œpythonç”¨èµ·æ¥å·®ä¸å¤š,åªæ˜¯luaçš„notåªèƒ½ç”¨äºå¤„ç†å¸ƒå°”å€¼,æ²¡æœ‰åƒpythoné‚£æ ·çš„a not == b,åªèƒ½not a == b Â§ æ‚é¡¹è¿ç®—ç¬¦ è¿ç®—ç¬¦ æè¿° ç¤ºä¾‹ â€¦ è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸².æƒŠäº†,è¿æ¥å­—ç¬¦ä¸²ä¸èƒ½ç”¨+çš„,åªèƒ½ç”¨è¿™ä¸ªâ€¦ â€œè‰è‰è‰â€â€¦â€œæˆ‘é¥¿é¥¿â€ : è‰è‰è‰æˆ‘é¥¿é¥¿ # è¿”å›å­—ç¬¦ä¸²æˆ–è¡¨é•¿åº¦çš„ä¸€å…ƒè¿ç®—ç¬¦ #â€œabcâ€ : 3 Â§ Luaçš„å¾ªç¯ Â§ whileå¾ªç¯ 1234while(condition)do statement(s)end 1234567a = 10while( a &lt; 20 )do print("value of a:", a) a = a + 1end (æƒŠäº†,luaä¸æ”¯æŒa += 1è¿™ç§) Â§ forå¾ªç¯ 1234for init, max/min value, incrementdo statement(s)end ä¸Šé¢ä»£ç ä¸­: inité¦–å…ˆæ‰§è¡Œ,åªæ‰§è¡Œä¸€æ¬¡,æ­¤æ­¥éª¤å…è®¸å£°æ˜å’Œåˆå§‹åŒ–ä»»ä½•å¾ªç¯æ§åˆ¶å˜é‡(ä»€ä¹ˆä»»ä½•?) æ¥ä¸‹æ¥æ‰§è¡Œmax/min.è¿™æ˜¯å¾ªç¯ç»§ç»­æ‰§è¡Œçš„æœ€å¤§å€¼æˆ–æœ€å°å€¼.å®ƒåœ¨å†…éƒ¨åˆ›å»ºæ¡ä»¶æ£€æŸ¥,ä»¥æ¯”è¾ƒåˆå§‹å€¼å’Œæœ€å¤§/æœ€å°å€¼ åœ¨æ‰§è¡Œforå¾ªç¯ä½“ä¹‹å,æ§åˆ¶æµä¼šè·³å›increment/decrementè¯­å¥.æ­¤è¯­å¥ç”¨äºæ›´æ–°å¾ªç¯æ§åˆ¶å˜é‡. å†æ¬¡è¯„ä¼°æ¡ä»¶.å¦‚æœä¸ºçœŸ,åˆ™å¾ªç¯æ‰§è¡Œå¹¶ä¸”è¿‡ç¨‹è‡ªèº«é‡å¤(å¾ªç¯ä½“,ç„¶åé€’å¢æ­¥éª¤,ç„¶åå†æ¬¡è°ƒèŠ‚).æ¡ä»¶å˜ä¸ºfalseå,forå¾ªç¯ç»ˆæ­¢ 1234for i = 1, 10, 1do print(i)end â€¦è¿™è¯­æ³•â€¦æˆ‘ä½›è¾£ é¡ºä¾¿è¯•äº†ä¸€ä¸‹,luaç”¨ä¸ç€æ¸¸æ ‡å¡å°ºâ€¦ Â§ repeatâ€¦untilå¾ªç¯ ä¸åœ¨é¡¶éƒ¨æµ‹è¯•å¾ªç¯æ¡ä»¶çš„forå’Œwhileä¸åŒ,luaçš„repeatâ€¦untilå¾ªç¯åœ¨åº•éƒ¨æ£€æŸ¥å¾ªç¯çš„æ¡ä»¶. repeatâ€¦untilå¾ªç¯ç±»ä¼¼whileå¾ªç¯,ä½†æ˜¯repeatâ€¦untilå¾ªç¯ä¿è¯è‡³å°‘æ‰§è¡Œä¸€æ¬¡. 123456x = 100repeat x = x + 1 print(x)until x &gt; 10---101 Â§ å¾ªç¯æ§åˆ¶å£°æ˜ æœ‰break,å¥½åƒæ²¡æœ‰continue Â§ Luaæµç¨‹æ§åˆ¶ 1234if(boolean)then dosomethingend 123456if(boolean)then dosomethingelse dosomethingend 123456789if(boolean)then dosomgthingelseif(boolean)then dosomethingelse sosomethingend æ³¨æ„: elseifåé¢éœ€è¦then,elseåé¢æ²¡æœ‰ Â§ Luaå‡½æ•° Luaä¸­ç¼–ç¨‹è¯­è¨€ä¸­çš„æ–¹æ³•å®šä¹‰ä¸€èˆ¬å½¢å¼å¦‚ä¸‹: 1234567optional_function_scope function function_name( argument1, argument2, argument3........, argumentn)function_bodyreturn result_params_comma_separatedend å¯é€‰å‡½æ•°èŒƒå›´ ä½¿ç”¨localå…³é”®å­—æ¥é™åˆ¶å‡½æ•°èŒƒå›´æˆ–è€…å¿½ç•¥è¯¥éƒ¨åˆ†,ä½¿ä¹‹æˆä¸ºä¸€ä¸ªå…¨å±€å‡½æ•° å‡½æ•°åç§° å‡½æ•°çš„å®ä½“åç§° å‚æ•° å‡½æ•°ä¸»ä½“ è¿”å› ç¤ºä¾‹:maxå‡½æ•° 12345678910function max(num1, num2) if (num1 &gt; num2) then result = num1; else result = num2; end return result;endprint(max(1,255)) Â§ å¯å˜å‚æ•°å‡½æ•° ä½¿ç”¨â€¦ä½œä¸ºå‚æ•°åœ¨luaä¸­åˆ›å»ºå…·æœ‰å¯å˜å‚æ•°çš„å‡½æ•°. 12345678910function average(...) result = 0 local arg = &#123;...&#125; for i,v in ipairs(arg) do result = result + v end return result/#argendprint("The average is",average(0)) Â§ Luaè¿­ä»£å™¨ Â§ è¿­ä»£å™¨æ³›å‹ è¿­ä»£å™¨æ³›å‹æä¾›é›†åˆä¸­æ¯ä¸ªå…ƒç´ çš„é”®å€¼å¯¹. 12345678array = &#123; "a", "b" &#125;for k, v in ipairs(array)do print(k, v)end--- 1 a--- 2 b ä¸Šé¢è¿™ä¸ªä¾‹å­ä½¿ç”¨äº†Luaæä¾›çš„é»˜è®¤çš„ipairsè¿­ä»£å™¨ åœ¨Luaä¸­,ä½¿ç”¨å‡½æ•°æ¥è¡¨ç¤ºè¿­ä»£å™¨.åŸºäºè¿™äº›è¿­ä»£å™¨å‡½æ•°ä¸­çš„çŠ¶æ€ç»´æŠ¤,æœ‰ä¸¤ç§ä¸»è¦ç±»å‹: Â§ æ— çŠ¶æ€è¿­ä»£å™¨ è¿™ç±»è¿­ä»£å™¨ä¸ä¼šä¿ç•™ä»»ä½•çŠ¶æ€. md.è¿™ä¸ªæ•™ç¨‹å†™çš„ä»€ä¹ˆjb,ä»¥åå†çœ‹ Â§ Luaè¡¨ è¡¨æ˜¯luaä¸­å”¯ä¸€å¯ç”¨çš„æ•°æ®ç»“æ„.ä½¿ç”¨è¡¨å¯ç”¨åˆ›å»ºä¸åŒçš„ç±»å‹,æ¯”å¦‚æ•°ç»„å’Œå­—å…¸. Luaä½¿ç”¨å…³è”æ•°ç»„,ä¸ä»…å¯ç”¨æ•°å­—ç¼–åˆ¶ç´¢å¼•,è¿˜å¯ä»¥ä½¿ç”¨é™¤nilä¹‹å¤–çš„å­—ç¬¦ä¸²ç¼–åˆ¶ç´¢å¼•. 123a = &#123;&#125;a["a"] = 233print(a["a"]) Â§ è¡¨ç¤ºå’Œç”¨æ³• è¡¨ç§°ä¸ºå¯¹è±¡,å®ƒæ—¢ä¸æ˜¯å€¼ä¹Ÿä¸æ˜¯å˜é‡.Luaæ˜¯å“Ÿæ„é€ å‡½æ•°{}æ¥åˆ›å»ºä¸€ä¸ªç©ºè¡¨. Â§ è¡¨æ“ä½œ Â§ è¡¨è¿æ¥ ä½¿ç”¨concatå‡½æ•°è¿æ¥è¡¨ table.concat (table [, sep [, i [, j]]]) 12345678910fruits = &#123; "bbb", "ccc", "ddd" &#125;print(table.concat(fruits))--- bbbcccdddprint(table.concat(fruits, ", "))--- bbb, ccc, dddprint(table.concat(fruits, ", ", 2, 3))--- ccc, ddd Â§ æ’å…¥å’Œåˆ é™¤ table.insert (table, [pos,] value) table.remove (table [, pos]) 1234567891011121314151617arr = &#123; "bbb", "ccc", "ddd" &#125;table.insert(arr,"aaa")print(table.concat(arr," "))--- bbb ccc ddd aaatable.insert(arr,1,"eee")print(table.concat(arr," "))--- eee bbb ccc ddd aaatable.remove(arr)print(table.concat(arr," "))--- eee bbb ccc dddtable.remove(arr, 3)print(table.concat(arr," "))--- eee bbb ddd Â§ æ’åº 12345arr = &#123; "e", "b", "d", "c", "a" &#125;print(table.concat(arr," "))table.sort(arr)print(table.concat(arr," "))]]></content>
      <categories>
        <category>lua</category>
      </categories>
      <tags>
        <tag>lua</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[cs-learning]]></title>
    <url>%2Fcs-learning%2F</url>
    <content type="text"><![CDATA[Â§ C#æ•°æ®ç±»å‹ Â§ å€¼ç±»å‹ ç±»å‹ æè¿° èŒƒå›´ é»˜è®¤å€¼ bool å¸ƒå°”å€¼ Trueæˆ–False False byte 8ä½æ— ç¬¦å·æ•´æ•° 0åˆ°255 0 sbyte 8ä½æœ‰ç¬¦å·æ•´æ•° -128åˆ°127 char 16ä½Unicodeå­—ç¬¦ U +0000 åˆ°U +ffff â€˜\0â€™ decimal 128ä½ç²¾ç¡®çš„åè¿›åˆ¶å€¼,28~29æœ‰æ•ˆä½æ•° (-7.9 * 10 ^ 28)/10 ^ (0 åˆ° 28) 0.0M short ushort int uint double float long ulong Â§ å¼•ç”¨ç±»å‹ Â§ Objectç±»å‹ å¯¹è±¡(Object)ç±»å‹æ˜¯C#é€šç”¨ç±»å‹ç³»ç»Ÿä¸­æ‰€æœ‰æ•°æ®ç±»å‹çš„ç»ˆæåŸºç±». Objectç±»å¯ä»¥è¢«åˆ†é…ç»™ä»»ä½•å…¶ä»–ç±»å‹çš„å€¼.ä½†æ˜¯åœ¨åˆ†é…ä¹‹å‰,éœ€è¦å…ˆè¿›è¡Œç±»å‹è½¬æ¢. å½“ä¸€ä¸ªå€¼ç±»å‹è½¬æ¢ä¸ºå¯¹è±¡ç±»å‹æ—¶,è¢«ç§°ä¸ºè£…ç®±,å½“ä¸€ä¸ªå¯¹è±¡ç±»å‹è½¬æ¢ä¸ºå€¼ç±»å‹æ—¶,è¢«ç§°ä¸ºæ‹†ç®± 12object obj;obj = 100; // è¿™æ˜¯è£…ç®± Â§ Dynamicç±»å‹ åŠ¨æ€(Dynamic)ç±»å‹å˜é‡å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹ 1dynamic a = 20; Â§ Stringç±»å‹ å­—ç¬¦ä¸²(String)ç±»å‹å…è®¸ç»™å˜é‡åˆ†é…ä»»ä½•å­—ç¬¦ä¸²å€¼. C#çš„å­—ç¬¦ä¸²åªèƒ½æ˜¯åŒå¼•å·,ä¸èƒ½å•å¼•å·. å­—ç¬¦ä¸²å‰é¢åŠ @,åˆ™è¯¥å­—ç¬¦ä¸²çš„è½¬ä¹‰ç¬¦()å°†è¢«å½“åšæ™®é€šå­—ç¬¦å¯¹å¾…(å°±åƒpythonå­—ç¬¦ä¸²å‰é¢åŠ rä¼¼çš„) 12345Console.WriteLine("a\nb");// a// bConsole.WriteLine(@"a\nb");// a\nb Â§ æŒ‡é’ˆç±»å‹ **æŒ‡é’ˆç±»å‹(Pointer types)**å˜é‡å­˜å‚¨å¦ä¸€ç§ç±»å‹çš„å†…å­˜åœ°å€. å½“ä¸€ä¸ªä»£ç å—ä½¿ç”¨ unsafe ä¿®é¥°ç¬¦æ ‡è®°æ—¶ï¼ŒC#å…è®¸åœ¨å‡½æ•°ä¸­ä½¿ç”¨æŒ‡é’ˆå˜é‡ã€‚ä¸å®‰å…¨ä»£ç æˆ–éæ‰˜ç®¡ä»£ç æ˜¯æŒ‡ä½¿ç”¨äº†æŒ‡é’ˆå˜é‡çš„ä»£ç å—ã€‚ 1char* cptr; Â§ ç±»å‹è½¬æ¢ ç±»å‹è½¬æ¢ä»æ ¹æœ¬ä¸Šè¯´æ˜¯ç±»å‹é“¸é€ ,æˆ–è€…è¯´æ˜¯æŠŠæ•°æ®ä»ä¸€ç§ç±»å‹è½¬æ¢åˆ°å¦ä¸€ç§ç±»å‹. åœ¨C#ä¸­,ç±»å‹è½¬æ¢æœ‰ä¸¤ç§å½¢å¼: éšå¼ç±»å‹è½¬æ¢ è¿™äº›è½¬æ¢æ˜¯C#é»˜è®¤çš„ä»¥å®‰å…¨æ–¹å¼è¿›è¡Œçš„è½¬æ¢,ä¸ä¼šå¯¼è‡´æ•°æ®çš„ä¸¢å¤±.å¦‚,ä»å°çš„æ•´æ•°è½¬æ¢ä¸ºå¤§çš„æ•´æ•°,ä»æ´¾ç”Ÿç±»è½¬æ¢ä¸ºåŸºç±» æ˜¾å¼ç±»å‹è½¬æ¢ å³å¼ºåˆ¶ç±»å‹è½¬æ¢.éœ€è¦å¼ºåˆ¶è½¬æ¢è¿ç®—ç¬¦,å¯èƒ½ä¼šé€ æˆæ•°æ®ä¸¢å¤± Â§ ç±»å‹è½¬æ¢æ–¹æ³• 1234int i = 1;bool b = Convert.ToBoolean(i);Console.Write(b);// True Â§ å¾ªç¯ Â§ foreachå¾ªç¯ ä½¿ç”¨foreachå¯ä»¥è¿­ä»£æ•°ç»„æˆ–è€…ä¸€ä¸ªé›†åˆå¯¹è±¡ 123456int[] i = new int[] &#123;114, 514, 1919, 810&#125;;foreach (var a in i)&#123; Console.Write(a); // 1145141919810&#125; Â§ å°è£… Â§ Public Â§ Private Â§ Protected å…è®¸å­ç±»è®¿é—®å®ƒçš„åŸºç±»çš„æˆå‘˜å‡½æ•°å’Œæˆå‘˜å˜é‡. Â§ Internal å…è®¸ä¸€ä¸ªç±»å°†å…¶æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°æš´éœ²ç»™å½“å‰å‡½æ•°ä¸­çš„å…¶ä»–å‡½æ•°å’Œå¯¹è±¡ Â§ æ–¹æ³• Â§ å®šä¹‰ 1234&lt;Access Specifier&gt; &lt;Return Type&gt; &lt;Method Name&gt;(Parameter List)&#123; Method Body&#125; Â§ å‚æ•°ä¼ é€’ æ–¹å¼ æè¿° å€¼å‚æ•° å¤åˆ¶å‚æ•°çš„å®é™…å€¼ç»™å‡½æ•°çš„å½¢å‚.å®å‚å’Œå½¢å‚ä½¿ç”¨çš„å†…å­˜ä¸åŒ.å½¢å‚å€¼æ”¹å˜æ—¶ä¸ä¼šå½±å“å®å‚. å¼•ç”¨ä¼ é€’ å¤åˆ¶å‚æ•°å†…å­˜ä½ç½®çš„å¼•ç”¨ç»™å½¢å‚.å½“å½¢å‚å€¼æ”¹å˜æ—¶,ä¼šæ”¹å˜å®å‚ è¾“å‡ºå‚æ•° è¿™ç§æ–¹å¼å¯ä»¥è¿”å›å¤šä¸ªå€¼(?) Â§ æŒ‰å€¼ä¼ é€’ ä¼ å‚çš„é»˜è®¤æ–¹å¼. 123456789101112131415161718192021public void swap(int x, int y)&#123; int temp; temp = x; x = y; y = temp;&#125;static void Main(string[] args)&#123; Program program = new Program(); int x = 5, y = 6; Console.WriteLine($"&#123;x&#125;,&#123;y&#125;"); // 5,6 program.swap(x, y); Console.WriteLine($"&#123;x&#125;,&#123;y&#125;"); // 5,6&#125; Â§ æŒ‰å¼•ç”¨ä¼ é€’ åœ¨C#ä¸­,ä½¿ç”¨refå…³é”®å­—å£°æ˜å¼•ç”¨å‚æ•°. 12345678910111213141516171819202122public void swap(ref int x, ref int y)&#123; int temp; temp = x; x = y; y = temp;&#125;static void Main(string[] args)&#123; Program program = new Program(); int x = 5, y = 6; Console.WriteLine($"&#123;x&#125;,&#123;y&#125;"); // 5,6 program.swap(ref x,ref y); Console.WriteLine($"&#123;x&#125;,&#123;y&#125;"); // 6,5&#125; Â§ æŒ‰è¾“å‡ºä¼ é€’å‚æ•° returnè¯­å¥å¯ç”¨äºåªä»å‡½æ•°ä¸­è¿”å›ä¸€ä¸ªå€¼.ä½†æ˜¯,å¯ä»¥ä½¿ç”¨*è¾“å‡ºå‚æ•°æ¥ä»å‡½æ•°ä¸­è¿”å›å¤šä¸ªå€¼. è¾“å‡ºå‚æ•°ä¼šæŠŠæ–¹æ³•è¾“å‡ºçš„æ•°æ®èµ‹å€¼ç»™è‡ªå·±,å…¶ä»–æ–¹é¢ä¸å¼•ç”¨å‚æ•°ç±»ä¼¼. 1234567891011121314151617public int divmod(int a, int b, out int c)&#123; int div = (int) (a / b); int mod = a % b; c = mod; return div;&#125;static void Main(string[] args)&#123; Program program = new Program(); int x = 11, y = 3; int div, mod; div = program.divmod(x, y, out mod); Console.WriteLine($"&#123;div&#125;,&#123;mod&#125;"); // 3,2&#125; Â§ å¯ç©ºç±»å‹ C#æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„æ•°æ®ç±»å‹,nullableç±»å‹,å¯ç©ºç±»å‹å¯ä»¥è¡¨ç¤ºå…¶åŸºç¡€å€¼æ­£å¸¸èŒƒå›´å†…çš„å€¼,åœ¨åŠ ä¸Šä¸€ä¸ªnullå€¼. ä¾‹å¦‚Nullable,è¯»ä½œå¯ç©ºçš„Int32. åœ¨å¤„ç†æ•°æ®åº“å’Œå…¶ä»–åŒ…å«å¯èƒ½æœªèµ‹å€¼çš„å…ƒç´ çš„æ•°æ®ç±»å‹æ—¶,å°†nullèµ‹å€¼ç»™æ•°å€¼ç±»å‹å’Œå¸ƒå°”å‹çš„åŠŸèƒ½ç‰¹åˆ«æœ‰ç”¨. Â§ å¯ç©ºç±»å‹çš„å£°æ˜ å¯ç©ºç±»å‹çš„å£°æ˜è¯­æ³•å¦‚ä¸‹: 1Int32? x; Â§ Nullåˆå¹¶è¿ç®—ç¬¦ Nullåˆå¹¶è¿ç®—ç¬¦ç”¨äºå®šä¹‰å¯ç©ºç±»å‹å’Œå¼•ç”¨ç±»å‹çš„é»˜è®¤å€¼. Nullåˆå¹¶è¿ç®—ç¬¦ä¸ºç±»å‹è½¬æ¢å®šä¹‰äº†ä¸€ä¸ªé¢„è®¾å€¼,ä»¥é˜²å¯ç©ºç±»å‹ä¸ºNull. Nullè¿ç®—ç¬¦å§æ“ä½œæ•°ç±»å‹éšå¼è½¬æ¢æˆå¦ä¸€ä¸ªå¯ç©º(æˆ–ä¸å¯ç©º)çš„å€¼ç±»å‹çš„æ“ä½œæ•°çš„ç±»å‹. å¦‚æœç¬¬ä¸€ä¸ªæ•°ä¸ºnull,åˆ™è¿ç®—ç¬¦è¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°çš„å€¼,å¦åˆ™è¿”å›ç¬¬ä¸€ä¸ªæ“ä½œæ•°çš„å€¼. 123456789int? a = 1;int x = a ?? 233;Console.WriteLine(x);// 1int? b = null;int y = b ?? 233;Console.WriteLine(y);// 233 Â§ æ•°ç»„ Â§ æ•°ç»„å£°æ˜ 1int[] a = new int[10]; Â§ æ•°ç»„èµ‹å€¼ Â§ æ•°ç»„å£°æ˜æ—¶èµ‹å€¼ å£°æ˜æ—¶èµ‹å€¼å¯ä»¥çœç•¥æ•°ç»„å¤§å°. 12int[] a = new int[4] &#123;0, 1, 2, 3&#125;;int[] b = new int[] &#123;0, 1, 2, 3&#125;; Â§ æ•°ç»„å¼•ç”¨èµ‹å€¼ 12int[] a = new int[4];a[1] = 2; Â§ å¤åˆ¶æ•°ç»„ è¿™ç§æƒ…å†µä¸‹,ç›®æ ‡å’Œæºä¼šæŒ‡å‘ç›¸åŒçš„å†…å­˜ä½ç½®. 12int[] a = new int[] &#123;0, 1, 2, 3&#125;;int[] b = a; Â§ éå†æ•°ç»„ 12345int[] a = new int[] &#123;0, 1, 2, 3&#125;;foreach (int v in a)&#123; Console.WriteLine(v);&#125; Â§ ç»“æ„ä½“ 12345678910struct A&#123; public int a; public String s; public int func(int x) &#123; return x + a; &#125;&#125;; Â§ æšä¸¾ æšä¸¾æ˜¯ä¸€ç»„å‘½åæ•´å‹å¸¸é‡.æšä¸¾æ˜¯ä½¿ç”¨enumå…³é”®å­—å£°æ˜çš„. C#æšä¸¾æ˜¯å€¼ç±»å‹,å³ æšä¸¾åŒ…å«è‡ªå·±çš„å€¼,ä¸”ä¸èƒ½ç»§æ‰¿æˆ–ä¼ é€’ç»§æ‰¿. 123var x = A.a;Console.WriteLine(x);// 0 Â§ ç±» Â§ ææ„å‡½æ•° åœ¨ç¨‹åºç»“æŸå‰æ‰§è¡Œ(å¤§æ¦‚?) 1234567class A&#123; ~A() &#123; Console.WriteLine("Cancel."); &#125;&#125; Â§ ç±»çš„é™æ€æˆå‘˜ ä½¿ç”¨staticå…³é”®å­—æŠŠç±»æˆå‘˜å®šä¹‰ä¸ºé™æ€. å½“æˆ‘ä»¬å£°æ˜ä¸€ä¸ªç±»æˆå‘˜ä¸ºé™æ€æ—¶,æ— è®ºå¤šå°‘ä¸ªç±»è¢«åˆ›å»º,åªä¼šæœ‰ä¸€ä¸ªæ”¹è¿›é™æ€ç±»æˆå‘˜çš„å‰¯æœ¬. é™æ€å˜é‡ç”¨äºå®šä¹‰å¸¸é‡,ä»–ä»¬çš„å€¼å¯ä»¥é€šè¿‡ç›´æ¥è°ƒç”¨ç±»è€Œä¸éœ€è¦åˆ›å»ºç±»çš„å®ä¾‹æ¥è·å–(æ— æ³•é€šè¿‡å®ä¾‹æ¥è®¿é—®,åªèƒ½é€šè¿‡ç±»è®¿é—®). é™æ€å˜é‡å¯ä»¥åœ¨æˆå‘˜å‡½æ•°æˆ–ç±»çš„å®šä¹‰å¤–éƒ¨è¿›è¡Œåˆå§‹åŒ–,ä¹Ÿå¯ä»¥åœ¨ç±»çš„å®šä¹‰å†…éƒ¨è¿›è¡Œåˆå§‹åŒ–.]]></content>
  </entry>
  <entry>
    <title><![CDATA[ã€Šshaderå…¥é—¨ç²¾è¦ã€‹ç¬”è®°-ç¬¬12ç« -å±å¹•åå¤„ç†æ•ˆæœ]]></title>
    <url>%2Fshader-r-screen-post-processing-effects%2F</url>
    <content type="text"><![CDATA[å±å¹•åå¤„ç†æ•ˆæœ(screen post-processing effects)æ˜¯æ¸¸æˆä¸­å®ç°å±å¹•ç‰¹æ•ˆçš„å¸¸è§æ–¹æ³•. Â§ å»ºç«‹ä¸€ä¸ªåŸºæœ¬çš„å±å¹•åå¤„ç†è„šæœ¬ç³»ç»Ÿ å±å¹•åå¤„ç†,æŒ‡çš„æ˜¯åœ¨æ¸²æŸ“å®Œæ•´ä¸ªåœºæ™¯å¾—åˆ°å±å¹•å›¾åƒå,å†å¯¹è¿™ä¸ªå›¾åƒè¿›è¡Œä¸€ç³»åˆ—æ“ä½œ,å®ç°å„ç§å±å¹•ç‰¹æ•ˆ. è¿™ç§æŠ€æœ¯å¯ä»¥ä¸ºæ¸¸æˆæ·»åŠ å¾ˆå¤šçš„è‰ºæœ¯æ•ˆæœ.,ä¾‹å¦‚æ™¯æ·±(Depth of Field), è¿åŠ¨æ¨¡ç³Š(Motion Blur)ç­‰. å› æ­¤,æƒ³è¦å®ç°å±å¹•åå¤„ç†çš„åŸºç¡€åœ¨äºå¾—åˆ°æ¸²æŸ“åçš„å±å¹•å›¾åƒ,å³æŠ“å–å±å¹•,è€ŒUnityä¸ºæˆ‘ä»¬æä¾›äº†è¿™æ ·ä¸€ä¸ªæ–¹ä¾¿çš„æ¥å£:OnRenderImageå‡½æ•°: MonoBehaviour.OnRenderImage (RenderTexture src, RenderTexture dest) å½“æˆ‘ä»¬åœ¨è„šæœ¬ä¸­å£°æ˜æ­¤å‡½æ•°å,Unityä¼šæŠŠå½“å‰æ¸²æŸ“å¾—åˆ°çš„å›¾åƒå­˜å‚¨åœ¨ç¬¬ä¸€ä¸ªå‚æ•°å¯¹åº”çš„æºæ¸²æŸ“çº¹ç†ä¸­,é€šè¿‡å‡½æ•°ä¸­çš„ä¸€ç³»åˆ—æ“ä½œå,å†æŠŠç›®æ ‡æ¸²æŸ“çº¹ç†,å³ç¬¬äºŒä¸ªå‚æ•°å¯¹åº”çš„æ¸²æŸ“çº¹ç†æ˜¾ç¤ºåˆ°å±å¹•ä¸Š. åœ¨OnRenderImageå‡½æ•°ä¸­,æˆ‘ä»¬é€šå¸¸æ˜¯åˆ©ç”¨Graphics.Blitå‡½æ•°æ¥å®Œæˆå¯¹æ¸²æŸ“çº¹ç†çš„å¤„ç†. public static void Blit(Texture src, RenderTexture dest) public static void Blit(Texture src, RenderTexture dest, Material mat, int pass = -1) public static void Blit(Texture src, Material mat, int pass = -1) å…¶ä¸­,srcå¯¹åº”äº†æºçº¹ç†, åœ¨å±å¹•åå¤„ç†æŠ€æœ¯ä¸­,è¿™ä¸ªå‚æ•°å°±æ˜¯å½“å‰å±å¹•çš„æ¸²æŸ“çº¹ç†æˆ–æ˜¯ä¸Šä¸€æ­¥å¤„ç†åå¾—åˆ°çš„æ¸²æŸ“çº¹ç†. å‚æ•°destæ˜¯ç›®æ ‡æ¸²æŸ“çº¹ç†,å¦‚æœå®ƒçš„å€¼ä¸ºnullå°±ä¼šç›´æ¥å°†ç»“æœæ˜¾ç¤ºåœ¨å±å¹•ä¸Š. å‚æ•°matæ˜¯æˆ‘ä»¬ä½¿ç”¨çš„æè´¨,è¿™ä¸ªæè´¨ä½¿ç”¨çš„Unity Shaderå°†ä¼šè¿›è¡Œå„ç§å±å¹•åæ“ä½œ,è€Œsrcçº¹ç†å°†ä¼šè¢«ä¼ é€’ç»™Shaderä¸­åä¸º_MainTexçš„çº¹ç†å±æ€§. å‚æ•°passçš„é»˜è®¤å€¼ä¸º-1, è¡¨ç¤ºå°†ä¼šä¾æ¬¡è°ƒç”¨Shaderå†…çš„æ‰€æœ‰Pass.å¦åˆ™,åªä¼šè°ƒç”¨æŒ‡å®šç´¢å¼•çš„Pass. åœ¨é»˜è®¤æƒ…å†µä¸‹,OnRenderImageå‡½æ•°ä¼šåœ¨æ‰€æœ‰çš„ä¸é€æ˜å’Œé€æ˜çš„Passæ‰§è¡Œå®Œæ¯•åè¢«è°ƒç”¨,ä¸€éå¯¹åœºæ™¯ä¸­æ‰€æœ‰æ¸¸æˆå¯¹è±¡äº§ç”Ÿå½±å“.ä½†æœ‰æ—¶,æˆ‘ä»¬å¸Œæœ›åœ¨ä¸é€æ˜Passæ‰§è¡Œå®Œæ¯•åå°±ç«‹å³è°ƒç”¨OnRenderImageå‡½æ•°,ä»è€Œä¸å¯¹é€æ˜ç‰©ä½“äº§ç”Ÿä»»ä½•å½±å“.æ­¤æ—¶,æˆ‘ä»¬å¯ä»¥åœ¨OnRenderImageå‡½æ•°å‰æ·»åŠ ImageEffectOpaqueå±æ€§æ¥å®ç°è¿™æ ·çš„ç›®çš„.(å°†åœ¨13.4èŠ‚é‡åˆ°) å› æ­¤,è¦åœ¨Unityä¸­å®ç°å±å¹•åå¤„ç†æ•ˆæœ,è¿‡ç¨‹é€šå¸¸å¦‚ä¸‹: é¦–å…ˆ æˆ‘ä»¬éœ€è¦åœ¨æ‘„åƒæœºä¸­æ·»åŠ ä¸€ä¸ªç”¨äºå±å¹•åå¤„ç†çš„è„šæœ¬. åœ¨è¿™ä¸ªè„šæœ¬ä¸­,æˆ‘ä»¬ä¼šå®ç°OnRenderImageå‡½æ•°æ¥è·å–å½“å‰å±å¹•çš„æ¸²æŸ“çº¹ç†. ç„¶å å†è°ƒç”¨Graphics.Blitå‡½æ•°ä½¿ç”¨ç‰¹å®šçš„UnityShaderæ¥å¯¹å½“å‰å›¾åƒè¿›è¡Œå¤„ç†,å†æŠŠè¿”å›çš„æ¸²æŸ“çº¹ç†æ˜¾ç¤ºåˆ°å±å¹•ä¸Š. å¯¹äºä¸€äº›å¤æ‚çš„å±å¹•ç‰¹æ•ˆ,æˆ‘ä»¬å¯èƒ½éœ€è¦å¤šæ¬¡è°ƒç”¨Graphics.Blitå‡½æ•°æ¥å¯¹ä¸Šä¸€æ­¥çš„è¾“å‡ºç»“æœè¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†â€¦ ä½†æ˜¯,åœ¨è¿›è¡Œå±å¹•åå¤„ç†ä¹‹å‰,æˆ‘ä»¬éœ€è¦æ£€æŸ¥ä¸€ç³»åˆ—æ¡ä»¶æ˜¯å¦æ»¡è¶³,ä¾‹å¦‚å½“å‰å¹³å°æ˜¯å¦æ”¯æŒæ¸²æŸ“çº¹ç†å’Œå±å¹•ç‰¹æ•ˆ,æ˜¯å¦æ”¯æŒå½“å‰ä½¿ç”¨çš„Unity Shaderç­‰. ä¸ºæ­¤,æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç”¨äºå±å¹•åå¤„ç†æ•ˆæœçš„åŸºç±»,åœ¨å®ç°å„ç§å±å¹•ç‰¹æ•ˆæ—¶,æˆ‘ä»¬åªéœ€è¦ç»§æ‰¿è‡ªè¯¥ç§¯ç´¯,åœ¨å®ç°æ´¾ç”Ÿç±»ä¸­ä¸åŒçš„æ“ä½œå³å¯. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263using UnityEngine;using System.Collections;// ä½¿åœ¨ç¼–è¾‘å™¨çŠ¶æ€ä¸‹ä¹Ÿå¯ä»¥æ‰§è¡Œè¯¥è„šæœ¬æ¥æŸ¥çœ‹æ•ˆæœ[ExecuteInEditMode][RequireComponent (typeof(Camera))]public class PostEffectsBase : MonoBehaviour &#123; // ä¸ºäº†æå‰æ£€æŸ¥å„ç§èµ„æºå’Œæ¡ä»¶æ˜¯å¦æ»¡è¶³,æˆ‘ä»¬åœ¨Startå‡½æ•°ä¸­è°ƒç”¨CheckResourceå‡½æ•° protected void CheckResources() &#123; bool isSupported = CheckSupport(); if (isSupported == false) &#123; NotSupported(); &#125; &#125; // Called in CheckResources to check support on this platform protected bool CheckSupport() &#123; if (SystemInfo.supportsImageEffects == false || SystemInfo.supportsRenderTextures == false) &#123; Debug.LogWarning("This platform does not support image effects or render textures."); return false; &#125; return true; &#125; // Called when the platform doesn't support this effect protected void NotSupported() &#123; enabled = false; &#125; protected void Start() &#123; CheckResources(); &#125; // ä¸€äº›å±å¹•ç‰¹æ•ˆå¯èƒ½éœ€è¦æ›´å¤šçš„è®¾ç½®,ä¾‹å¦‚è®¾ç½®ä¸€äº›é»˜è®¤å€¼ç­‰,å¯ä»¥é‡è½½Start,CheckResourcesæˆ–CheckSupportå‡½æ•°. // ç”±äºæ¯ä¸ªå“ç›®åå¤„ç†æ•ˆæœé€šå¸¸éœ€è¦æŒ‡å®šä¸€ä¸ªShaderæ¥åˆ›å»ºä¸€ä¸ªç”¨äºå¤„ç†æ¸²æŸ“çº¹ç†çš„æè´¨,å› æ­¤åŸºç±»ä¸­ä¹Ÿæä¾›äº†è¿™ç§æ–¹æ³•: // Called when need to create the material used by this effect // CheckShaderAndCreateMaterialå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°,ç¬¬ä¸€ä¸ªå‚æ•°åˆ¶å®šäº†è¯¥ç‰¹æ•ˆéœ€è¦ä½¿ç”¨çš„Shader,ç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯ç”¨äºåæœŸå¤„ç†çš„æè´¨. // è¯¥å‡½æ•°é¦–å…ˆæ£€æŸ¥Shaderçš„å¯ç”¨æ€§,æ£€æŸ¥é€šè¿‡ä¹‹åå°±è¿”å›ä¸€ä¸ªä½¿ç”¨äº†è¯¥Shaderçš„æè´¨,å¦åˆ™è¿”å›null protected Material CheckShaderAndCreateMaterial(Shader shader, Material material) &#123; if (shader == null) &#123; return null; &#125; if (shader.isSupported &amp;&amp; material &amp;&amp; material.shader == shader) return material; if (!shader.isSupported) &#123; return null; &#125; else &#123; material = new Material(shader); material.hideFlags = HideFlags.DontSave; if (material) return material; else return null; &#125; &#125;&#125; åœ¨ä¸‹é¢ä¸€èŠ‚æˆ‘ä»¬å°±ä¼šçœ‹åˆ°å¦‚ä½•ç»§æ‰¿PostEffect.csæ¥åˆ›å»ºä¸€ä¸ªç®€å•çš„ç”¨äºè°ƒæ•´å±å¹•çš„äº®åº¦,é¥±å’Œåº¦å’Œå¯¹æ¯”åº¦çš„ç‰¹æ•ˆè„šæœ¬. Â§ è°ƒæ•´å±å¹•çš„äº®åº¦,é¥±å’Œåº¦å’Œå¯¹æ¯”åº¦. æ–°å»ºä¸€ä¸ªè„šæœ¬,åBrightnessSaturationAndContrast.cs 12345678910111213141516171819202122232425262728293031323334353637383940using UnityEngine;using System.Collections;// é¦–å…ˆ,ç»§æ‰¿PostEffectsBaseç±»public class BrightnessSaturationAndContrast : PostEffectsBase &#123; // å£°æ˜ä½¿ç”¨çš„Shaser,å¹¶æ®æ­¤åˆ›å»ºç›¸åº”çš„æè´¨. public Shader briSatConShader; // æŒ‡å®šçš„Shader private Material briSatConMaterial; // åˆ›å»ºçš„æè´¨ public Material material &#123; // materialçš„getå‡½æ•°è°ƒç”¨äº†åŸºç±»çš„CheckShaderAndCreateMaterialå‡½æ•°æ¥å¾—åˆ°å¯¹åº”çš„æè´¨ get &#123; briSatConMaterial = CheckShaderAndCreateMaterial(briSatConShader, briSatConMaterial); return briSatConMaterial; &#125; &#125; // è°ƒæ•´äº®åº¦,é¥±å’Œåº¦å’Œå¯¹æ¯”åº¦çš„å‚æ•°. [Range(0.0f, 3.0f)] public float brightness = 1.0f; [Range(0.0f, 3.0f)] public float saturation = 1.0f; [Range(0.0f, 3.0f)] public float contrast = 1.0f; // å®šä¹‰OnRenderImageå‡½æ•°æ¥è¿›è¡ŒçœŸæ­£çš„ç‰¹æ•ˆå¤„ç† void OnRenderImage(RenderTexture src, RenderTexture dest) &#123; if (material != null) &#123; material.SetFloat("_Brightness", brightness); material.SetFloat("_Saturation", saturation); material.SetFloat("_Contrast", contrast); Graphics.Blit(src, dest, material); &#125; else &#123; Graphics.Blit(src, dest); &#125; &#125;&#125; æ¯å½“OnrenderIå‡½æ•°è¢«è°ƒç”¨æ—¶,å®ƒä¼šæ£€æŸ¥æè´¨æ˜¯å¦å¯ç”¨.å¦‚æœå¯ç”¨,å°±æŠŠå‚æ•°ä¼ é€’ç»™æè´¨,å†è°ƒç”¨Graphics.Blitè¿›è¡Œå¤„ç†; å¦åˆ™,ç›´æ¥æŠŠåŸå›¾åƒæ˜¾ç¤ºåˆ°å±å¹•ä¸Š,ä¸åšä»»ä½•å¤„ç†. ä¹‹åæ˜¯Shaderçš„éƒ¨åˆ† 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879Shader "Unity Shaders Book/Chapter 12/Brightness Saturation And Contrast" &#123; Properties &#123; _MainTex ("Base (RGB)", 2D) = "white" &#123;&#125; // å£°æ˜ç”¨äºè°ƒæ•´äº®åº¦,é¥±å’Œåº¦å’Œå¯¹æ¯”åº¦çš„å±æ€§.è¿™äº›å€¼å°†ä¼šç”±è„šæœ¬ä¼ é€’è€Œå¾— // äº‹å®ä¸Š,æˆ‘ä»¬å¯ä»¥çœç•¥è¿™äº›å±æ€§å£°æ˜,å› ä¸ºå¯¹äºå±å¹•ç‰¹æ•ˆæ¥è¯´,å®ƒä»¬ä½¿ç”¨çš„æè´¨éƒ½æ˜¯ä¸´æ—¶åˆ›å»ºçš„,æˆ‘ä»¬ä¸éœ€è¦åœ¨æè´¨é¢æ¿ä¸Šè°ƒæ•´å‚æ•°,è€Œæ˜¯ç›´æ¥ä»è„šæœ¬ä½ ä¼ é€’ç»™UnityShader _Brightness ("Brightness", Float) = 1 _Saturation("Saturation", Float) = 1 _Contrast("Contrast", Float) = 1 &#125; SubShader &#123; Pass &#123; // å±å¹•åå¤„ç†å®é™…ä¸Šæ˜¯åœ¨åœºæ™¯ä¸­ç»˜åˆ¶äº†ä¸€ä¸ªä¸å±å¹•åŒå®½åŒé«˜çš„å››è¾¹å½¢é¢ç‰‡,ä¸ºäº†é˜²æ­¢å®ƒå¯¹å…¶ä»–ç‰©ä½“äº§ç”Ÿå½±å“,æˆ‘ä»¬éœ€è¦è®¾ç½®ç›¸å…³çš„æ¸²æŸ“çŠ¶æ€: // å…³é—­æ·±åº¦å†™å…¥,ä¸ºäº†é˜²æ­¢å…¶æŒ¡ä½åœ¨å…¶åé¢æ¸²æŸ“çš„ç‰©ä½“ // è¿™äº›çŠ¶æ€è®¾ç½®æ˜¯å±å¹•åå¤„ç†çš„Shaderçš„æ ‡é… ZTest Always Cull Off ZWrite Off CGPROGRAM #pragma vertex vert #pragma fragment frag #include "UnityCG.cginc" sampler2D _MainTex; half _Brightness; half _Saturation; half _Contrast; struct v2f &#123; float4 pos : SV_POSITION; half2 uv: TEXCOORD0; &#125;; // é¡¶ç‚¹ç€è‰²å™¨æ¯”è¾ƒç®€å•,åªéœ€è¿›è¡Œå¿…è¦çš„é¡¶ç‚¹å˜æ¢å¹¶æŠŠæ­£ç¡®çš„çº¹ç†ä¼ é€’ç»™ç‰‡å…ƒç€è‰²å™¨ // TODO: ç–‘é—®:å±å¹•åæ¸²æŸ“ä¸æ˜¯æŠŠæ¨¡å‹éƒ½æ¸²æŸ“åˆ°å±å¹•ç©ºé—´åå†è¿›è¡Œçš„ä¹ˆ?ä¸ºä»€ä¹ˆè¦æŠŠé¡¶ç‚¹åæ ‡å˜æ¢åˆ°å‰ªè£ç©ºé—´? // è¿™é‡Œçš„appdata_imgæ˜¯unityå†…ç½®çš„ç»“æ„ä½“,ä»–åªåŒ…å«äº†å›¾åƒå¤„ç†æ—¶å¿…é¡»çš„é¡¶ç‚¹åæ ‡å’Œçº¹ç†åæ ‡ç­‰å˜é‡. å¯ä»¥åœ¨UnityCG.cgincä¸­æ‰¾åˆ°å®ƒçš„å£°æ˜ // æŠ„ä¸‹æ¥://struct appdata_img//&#123;// float4 vertex : POSITION;// half2 texcoord : TEXCOORD0;// UNITY_VERTEX_INPUT_INSTANCE_ID//&#125;; v2f vert(appdata_img v) &#123; v2f o; o.pos = UnityObjectToClipPos(v.vertex); o.uv = v.texcoord; return o; &#125; fixed4 frag(v2f i) : SV_Target &#123; fixed4 renderTex = tex2D(_MainTex, i.uv); // Apply brightness fixed3 finalColor = renderTex.rgb * _Brightness; // Apply saturation fixed luminance = 0.2125 * renderTex.r + 0.7154 * renderTex.g + 0.0721 * renderTex.b; fixed3 luminanceColor = fixed3(luminance, luminance, luminance); finalColor = lerp(luminanceColor, finalColor, _Saturation); // Apply contrast fixed3 avgColor = fixed3(0.5, 0.5, 0.5); finalColor = lerp(avgColor, finalColor, _Contrast); return fixed4(finalColor, renderTex.a); &#125; ENDCG &#125; &#125; Fallback Off&#125; Â§ è¾¹ç¼˜æ£€æµ‹ è¾¹ç¼˜æ£€æµ‹çš„åŸç†æ˜¯åˆ©ç”¨ä¸€äº›è¾¹ç¼˜æ£€æµ‹ç®—å­å¯¹å›¾åƒè¿›è¡Œå·ç§¯(convolution)æ“ä½œ. Â§ ä»€ä¹ˆæ˜¯å·ç§¯ åœ¨å›¾åƒå¤„ç†ä¸­,å·ç§¯æŒ‡çš„æ˜¯ä½¿ç”¨ä¸€ä¸ªå·ç§¯æ ¸(kernel)å¯¹ä¸€å¼ å›¾ç‰‡ä¸­çš„æ¯ä¸ªåƒç´ è¿›è¡Œä¸€äº›åˆ—æ“ä½œ. å·ç§¯æ ¸é€šå¸¸æ˜¯ä¸€ä¸ªå››æ–¹å½¢ç½‘æ ¼ç»“æ„,è¯¥åŒºåŸŸçš„æ¯ä¸ªæ–¹æ ¼éƒ½æœ‰ä¸€ä¸ªæƒé‡å€¼.å½“å¯¹å›¾åƒä¸­çš„æŸä¸ªåƒç´ è¿›è¡Œå·ç§¯æ—¶,æˆ‘ä»¬ä¼šæŠŠå·ç§¯æ ¸çš„ä¸­å¿ƒç½®äºè¯¥åƒç´ ä¸Š. å¦‚å›¾æ‰€ç¤º,ç¿»è½¬æ ¸ä¹‹åå†ä»¥æ­¤è®¡ç®—ä½•ç§æ¯ä¸ªå…ƒç´ å’Œå…¶è¦†ç›–çš„å›¾åƒçš„åƒç´ å€¼çš„ä¹˜ç§¯å¹¶æ±‚å’Œ,å¾—åˆ°çš„ç»“æœå°±æ˜¯è¯¥ä½ç½®çš„æ–°åƒç´ å€¼. è¿™æ ·çš„æ“ä½œè™½ç„¶ç®€å•,ä½†å¯ä»¥å®ç°å¾ˆå¤šå¸¸è§çš„å›¾åƒå¤„ç†æ•ˆæœ,å¦‚å›¾åƒæ¨¡ç³Š,è¾¹ç¼˜æ£€æµ‹ç­‰. ä¾‹å¦‚,å¦‚æœæˆ‘ä»¬æƒ³å¤šå›¾åƒè¿›è¡Œå‡å€¼æ¨¡ç³Š,å¯ä»¥ä½¿ç”¨ä¸€ä¸ª3x3çš„å·ç§¯æ ¸,æ ¸å†…æ¯ä¸ªå…ƒç´ çš„å€¼å‡ä¸º1/9. Â§ å¸¸è§çš„è¾¹ç¼˜æ£€æµ‹ç®—å­ å¦‚æœç›¸é‚»åƒç´ ä¹‹é—´å­˜åœ¨å·®åˆ«æ˜æ˜¾çš„é¢œè‰²,äº®åº¦,çº¹ç†ç­‰å±æ€§,æˆ‘ä»¬ä¼šè®¤ä¸ºå®ƒä»¬ä¹‹é—´åº”è¯¥æœ‰ä¸€æ¡è¾¹ç•Œ. è¿™ç§ç›¸é‚»åƒç´ ä¹‹é—´çš„æ’å€¼å¯ä»¥ç”¨æ¢¯åº¦(gradient)æ¥è¡¨ç¤º,å¯ä»¥æƒ³è±¡å¾—åˆ°,è¾¹ç¼˜å¤„çš„æ¢¯åº¦ç»å¯¹å€¼ä¼šæ¯”è¾ƒå¤§. åŸºäºè¿™æ ·çš„ç†è§£,æœ‰å‡ ç§ä¸åŒçš„è¾¹ç¼˜æ£€æµ‹ç®—å­(å³ç”¨äºè¾¹ç¼˜æ£€æµ‹çš„å·ç§¯æ ¸)è¢«å…ˆåæå‡ºæ¥. å·ç§¯æ“ä½œçš„ç¥å¥‡ä¹‹å¤„åœ¨äºå·ç§¯æ ¸. å®ƒä»¬éƒ½åŒ…å«ä¸¤ä¸ªæ–¹å‘çš„å·ç§¯æ ¸,åˆ†åˆ«ç”¨äºæ£€æµ‹æ°´å¹³æ–¹å‘å’Œç«–ç›´æ–¹å‘ä¸Šçš„è¾¹ç¼˜ä¿¡æ¯. åœ¨è¿›è¡Œè¾¹ç¼˜æ£€æµ‹æ—¶,æˆ‘ä»¬éœ€è¦å¯¹æ¯ä¸ªåƒç´ åˆ†åˆ«è¿›è¡Œä¸€æ¬¡å·ç§¯è®¡ç®—,å¾—åˆ°ä¸¤ä¸ªæ–¹å‘ä¸Šçš„æ¢¯åº¦å€¼G(x)å’ŒG(y),è€Œæ•´ä½“çš„æ¢¯åº¦å¯æŒ‰ä¸‹é¢çš„å…¬å¼è®¡ç®—è€Œå¾—: G = sqrt(G(x)**2 + G(y)**2) ç”±äºå¼€æ ¹å·æ“ä½œæ¯”è¾ƒå¤æ‚,å‡ºäºæ€§èƒ½è€ƒè™‘,æˆ‘ä»¬æœ‰æ—¶å€™ä¼šä½¿ç”¨ç»å¯¹å€¼æ“ä½œæ¥ä»£æ›¿å¼€æ ¹å·æ“ä½œ: G = |G(x)| + |G(y)| å¾—åˆ°æ¢¯åº¦Gå,æˆ‘ä»¬å°±å¯ä»¥æ®æ­¤æ¥åˆ¤æ–­å“ªäº›åƒç´ å¯¹åº”äº†è¾¹ç¼˜:æ¢¯åº¦è¶Šå¤§,è¶Šæœ‰å¯èƒ½æ˜¯è¾¹ç¼˜. Â§ å®è·µ: Sobelè¾¹ç¼˜æ£€æµ‹ç®—å­ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106Shader "Unity Shaders Book/Chapter 12/Edge Detection" &#123; Properties &#123; _MainTex ("Base (RGB)", 2D) = "white" &#123;&#125; _EdgeOnly ("Edge Only", Float) = 1.0 _EdgeColor ("Edge Color", Color) = (0, 0, 0, 1) _BackgroundColor ("Background Color", Color) = (1, 1, 1, 1) &#125; SubShader &#123; Pass &#123; ZTest Always Cull Off ZWrite Off CGPROGRAM #include "UnityCG.cginc" #pragma vertex vert #pragma fragment frag sampler2D _MainTex; // XXX_TexelSizeæ˜¯Unityä¸ºæˆ‘ä»¬æä¾›çš„è®¿é—®XXXçº¹ç†å¯¹åº”çš„æ¯ä¸ªçº¹ç´ çš„å¤§å°. // ç”±äºå·ç§¯éœ€è¦å¯¹ç›¸é‚»åŒºåŸŸå†…çš„çº¹ç†è¿›è¡Œé‡‡æ ·,å› æ­¤æˆ‘ä»¬éœ€è¦åˆ©ç”¨_MainTex_TexSizeæ¥è®¡ç®—å„ä¸ªç›¸é‚»åŒºåŸŸçš„çº¹ç†åæ ‡. uniform half4 _MainTex_TexelSize; fixed _EdgeOnly; fixed4 _EdgeColor; fixed4 _BackgroundColor; struct v2f &#123; float4 pos : SV_POSITION; // ä½æ•°ä¸º9çš„çº¹ç†æ•°ç»„,å¯¹åº”çš„æ˜¯ä½¿ç”¨Sobelç®—å­é‡‡æ ·æ˜¯éœ€è¦çš„9ä¸ªé‚»åŸŸçº¹ç†åæ ‡ half2 uv[9] : TEXCOORD0; &#125;; v2f vert(appdata_img v) &#123; v2f o; o.pos = UnityObjectToClipPos(v.vertex); half2 uv = v.texcoord; // _MainTex_TexelSize.xyå’Œç§»åŠ¨é‡ç›¸ä¹˜ä¹‹å,æ‰å¾—åˆ°çœŸæ­£çš„åæ ‡(å¤§æ¦‚è¿™ä¸ªæ„æ€) o.uv[0] = uv + _MainTex_TexelSize.xy * half2(-1, -1); o.uv[1] = uv + _MainTex_TexelSize.xy * half2(0, -1); o.uv[2] = uv + _MainTex_TexelSize.xy * half2(1, -1); o.uv[3] = uv + _MainTex_TexelSize.xy * half2(-1, 0); o.uv[4] = uv + _MainTex_TexelSize.xy * half2(0, 0); o.uv[5] = uv + _MainTex_TexelSize.xy * half2(1, 0); o.uv[6] = uv + _MainTex_TexelSize.xy * half2(-1, 1); o.uv[7] = uv + _MainTex_TexelSize.xy * half2(0, 1); o.uv[8] = uv + _MainTex_TexelSize.xy * half2(1, 1); return o; &#125; // å–äº®åº¦å€¼çš„å‡½æ•° fixed luminance(fixed4 color) &#123; return 0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b; &#125; // ä½¿ç”¨Sobelç®—å­å¯¹åŸå›¾è¿›è¡Œè¾¹ç¼˜æ£€æµ‹çš„å‡½æ•° half Sobel(v2f i) &#123; // æ°´å¹³å’Œç«–ç›´æ–¹å‘ä¸Šçš„å·ç§¯æ ¸ const half Gx[9] = &#123;-1, 0, 1, -2, 0, 2, -1, 0, 1&#125;; const half Gy[9] = &#123;-1, -2, -1, 0, 0, 0, 1, 2, 1&#125;; half texColor; half edgeX = 0; half edgeY = 0; // éå†â‘¨ä¸ªåƒç´  for (int it = 0; it &lt; 9; it++) &#123; // é‡‡æ ·ä¹‹åè®¡ç®—äº®åº¦å€¼ texColor = luminance(tex2D(_MainTex, i.uv[it])); // äº®åº¦å€¼ä¸å·ç§¯æ ¸å¯¹åº”çš„æƒé‡ç›¸ä¹˜,å åŠ è‡³å„è‡ªçš„æ¢¯åº¦å€¼ä¸Š edgeX += texColor * Gx[it]; edgeY += texColor * Gy[it]; &#125; // edgeè¶Šå°,æ¢¯åº¦è¶Šå¤§,è¯¥ç‚¹è¶Šå¯èƒ½æ˜¯è¾¹ç¼˜ half edge = 1 - abs(edgeX) - abs(edgeY); return edge; &#125; fixed4 frag(v2f i) : SV_Target &#123; half edge = Sobel(i); // æ··åˆ fixed4 withEdgeColor = lerp(_EdgeColor, tex2D(_MainTex, i.uv[4]), edge); fixed4 onlyEdgeColor = lerp(_EdgeColor, _BackgroundColor, edge); return lerp(withEdgeColor, onlyEdgeColor, _EdgeOnly); &#125; ENDCG &#125; &#125; FallBack Off&#125; éœ€è¦æ³¨æ„çš„æ˜¯,æœ¬ä¾‹ä¸­çš„è¾¹ç¼˜æ£€æµ‹ä»…ä»…åˆ©ç”¨äº†å±å¹•çš„é¢œè‰²ä¿¡æ¯,è€Œå®é™…åº”ç”¨ä¸­,ç‰©ä½“çš„çº¹ç†,é˜´å½±ç­‰ä¿¡æ¯å‡ä¼šå½±å“è¾¹ç¼˜æ£€æµ‹çš„ç»“æœ,ä½¿å¾—ç»“æœåŒ…å«è®¸å¤šéé¢„æœŸçš„æè¾¹. ä¸ºäº†å¾—åˆ°æ›´å‡†ç¡®çš„è¾¹ç¼˜å˜»å˜»,æˆ‘ä»¬å¾€å¾€ä¼šåœ¨å±å¹•çš„æ·±åº¦çº¹ç†å’Œæ³•çº¿çº¹ç†ä¸Šè¿›è¡Œè¾¹ç¼˜æ£€æµ‹.(å°†ä¼šåœ¨13ç« å®ç°) Â§ é«˜æ–¯æ¨¡ç³Š æ¨¡ç³Šçš„å®ç°æœ‰è®¸å¤šç§æ–¹æ³•,ä¾‹å¦‚å‡å€¼æ¨¡ç³Šå’Œä¸­å€¼æ¨¡ç³Š. å‡å€¼æ¨¡ç³ŠåŒæ ·ä½¿ç”¨äº†å·ç§¯æ“ä½œ,å®ƒåªç”¨çš„å·ç§¯æ ¸çš„å„ä¸ªå…ƒç´ å€¼éƒ½ç›¸ç­‰,ä¸”ç›¸åŠ ç­‰äº1. ä¹Ÿå°±æ˜¯è¯´,å·ç§¯åå¾—åˆ°çš„åƒç´ å€¼æ˜¯å…¶é‚»åŸŸä¸­çš„å„ä¸ªåƒç´ çš„å¹³å‡å€¼. è€Œä¸­å€¼æ¨¡ç³Šæ˜¯é€‰æ‹©é‚»åŸŸå†…å¯¹åº”æ‰€æœ‰åƒç´ æ’åºåçš„ä¸­å€¼æ›¿æ¢æ‰åŸæœ‰çš„é¢œè‰². ä¸€ä¸ªæ›´é«˜çº§çš„æ¨¡ç³Šæ–¹æ³•æ˜¯é«˜æ–¯æ¨¡ç³Š. Â§ é«˜æ–¯æ»¤æ³¢ é«˜æ–¯æ¨¡ç³ŠåŒæ ·ä½¿ç”¨äº†å·ç§¯è®¡ç®—,å®ƒä½¿ç”¨çš„å·ç§¯æ ¸åä¸ºé«˜æ–¯æ ¸. é«˜æ–¯æ ¸æ˜¯ä¸€ä¸ªæ­£æ–¹å½¢å¤§å°çš„æ»¤æ³¢æ ¸,å…¶ä¸­æ¯ä¸ªå…ƒç´ çš„è®¡ç®—éƒ½æ˜¯åŸºäºä¸‹é¢çš„é«˜æ–¯æ–¹ç¨‹: å…¶ä¸­,æ‰“ä¸å‡ºæ¥çš„é‚£ä¸ªæ˜¯æ ‡å‡†æ–¹å·®(ä¸€èˆ¬å–å€¼ä¸º1),x,yåˆ†åˆ«å¯¹åº”äº†å½“å‰ä½ç½®åˆ°å·ç§¯æ ¸ä¸­å¿ƒçš„æ•´æ•°è·ç¦». è¦æ„å»ºä¸€ä¸ªé«˜æ–¯æ ¸,æˆ‘ä»¬åªéœ€è¦è®¡ç®—é«˜æ–¯æ ¸ä¸­å„ä¸ªä½ç½®å¯¹åº”çš„é«˜æ–¯å€¼. ä¸ºäº†ä¿è¯æ»¤æ³¢åçš„å›¾åƒä¸ä¼šå˜æš—,æˆ‘ä»¬éœ€è¦å¯¹é«˜æ–¯æ ¸ä¸­çš„æƒé‡è¿›è¡Œå½’ä¸€åŒ–,å³è®©æ¯ä¸ªæƒé‡é™¤ä»¥æ‰€æœ‰æƒé‡çš„å’Œ,è¿™æ ·å¯ä»¥ä¿è¯æ‰€æœ‰æƒé‡çš„å’Œä¸º1. å› æ­¤,é«˜æ–¯å‡½æ•°ä¸­eå‰é¢çš„ç³»æ•°å®é™…ä¸ä¼šå¯¹ç»“æœæœ‰ä»»ä½•å½±å“. å¦‚å›¾æ˜¾ç¤ºçš„æ˜¯ä¸€ä¸ªæ ‡å‡†æ–¹å·®ä¸º1çš„5x5å¤§å°çš„é«˜æ–¯æ ¸ é«˜æ–¯æ–¹ç¨‹å¾ˆå¥½çš„æ¨¡æ‹Ÿäº†é‚»åŸŸæ¯ä¸ªåƒç´ å¯¹å½“å‰å¤„ç†åƒç´ çš„å½±å“ç¨‹åº¦â€“è·ç¦»è¶Šè¿‘,å½±å“è¶Šå¤§. é«˜æ–¯æ ¸ç»´åº¦è¶Šé«˜,æ¨¡ç³Šç¨‹åº¦è¶Šå¤§.é‡‡ç”¨ä¸€ä¸ªNxNçš„é«˜æ–¯æ ¸å¯¹å›¾åƒè¿›è¡Œå·ç§¯æ»¤æ³¢,å°±éœ€è¦NxNxWxH(Wå’ŒHåˆ†åˆ«æ˜¯å›¾åƒçš„å®½å’Œé«˜)æ¬¡çº¹ç†é‡‡æ ·.å½“Nçš„å¤§å°ä¸æ–­å¢åŠ æ—¶,é‡‡æ ·çš„æ¬¡æ•°ä¼šå˜å¾—éå¸¸å·¨å¤§. å¹¸è¿çš„æ˜¯,æˆ‘ä»¬å¯ä»¥å§è¿™ä¸ªäºŒç»´é«˜æ–¯å‡½æ•°æ‹†åˆ†æˆä¸¤ä¸ªä¸€ç»´å‡½æ•°.ä¹Ÿå°±æ˜¯è¯´,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªä¸€ç»´çš„é«˜æ–¯æ ¸è¿›è¡Œæ»¤æ³¢,å®ƒä»¬å¾—åˆ°çš„ç»“æœè·Ÿç›´æ¥ä½¿ç”¨äºŒç»´é«˜æ–¯æ ¸è¿›è¡Œæ»¤æ³¢æ˜¯ä¸€æ ·çš„,ä½†é‡‡æ ·æ¬¡æ•°åªéœ€è¦2xNxWxH. æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°,ä¸¤ä¸ªä¸€ç»´é«˜æ–¯æ ¸ä¸­åŒ…å«å¾ˆå¤šé‡å¤çš„æƒé‡,å®é™…ä¸Šæˆ‘ä»¬åªéœ€è¦è®¡ç®—ä¸‰ä¸ªæƒé‡å³å¯. Â§ å®è·µ: é«˜æ–¯æ¨¡ç³Š æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª5x5çš„é«˜æ–¯æ ¸å¯¹åŸå›¾è¿›è¡Œé«˜æ–¯æ¨¡ç³Š. æˆ‘ä»¬å°†å…ˆåè°ƒç”¨ä¸¤ä¸ªPass,ç¬¬ä¸€ä¸ªPasså°†ä¼šä½¿ç”¨ç«–ç›´æ–¹å‘çš„ä¸€ç»´é«˜æ–¯æ ¸å¯¹å›¾åƒè¿›è¡Œæ»¤æ³¢,ç¬¬äºŒä¸ªPasså†ä½¿ç”¨æ°´å¹³æ–¹å‘çš„ä¸€ç»´é«˜æ–¯æ ¸å¯¹å›¾åƒè¿›è¡Œæ»¤æ³¢,å¾—åˆ°æœ€ç»ˆå›¾åƒ. æˆ‘ä»¬è¿˜å°†åˆ©ç”¨å›¾åƒç¼©æ”¾æ¥è¿›ä¸€æ­¥æé«˜æ€§èƒ½,å¹¶é€šè¿‡è°ƒæ•´é«˜æ–¯æ»¤æ³¢çš„æ¬¡æ•°æ¥æ§åˆ¶æ¨¡ç³Šç¨‹åº¦(æ¬¡æ•°è¶Šå¤š,å›¾åƒè¶Šæ¨¡ç³Š) ç»‘å®šåœ¨æ‘„åƒå¤´çš„C#ä»£ç : 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273using UnityEngine;using System.Collections;public class GaussianBlur : PostEffectsBase &#123; public Shader gaussianBlurShader; private Material gaussianBlurMaterial = null; public Material material &#123; get &#123; gaussianBlurMaterial = CheckShaderAndCreateMaterial(gaussianBlurShader, gaussianBlurMaterial); return gaussianBlurMaterial; &#125; &#125; // è¿­ä»£æ¬¡æ•°,æ¬¡æ•°è¶Šå¤š,æ¨¡ç³Šç¨‹åº¦è¶Šé«˜ [Range(0, 4)] public int iterations = 3; // æ¨¡ç³ŠèŒƒå›´å’Œç¼©æ”¾ç³»æ•° // è¿™ä¸¤é¡¹æ˜¯ä¸ºæ€§èƒ½è€ƒè™‘çš„ // æ¨¡ç³ŠèŒƒå›´è¶Šå¤§,æ¨¡ç³Šç¨‹åº¦è¶Šé«˜,ä½†é‡‡æ ·æ•°ä¸ä¼šå—åˆ°å½±å“.ä½†è¿‡å¤§çš„æ¨¡ç³ŠèŒƒå›´å¯èƒ½ä¼šé€ æˆè™šå½±. // ç¼©æ”¾ç³»æ•°è¶Šå¤§,éœ€è¦å¤„ç†çš„åƒç´ æ•°è¶Šå°‘,åŒæ—¶ä¹Ÿè¿›ä¸€æ­¥æé«˜æ¨¡ç³Šç¨‹åº¦,ä½†è¿‡å¤§å¯èƒ½ä¼šæ˜¯å›¾åƒåƒç´ åŒ–. [Range(0.2f, 3.0f)] public float blurSpread = 0.6f; [Range(1, 8)] public int downSample = 2; void OnRenderImage (RenderTexture src, RenderTexture dest) &#123; if (material != null) &#123; //å…ˆåˆ©ç”¨ç¼©æ”¾å¯¹å›¾åƒè¿›è¡Œé™é‡‡æ · int rtW = src.width/downSample; int rtH = src.height/downSample; // ä¸ä¹‹å‰ä¸åŒ,è¿™é‡Œä½¿ç”¨äº†RenderTexture.GetTemporaryå‡½æ•°åˆ†é…äº†ä¸€å—ç¼“å†²åŒº. // è¿™æ˜¯å› ä¸º,é«˜æ–¯æ¨¡ç³Šéœ€è¦è°ƒç”¨ä¸¤ä¸ªPass,æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€å—ä¸­é—´ç¼“å­˜æ¥å­˜å‚¨ç¬¬ä¸€ä¸ªPassæ‰§è¡Œå®Œæ¯•åå¾—åˆ°çš„æ¨¡ç³Šç»“æœ. // ç¼“å†²åŒºçš„å®½é«˜ä¸ºç¼©æ”¾åçš„å®½é«˜ RenderTexture buffer0 = RenderTexture.GetTemporary(rtW, rtH, 0); buffer0.filterMode = FilterMode.Bilinear; Graphics.Blit(src, buffer0); // è¿­ä»£å¤šæ¬¡ for (int i = 0; i &lt; iterations; i++) &#123; material.SetFloat("_BlurSize", 1.0f + i * blurSpread); RenderTexture buffer1 = RenderTexture.GetTemporary(rtW, rtH, 0); // ç¬¬ä¸€ä¸ªPass Graphics.Blit(buffer0, buffer1, material, 0); RenderTexture.ReleaseTemporary(buffer0); buffer0 = buffer1; buffer1 = RenderTexture.GetTemporary(rtW, rtH, 0); // ç¬¬äºŒä¸ªPass Graphics.Blit(buffer0, buffer1, material, 1); RenderTexture.ReleaseTemporary(buffer0); buffer0 = buffer1; &#125; Graphics.Blit(buffer0, dest); RenderTexture.ReleaseTemporary(buffer0); &#125; else &#123; Graphics.Blit(src, dest); &#125; &#125;&#125; Shaderä»£ç : 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103Shader "Unity Shaders Book/Chapter 12/Gaussian Blur" &#123; Properties &#123; _MainTex ("Base (RGB)", 2D) = "white" &#123;&#125; _BlurSize ("Blur Size", Float) = 1.0 &#125; SubShader &#123; // CGINCLUDEå’ŒENDCGå®šä¹‰çš„ä»£ç ä¸éœ€è¦åŒ…å«åœ¨ä»»ä½•Passä¸­,åœ¨ä½¿ç”¨æ—¶,åªéœ€åœ¨Passä¸­æŒ‡å®šéœ€è¦çš„é¡¶ç‚¹å’Œç‰‡å…ƒç€è‰²å™¨å³å¯. // ç”±äºé«˜æ–¯æ¨¡ç³Šéœ€è¦å®šä¹‰ä¸¤ä¸ªPass,ä½†ä»–ä»¬ä½¿ç”¨çš„ç‰‡å…ƒç€è‰²å™¨çš„ä»£ç æ˜¯å®Œå…¨ç›¸åŒçš„,ä½¿ç”¨CGINCLUDEå¯ä»¥é¿å…æˆ‘ä»¬ç¼–å†™ä¸¤ä¸ªå®Œå…¨ä¸€æ ·çš„fragå‡½æ•° CGINCLUDE #include "UnityCG.cginc" sampler2D _MainTex; half4 _MainTex_TexelSize; float _BlurSize; struct v2f &#123; float4 pos : SV_POSITION; half2 uv[5]: TEXCOORD0; &#125;; // ç«–ç›´æ–¹å‘ä¸Šçš„é¡¶ç‚¹ç€è‰²å™¨ä»£ç  v2f vertBlurVertical(appdata_img v) &#123; v2f o; o.pos = UnityObjectToClipPos(v.vertex); half2 uv = v.texcoord; o.uv[0] = uv; // å’Œ_BlurSizeç›¸ä¹˜æ§åˆ¶æ§åˆ¶é‡‡æ ·è·ç¦». o.uv[1] = uv + float2(0.0, _MainTex_TexelSize.y * 1.0) * _BlurSize; o.uv[2] = uv - float2(0.0, _MainTex_TexelSize.y * 1.0) * _BlurSize; o.uv[3] = uv + float2(0.0, _MainTex_TexelSize.y * 2.0) * _BlurSize; o.uv[4] = uv - float2(0.0, _MainTex_TexelSize.y * 2.0) * _BlurSize; return o; &#125; // æ°´å¹³æ–¹å‘ä¸Šçš„é¡¶ç‚¹ç€è‰²å™¨ä»£ç  v2f vertBlurHorizontal(appdata_img v) &#123; v2f o; o.pos = UnityObjectToClipPos(v.vertex); half2 uv = v.texcoord; o.uv[0] = uv; o.uv[1] = uv + float2(_MainTex_TexelSize.x * 1.0, 0.0) * _BlurSize; o.uv[2] = uv - float2(_MainTex_TexelSize.x * 1.0, 0.0) * _BlurSize; o.uv[3] = uv + float2(_MainTex_TexelSize.x * 2.0, 0.0) * _BlurSize; o.uv[4] = uv - float2(_MainTex_TexelSize.x * 2.0, 0.0) * _BlurSize; return o; &#125; fixed4 fragBlur(v2f i) : SV_Target &#123; // æˆ‘ä»¬åªéœ€è®°å½•3ä¸ªé«˜æ–¯æƒé‡ float weight[3] = &#123;0.4026, 0.2442, 0.0545&#125;; fixed3 sum = tex2D(_MainTex, i.uv[0]).rgb * weight[0]; for (int it = 1; it &lt; 3; it++) &#123; sum += tex2D(_MainTex, i.uv[it*2-1]).rgb * weight[it]; sum += tex2D(_MainTex, i.uv[it*2]).rgb * weight[it]; &#125; return fixed4(sum, 1.0); &#125; ENDCG ZTest Always Cull Off ZWrite Off Pass &#123; // ä¸ºPasså®šä¹‰åå­—,å¯ä»¥åœ¨å…¶ä»–Shaderä¸­ç›´æ¥é€šè¿‡å®ƒä»¬çš„åå­—æ¥ä½¿ç”¨è¯¥Shader,è€Œä¸ç”¨ç¼–å†™é‡å¤çš„ä»£ç  NAME "GAUSSIAN_BLUR_VERTICAL" CGPROGRAM #pragma vertex vertBlurVertical #pragma fragment fragBlur ENDCG &#125; Pass &#123; NAME "GAUSSIAN_BLUR_HORIZONTAL" CGPROGRAM #pragma vertex vertBlurHorizontal #pragma fragment fragBlur ENDCG &#125; &#125; FallBack "Diffuse"&#125; Â§ Bloomæ•ˆæœ Bloomæ˜¯æ¸¸æˆä¸­å¸¸è§çš„ä¸€ç§å±å¹•æ•ˆæœ,è¿™ç§ç‰¹æ•ˆå¯ä»¥æ¨¡æ‹ŸçœŸå®æ‘„åƒæœºçš„ä¸€ç§å›¾åƒæ•ˆæœ,å®ƒè®©ç”»é¢ä¸­è¾ƒäº®çš„åŒºåŸŸ&quot;æ‰©æ•£&quot;åˆ°å‘¨å›´çš„åŒºåŸŸ,é€ æˆä¸€ç§æœ¦èƒ§çš„æ„Ÿè§‰. å®ç°åŸç†: æˆ‘ä»¬é¦–å…ˆæ ¹æ®ä¸€ä¸ªé˜ˆå€¼æå–å‡ºå›¾åƒä¸­è¾ƒäº®çš„åŒºåŸŸ,æŠŠä»–ä»¬å­˜å‚¨åœ¨ä¸€å¼ çº¹ç†ä¸­,å†åˆ©ç”¨é«˜æ–¯æ¨¡ç³Šå¯¹è¿™å¼ æ¸²æŸ“çº¹ç†è¿›è¡Œæ¨¡ç³Šå¤„ç†,æ¨¡æ‹Ÿå…‰çº¿æ‰©æ•£çš„æ•ˆæœ,æœ€åå†å°†å…¶å’ŒåŸå›¾åƒè¿›è¡Œæ··åˆ,å¾—åˆ°æœ€ç»ˆæ•ˆæœ.]]></content>
      <categories>
        <category>shader</category>
      </categories>
      <tags>
        <tag>unity</tag>
        <tag>shader</tag>
        <tag>ã€Šshaderå…¥é—¨ç²¾è¦ã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ²¹ç®¡ç›´æ’­è½¬æ¨æµåˆ°Bç«™]]></title>
    <url>%2Fyoutube-live-2-bili%2F</url>
    <content type="text"><![CDATA[ffmpegä¸‹è½½åœ°å€: http://ffmpeg.zeranoe.com/builds/ youtube-dlä¸‹è½½åœ°å€: http://www.youtube-dl.org/ 123456789101112131415161718192021222324252627282930import os,platformdef liveTrans(fromPath, toPath, ffmpegPath, youtubeDlPATH): getRealFromPathCMD = youtubeDlPATH + " -g " + fromPath realFromPath = os.popen(getRealFromPathCMD).read().strip() if platformName[:7] == "Windows": postCMD = ffmpegPath + ' -i "' + realFromPath + '" -vcodec copy -acodec aac -f flv "' + toPath + '"' else: postCMD = ffmpegPath + ' -i "' + realFromPath + '" -c:v copy -c:a aac -b:a 320k -ar 44100 -strict -2 -f flv "' + toPath + '"' os.system(postCMD)if __name__ == '__main__': platformName = platform.platform() if platformName[:7] == "Windows": ffmpegPATH = r"D:\ProgramFiles\ffmpeg\bin\ffmpeg.exe" youtubeDlPATH = r"D:\ProgramFiles\ffmpeg\bin\youtube-dl.exe" else: ffmpegPATH = "ffmpeg" youtubeDlPATH = "youtube-dl" ffmpegPath = "ffmpeg" youtubeDlPath = "youtube-dl" liveTrans(fromPath="frompath here", toPath="toPath here", ffmpegPath=ffmpegPATH, youtubeDlPATH=youtubeDlPATH) emm,ç»“æœwindowsä¸‹æŠ¥é”™è¿æ¥ä¸ä¸Šyoutubeé‚£ä¸ªæµçš„é“¾æ¥â€¦æ–°ç§Ÿçš„centoså€’æ˜¯å¯ä»¥â€¦ä¸çŸ¥é“æ˜¯windowsä¸‹çš„ffmpegå‘½ä»¤é”™äº†è¿˜æ˜¯é‚£ä¸ªæµä¸èµ°ä»£ç†â€¦ centosä¸‹å®‰è£…ffmpegå’Œyoutube-dl: 12345678yum install -y epel-releasesudo rpm â€“import /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7sudo rpm â€“import http://li.nux.ro/download/nux/RPM-GPG-KEY-nux.rosudo rpm -Uvh http://li.nux.ro/download/nux/dextop/el7/x86_64/nux-dextop-release-0-1.el7.nux.noarch.rpmyum install -y ffmpegwget http://youtube-dl.org/latest/youtube-dl -O /usr/local/bin/youtube-dlchmod a+x /usr/local/bin/youtube-dl ffmpegæ”¯æŒå¤šä¸ªè¾“å‡º,linuxä¸‹postCMDæ”¹ä¸ºè¿™ä¸ª,è¾¹æ¨æµè¾¹ä¿å­˜åˆ°æœ¬åœ°. 1postCMD = ffmpegPath + &apos; -i &quot;&apos; + realFromPath + &apos;&quot; -c:v copy -c:a aac -b:a 320k -ar 44100 -strict -2 -f flv &quot;&apos; + toPath + &apos;&quot;&apos; + &apos; -c:v copy -c:a aac -b:a 320k -ar 44100 -strict -2 -f flv &quot;./tmp.flv&quot;&apos; å‚è€ƒ: https://www.bilibili.com/read/cv1083415/ é¡ºä¾¿,ffmpegè£å‰ªè§†é¢‘(æŒ‡æ—¶é—´ä¸Šè£å‰ª): 1./ffmpeg -ss 05:00 -i inputFilePath -c copy outputFilePath]]></content>
  </entry>
  <entry>
    <title><![CDATA[ã€Šshaderå…¥é—¨ç²¾è¦ã€‹ç¬”è®°-ç¬¬11ç« -è®©ç”»é¢åŠ¨èµ·æ¥]]></title>
    <url>%2Fshader-r-moving%2F</url>
    <content type="text"><![CDATA[Â§ Unity Shaderä¸­çš„å†…ç½®å˜é‡(æ—¶é—´ç¯‡) åç§° ç±»å‹ æè¿° _Time float4 tæ˜¯è‡ªè¯¥åœºæ™¯åŠ è½½å¼€å§‹æ‰€ç»è¿‡çš„æ—¶é—´,4ä¸ªåˆ†é‡åˆ†åˆ«æ˜¯(t/20, t, 2t, 3t) _SinTime float4 tæ˜¯æ—¶é—´çš„æ­£å¼¦å€¼,4ä¸ªåˆ†é‡çš„å€¼åˆ†åˆ«æ˜¯(t/8, t/4, t/2, t) _CosTime float4 tæ˜¯æ—¶é—´çš„ä½™å¼¦å€¼,4ä¸ªåˆ†é‡çš„å€¼åˆ†åˆ«æ˜¯(t/8, t/4, t/2, t) unity_DeltaTime float4 dtæ˜¯æ—¶é—´å¢é‡,4ä¸ªåˆ†é‡åˆ†åˆ«æ˜¯(dt, 1/dt, smoothDt, 1/smoothDt) Â§ çº¹ç†åŠ¨ç”» çº¹ç†åŠ¨ç”»åœ¨æ¸¸æˆä¸­çš„åº”ç”¨éå¸¸å¹¿æ³›.å°¤å…¶åœ¨å„ç§èµ„æºéƒ½æ¯”è¾ƒå±€é™çš„ç§»åŠ¨å¹³å°ä¸Š,æˆ‘ä»¬å¾€å¾€ä¼šä½¿ç”¨çº¹ç†åŠ¨ç”»æ¥ä»£æ›¿å¤æ‚çš„ç²’å­ç³»ç»Ÿç­‰æ¨¡æ‹Ÿå„ç§åŠ¨ç”»æ•ˆæœ Â§ åºåˆ—å¸§åŠ¨ç”» æœ€å¸¸è§çš„çº¹ç†åŠ¨ç”»ä¹‹ä¸€å°±æ˜¯åºåˆ—å¸§åŠ¨ç”».åºåˆ—å¸§åŠ¨ç”»çš„åŸç†éå¸¸ç®€å•,å®ƒåƒæ”¾ç”µå½±ä¸€æ ·,ä¾æ¬¡æ’­æ”¾ä¸€ç³»åˆ—å…³é”®å¸§å›¾åƒ. å®ƒçš„ä¼˜ç‚¹åœ¨äºçµæ´»æ€§æå¼º,ä¸éœ€è¦ä»»ä½•ç‰©ç†è®¡ç®—å°±èƒ½å¾—åˆ°éå¸¸ç»†è…»çš„åŠ¨ç”»æ•ˆæœ. æƒ³è¦å®ç°åºåˆ—å¸§åŠ¨ç”»,æˆ‘ä»¬å…ˆè¦æä¾›ä¸€å¼ åŒ…å«äº†å…³é”®å¸§å›¾åƒçš„å›¾åƒ. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172Shader "Unlit/11.2"&#123; Properties &#123; _Color("Color Tint", Color) = (1, 1, 1, 1) _MainTex ("Image Sequence", 2D) = "white" &#123;&#125; // æ°´å¹³æ–¹å‘å’Œç«–ç›´æ–¹å‘åŒ…å«çš„å…³é”®å¸§çš„ä¸ªæ•° _HorizontalAmount ("Horizontal Amount", Float) = 4.0 _VerticalAmount ("Vertical Amount",Float) = 4.0 _Speed("Speed",Range(1, 100)) = 30 &#125; SubShader &#123; Tags &#123; "RenderType"="Transparent" "Queue"="Transparent" "IgnoreProjector"="True" &#125; Pass &#123; Tags &#123;"LightMode"="ForwardBase"&#125; ZWrite Off Blend SrcAlpha OneMinusSrcAlpha CGPROGRAM #pragma vertex vert #pragma fragment frag #include "UnityCG.cginc" fixed4 _Color; sampler2D _MainTex; float4 _MainTex_ST; float _HorizontalAmount; float _VerticalAmount; float _Speed; struct a2v &#123; float4 vertex : POSITION; float2 texcoord : TEXCOORD0; &#125;; struct v2f &#123; float4 pos : SV_POSITION; float2 uv : TEXCOORD0; &#125;; v2f vert (a2v v) &#123; v2f o; o.pos = UnityObjectToClipPos(v.vertex); o.uv = TRANSFORM_TEX(v.texcoord, _MainTex); return o; &#125; fixed4 frag(v2f i) : SV_TARGET &#123; float time = floor(_Time.y * _Speed); float row = floor(time / _HorizontalAmount); float column = time - row * _HorizontalAmount; half2 uv = i.uv + half2(column, -row); uv.x /= _HorizontalAmount; uv.y /= _VerticalAmount; fixed4 c = tex2D(_MainTex, uv); c.rgb *= _Color; return c; &#125; ENDCG &#125; &#125;&#125; Â§ æ»šåŠ¨çš„èƒŒæ™¯ å¾ˆå¤š2Dæ¸¸æˆéƒ½ä½¿ç”¨äº†ä¸åŒçš„æ»šåŠ¨èƒŒæ™¯æ¥æ¨¡æ‹Ÿæ¸¸æˆè§’è‰²åœ¨åœºæ™¯ä¸­çš„ç©¿æ¢­.è¿™äº›èƒŒæ™¯å¾€å¾€åŒ…å«äº†å¤šä¸ªå±‚æ¥æ¨¡æ‹Ÿä¸€ç§è§†å·®æ•ˆæœ.è€Œè¿™äº›èƒŒæ™¯çš„å®ç°å¾€å¾€å°±æ˜¯åˆ©ç”¨äº†çº¹ç†åŠ¨ç”». 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384Shader "Unity Shaders Book/Chapter 11/Water" &#123; Properties &#123; // æ²³æµçº¹ç† _MainTex ("Main Tex", 2D) = "white" &#123;&#125; // ä¸»ä½“é¢œè‰² _Color ("Color Tint", Color) = (1, 1, 1, 1) // æ³¢åŠ¨å¹…åº¦ _Magnitude ("Distortion Magnitude", Float) = 1 // æ³¢åŠ¨é¢‘ç‡ _Frequency ("Distortion Frequency", Float) = 1 // æ³¢é•¿å€’æ•°(è¿™ä¸ªå€¼è¶Šå¤§,æ³¢é•¿è¶Šå°) _InvWaveLength ("Distortion Inverse Wave Length", Float) = 10 // çº¹ç†çš„ç§»åŠ¨é€Ÿåº¦ _Speed ("Speed", Float) = 0.5 &#125; SubShader &#123; // ä¸€äº›SubShaderåœ¨ä½¿ç”¨Unityæ‰¹å¤„ç†æ—¶ä¼šå‡ºç°é—®é¢˜,è¿™æ˜¯å¯ä»¥é€šè¿‡DisableBatchingæ ‡ç­¾æŒ‡æ˜æ˜¯å¦å¯¹è¯¥SubShaderä½¿ç”¨æ‰¹å¤„ç†. // æ‰¹å¤„ç†ä¼šåˆå¹¶æ‰€æœ‰ç›¸å…³çš„æ¨¡å‹,è€Œè¿™äº›æ¨¡å‹å„è‡ªçš„æ¨¡å‹ç©ºé—´å°±ä¼šä¸¢å¤±.è€Œé¡¶ç‚¹åŠ¨ç”»éœ€è¦åœ¨ç‰©ä½“çš„æ¨¡å‹ç©ºé—´ä¸‹è¿›è¡Œåç§». Tags &#123;"Queue"="Transparent" "IgnoreProjector"="True" "RenderType"="Transparent" "DisableBatching"="True"&#125; Pass &#123; Tags &#123; "LightMode"="ForwardBase" &#125; ZWrite Off Blend SrcAlpha OneMinusSrcAlpha Cull Off CGPROGRAM #pragma vertex vert #pragma fragment frag #include "UnityCG.cginc" sampler2D _MainTex; float4 _MainTex_ST; fixed4 _Color; float _Magnitude; float _Frequency; float _InvWaveLength; float _Speed; struct a2v &#123; float4 vertex : POSITION; float4 texcoord : TEXCOORD0; &#125;; struct v2f &#123; float4 pos : SV_POSITION; float2 uv : TEXCOORD0; &#125;; v2f vert(a2v v) &#123; v2f o; float4 offset; offset.yzw = float3(0.0, 0.0, 0.0); offset.x = sin(_Frequency * _Time.y + v.vertex.x * _InvWaveLength + v.vertex.y * _InvWaveLength + v.vertex.z * _InvWaveLength) * _Magnitude; o.pos = UnityObjectToClipPos(v.vertex + offset); o.uv = TRANSFORM_TEX(v.texcoord, _MainTex); o.uv += float2(0.0, _Time.y * _Speed); return o; &#125; fixed4 frag(v2f i) : SV_Target &#123; fixed4 c = tex2D(_MainTex, i.uv); c.rgb *= _Color.rgb; return c; &#125; ENDCG &#125; &#125; FallBack "Transparent/VertexLit"&#125; Â§ å¹¿å‘Šç‰Œ å¦ä¸€ç§å¸¸è§çš„é¡¶ç‚¹åŠ¨ç”»å°±æ˜¯å¹¿å‘Šç‰ŒæŠ€æœ¯(Billboarding). å¹¿å‘Šç‰ŒæŠ€æœ¯ä¼šæ ¹æ®è§†è§’æ–¹å‘æ¥æ—‹è½¬ä¸€ä¸ªè¢«çº¹ç†ç€è‰²çš„å¤šè¾¹å½¢(é€šå¸¸å°±æ˜¯ç®€å•çš„å››è¾¹å½¢,è¿™ä¸ªå¤šè¾¹å½¢å°±æ˜¯å¹¿å‘Šç‰Œ),ä½¿å¾—å¤šè¾¹å½¢çœ‹èµ·æ¥å¥½åƒæ€»é¢å¯¹ç€æ‘„åƒæœº. å¹¿å‘Šç‰ŒæŠ€æœ¯çš„æœ¬è´¨å°±æ˜¯æ„å»ºæ—‹è½¬çŸ©é˜µ,è€Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªçŸ©é˜µéœ€è¦ä¸‰ä¸ªåŸºå‘é‡. å¹¿å‘Šç‰ŒæŠ€æœ¯ä½¿ç”¨çš„åŸºå‘é‡é€šå¸¸å°±æ˜¯è¡¨é¢æ³•çº¿(normal),æŒ‡å‘ä¸Šçš„æ–¹å‘ä»¥åŠæŒ‡å‘å³çš„æ–¹å‘. é™¤æ­¤ä¹‹å¤–,æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªé”šç‚¹(anchor location),è¿™ä¸ªé”šç‚¹åœ¨æ—‹è½¬çš„è¿‡ç¨‹ä¸­æ˜¯å›ºå®šä¸å˜çš„,ä»¥æ­¤æ¥ç¡®å®šå¤šè¾¹å½¢åœ¨ç©ºé—´ä¸­çš„ä½ç½®. å¹¿å‘Šç‰ŒæŠ€æœ¯çš„éš¾ç‚¹åœ¨äº,å¦‚ä½•æ ¹æ®éœ€æ±‚æ¥æ„å»º3ä¸ªç›¸äº’æ­£äº¤çš„åŸºå‘é‡. è®¡ç®—è¿‡ç¨‹é€šå¸¸æ˜¯,æˆ‘ä»¬é¦–å…ˆä¼šé€šè¿‡åˆå§‹è®¡ç®—å¾—åˆ°ç›®æ ‡çš„è¡¨é¢æ³•çº¿(ä¾‹å¦‚è§†è§’æ–¹å‘)å’ŒæŒ‡å‘ä¸Šçš„æ–¹å‘,è€Œä¸¤è€…å¾€å¾€æ˜¯ä¸å‚ç›´çš„.ä½†æ˜¯,ä¸¤è€…å…¶ä¸­ä¹‹ä¸€æ˜¯å›ºå®šçš„,ä¾‹å¦‚æ¨¡æ‹Ÿè‰ä¸›æ—¶,æˆ‘ä»¬å¸Œæœ›å¹¿å‘Šç‰Œçš„æŒ‡å‘ä¸Šçš„æ–¹å‘æ°¸è¿œæ˜¯(0, 1, 0),è€Œæ³•çº¿æ–¹å‘åº”è¯¥éšè§†è§’å˜åŒ–;è€Œå½“æ¨¡æ‹Ÿç²’å­æ•ˆæœæ—¶,æˆ‘ä»¬å¸Œæœ›å¹¿å‘Šç‰Œçš„æ³•çº¿æ–¹å‘æ˜¯å›ºå®šçš„,å³æ€»æŒ‡å‘è§†è§’æ–¹å‘,æŒ‡å‘ä¸Šçš„æ–¹å‘åˆ™å¯ä»¥å‘ç”Ÿå˜åŒ–. æˆ‘ä»¬å‡è®¾æ³•çº¿æ–¹å‘æ˜¯å›ºå®šçš„,é¦–å…ˆ,æˆ‘ä»¬æ ¹æ®åˆå§‹çš„è¡¨é¢æ³•çº¿å’ŒæŒ‡å‘ä¸Šçš„æ–¹å‘æ¥è®¡ç®—ç›®æ ‡æ–¹å‘å’ŒæŒ‡å‘å³çš„æ–¹å‘(é€šè¿‡å‰ç§¯æ“ä½œ): right = up X normal å¯¹å…¶å½’ä¸€åŒ–å,å†ç”±æ³•çº¿æ–¹å‘å’ŒæŒ‡å‘å³çš„æ–¹å‘è®¡ç®—å‡ºæ­£äº¤çš„æŒ‡å‘ä¸Šçš„æ–¹å‘: upâ€™ = normal X right å¦‚æ­¤,æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ç”¨äºæ—‹è½¬çš„ä¸‰ä¸ªæ­£äº¤åŸºäº†.ä¸Šå›¾ç»™å‡ºäº†è®¡ç®—è¿‡ç¨‹çš„æ¼”ç¤º. å¦‚æœæŒ‡å‘ä¸Šçš„æ–¹å‘æ˜¯å›ºå®šçš„,è®¡ç®—è¿‡ç¨‹ä¹Ÿæ˜¯ç±»ä¼¼. Â§ å®è·µ: å¹¿å‘Šç‰Œ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475Shader "Unity Shaders Book/Chapter 11/Billboard" &#123; Properties &#123; _MainTex ("Main Tex", 2D) = "white" &#123;&#125; _Color ("Color Tint", Color) = (1, 1, 1, 1) _VerticalBillboarding ("Vertical Restraints", Range(0, 1)) = 1 &#125; SubShader &#123; Tags &#123;"Queue"="Transparent" "IgnoreProjector"="True" "RenderType"="Transparent" "DisableBatching"="True"&#125; Pass &#123; Tags &#123; "LightMode"="ForwardBase" &#125; ZWrite Off Blend SrcAlpha OneMinusSrcAlpha Cull Off CGPROGRAM #pragma vertex vert #pragma fragment frag #include "Lighting.cginc" sampler2D _MainTex; float4 _MainTex_ST; fixed4 _Color; fixed _VerticalBillboarding; struct a2v &#123; float4 vertex : POSITION; float4 texcoord : TEXCOORD0; &#125;; struct v2f &#123; float4 pos : SV_POSITION; float2 uv : TEXCOORD0; &#125;; v2f vert (a2v v) &#123; v2f o; float3 center = float3(0, 0, 0); // è·å–æ‘„åƒæœºä½ç½® float3 viewer = mul(unity_WorldToObject,float4(_WorldSpaceCameraPos, 1)); // ç›®æ ‡æ³•çº¿ float3 normalDir = viewer - center; // _VerticalBillboarding è°ƒæ•´å›ºå®šæ³•çº¿è¿˜æ˜¯å›ºå®šæŒ‡å‘ä¸Š // å½“è¯¥å€¼ä¸º1æ—¶,å›ºå®šæ³•çº¿,ä¸º1æ—¶,å›ºå®šå‘ä¸Šæ–¹å‘ä¸º(0, 1, 0) normalDir.y =normalDir.y * _VerticalBillboarding; normalDir = normalize(normalDir); // å¦‚æœç›®æ ‡æ³•çº¿è·Ÿå‘ä¸Šæ–¹å‘å¹³è¡Œ,ä¸¤è€…çš„å‰ç§¯åˆ™ä¼šå‡ºé”™. // è¿™é‡Œå¯¹ç›®æ ‡æ³•çº¿çš„åˆ†é‡yè¿›è¡Œäº†åˆ¤æ–­,ä»¥å¾—åˆ°åˆé€‚çš„å‘ä¸Šæ–¹å‘. float3 upDir = abs(normalDir.y) &gt; 0.999 ? float3(0, 0, 1) : float3(0, 1, 0); // æ±‚å‘ä¸Šæ–¹å‘å’Œç›®æ ‡æ³•çº¿çš„å‚çº¿,å³å‘å³å‘é‡,å¹¶å½’ä¸€åŒ– float3 rightDir = normalize(cross(upDir, normalDir)); // å› ä¸ºå›ºå®šäº†æ³•çº¿,æ‰€ä»¥é‡æ–°æ±‚å¾—å‘ä¸Šå‘é‡ upDir = normalize(cross(normalDir, rightDir)); float3 centerOffs = v.vertex.xyz - center; // è¿™é‡Œå¡äº†æˆ‘å¥½ä¸€ä¼šå„¿,ä»¥ä¸ºæ˜¯å†…ç§¯æ±‚æŠ•å½±æ¥ç€,ç„¶è€Œæ˜¯åˆ†é‡(ä¸€ä¸ªæ ‡é‡)å’Œæ­£äº¤åŸºç›¸ä¹˜ float3 localPos = center + rightDir * centerOffs.x + upDir * centerOffs.y + normalDir * centerOffs.z; o.pos = UnityObjectToClipPos(float4(localPos, 1)); o.uv = TRANSFORM_TEX(v.texcoord,_MainTex); return o; &#125; fixed4 frag (v2f i) : SV_Target &#123; fixed4 c = tex2D (_MainTex, i.uv); c.rgb *= _Color.rgb; return c; &#125; ENDCG &#125; &#125; FallBack "Transparent/VertexLit"&#125; Â§ æ³¨æ„äº‹é¡¹ Â§ æ‰¹å¤„ç† ä¹‹å‰è¯´çš„é¡¶ç‚¹åŠ¨ç”»å¿…é¡»å…³é—­æ‰¹å¤„ç†,ç„¶è€Œå…³é—­æ‰¹å¤„ç†å°±ä¼šå¢å¤šDraw Call,é™ä½æ€§èƒ½. å› æ­¤æˆ‘ä»¬åº”è¯¥å°½é‡é¿å…ä½¿ç”¨æ¨¡å‹ç©ºé—´ä¸‹ä¸€äº›ç»å¯¹ä½ç½®å’Œæ–¹å‘è¿›è¡Œè®¡ç®—. åœ¨å¹¿å‘Šç‰Œçš„ä¾‹å­ä¸­,ä¸ºäº†é¿å…æ˜¾å¼ä½¿ç”¨æ¨¡å‹ç©ºé—´çš„ä¸­å¿ƒç‚¹ä½œä¸ºé”šç‚¹,å¯ä»¥åˆ©ç”¨é¡¶ç‚¹é¢œè‰²æ¥å­˜å‚¨æ¯ä¸ªé¡¶ç‚¹åˆ°é”šç‚¹çš„è·ç¦»å€¼(smg),è¿™ç§åšæ³•åœ¨å•†ä¸šæ¸¸æˆé‡Œå¾ˆå¸¸è§. Â§ é˜´å½± åˆ°æ—¶å€™å†çœ‹å§. P239]]></content>
      <categories>
        <category>shader</category>
      </categories>
      <tags>
        <tag>unity</tag>
        <tag>shader</tag>
        <tag>ã€Šshaderå…¥é—¨ç²¾è¦ã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¢§è“èˆªçº¿åŠ¨ç”»æ¨ç‰¹é¢„è§ˆ]]></title>
    <url>%2Fazurlane-anime-tweet-preview%2F</url>
    <content type="text"><![CDATA[]]></content>
      <tags>
        <tag>ç¢§è“èˆªçº¿</tag>
        <tag>bot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Šshaderå…¥é—¨ç²¾è¦ã€‹ç¬”è®°-ç¬¬9ç« -æ›´å¤æ‚çš„å…‰ç…§]]></title>
    <url>%2Fshader-r-complex-lighting%2F</url>
    <content type="text"><![CDATA[åœ¨ä¹‹å‰çš„å­¦ä¹ ä¸­,æˆ‘ä»¬çš„åœºæ™¯ä¹‹ä¸­éƒ½åªæœ‰ä¸€ä¸ªå…‰æº,ä¸”å…‰æºç±»å‹æ˜¯å¹³è¡Œå…‰. ä½†åœ¨å®é™…çš„æ¸¸æˆå¼€å‘ä¸­,æˆ‘ä»¬å¾€å¾€éœ€è¦æ›´å¤š,æ›´å¤æ‚çš„å…‰æº.æ›´é‡è¦çš„æ˜¯,æˆ‘ä»¬è¦å¾—åˆ°é˜´å½±. Â§ Unityçš„æ¸²æŸ“è·¯å¾„ åœ¨Unityé‡Œ,æ¸²æŸ“è·¯å¾„(Rendering Path)å†³å®šäº†å…‰ç…§æ˜¯å¦‚ä½•åº”ç”¨åˆ°Unity Shaderä¸­çš„.å› æ­¤,å¦‚æœè¦å’Œå…‰æºæ‰“äº¤é“,æˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªPassæŒ‡å®šå®ƒä»¬çš„æ¸²æŸ“è·¯å¾„,åªæœ‰ä¸ºShaderæ­£ç¡®åœ°é€‰æ‹©å’Œè®¾ç½®äº†éœ€è¦çš„æ¸²æŸ“è·¯å¾„,è¯¥Shaderçš„å…‰ç…§æ‰ä¼šè¢«æ­£ç¡®æ‰§è¡Œ. TODO: çœ‹åˆ°è¿™é‡Œ,æˆ‘å°±è§‰å¾—è·Ÿæˆ‘æƒ³è¦åº”è˜çš„å…¬å¸çš„å·¥ä½œä¸æ€ä¹ˆæ­äº†,å…ˆè·³è¿‡]]></content>
      <categories>
        <category>shader</category>
      </categories>
      <tags>
        <tag>unity</tag>
        <tag>shader</tag>
        <tag>ã€Šshaderå…¥é—¨ç²¾è¦ã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Šshaderå…¥é—¨ç²¾è¦ã€‹ç¬”è®°-ç¬¬8ç« -é€æ˜æ•ˆæœ]]></title>
    <url>%2Fshader-r-alpha-effect%2F</url>
    <content type="text"><![CDATA[Unityä¸­,æœ‰ä¸¤ç§æ–¹å¼å®ç°é€æ˜æ•ˆæœ: ä¸€ç§æ˜¯é€æ˜åº¦æµ‹è¯•(Alpha Test),è¿™ç§æ–¹æ³•æ— æ³•å¾—åˆ°çœŸæ­£çš„åŠé€æ˜æ•ˆæœ;å¦ä¸€ç§æ–¹æ³•æ˜¯é€æ˜åº¦æ··åˆ(Alpha Blending) å¯¹äºä¸é€æ˜ç‰©ä½“,ä¸è€ƒè™‘æ¸²æŸ“é¡ºåºä¹Ÿèƒ½å¾—åˆ°æ­£ç¡®çš„æ’åºç»“æœ,è¿™æ˜¯ç”±äºå¼ºå¤§çš„æ·±åº¦ç¼“å†²(depth-buffer,ä¹Ÿç§°z-buffer)çš„å­˜åœ¨. åœ¨å®æ—¶æ¸²æŸ“ä¸­,æ·±åº¦ç¼“å†²æ˜¯ç”¨äºè§£å†³å¯è§æ€§é—®é¢˜çš„,å®ƒä¼šè§£å†³å“ªäº›ç‰©ä½“çš„å“ªäº›éƒ¨åˆ†ä¼šè¢«æ¸²æŸ“åœ¨å‰é¢,å“ªäº›éƒ¨åˆ†ä¼šè¢«é®æŒ¡. å¦‚æœæƒ³è¦å®ç°é€æ˜åº¦æ•ˆæœ,éœ€è¦å…³é—­æ·±åº¦å†™å…¥. é€æ˜åº¦æµ‹è¯•å’Œé€æ˜åº¦æ··åˆçš„åŸç†å¦‚ä¸‹: é€æ˜åº¦æµ‹è¯• é‡‡ç”¨ä¸€ç§&quot;æå…¶éœ¸é“&quot;çš„æœºåˆ¶,åªè¦ä¸€ä¸ªç‰‡å…ƒçš„é€æ˜åº¦ä¸æ»¡è¶³æ¡ä»¶(é€šå¸¸æ˜¯å°äºæŸä¸ªé˜ˆå€¼),é‚£ä¹ˆå®ƒå¯¹åº”çš„ç‰‡å…ƒå°±ä¼šè¢«èˆå¼ƒ.è¢«èˆå¼ƒçš„ç‰‡å…ƒå°†ä¸ä¼šå†åšä»»ä½•å¤„ç†,ä¹Ÿä¸ä¼šå¯¹é¢œè‰²ç¼“å†²åŒºé€ æˆå½±å“.é€æ˜åº¦æµ‹è¯•æ˜¯ä¸éœ€è¦å…³é—­æ·±åº¦å†™å…¥çš„,å®ƒå’Œå…¶ä»–ä¸é€æ˜ç‰©ä½“æœ€å¤§çš„ä¸åŒåœ¨äºå®ƒä¼šæ ¹æ®é€æ˜åº¦èˆå¼ƒä¸€äº›ç‰‡å…ƒ.è™½ç„¶ç®€å•,ä½†å…¶äº§ç”Ÿçš„æ•ˆæœä¼šå¾ˆæç«¯:è¦ä¹ˆå®Œå…¨é€æ˜,è¦ä¹ˆä¸é€æ˜. é€æ˜åº¦æ··åˆ è¿™ç§æ–¹æ³•å¯ä»¥å¾—åˆ°çœŸæ­£çš„åŠé€æ˜çš„æ•ˆæœ.ä»–ä¼šä½¿ç”¨å½“å‰ç‰‡å…ƒçš„é€æ˜åº¦ä½œä¸ºæ··åˆå› å­,ä¸å·²ç»å­˜å‚¨åˆ°é¢œè‰²ç¼“å†²ä¸­çš„é¢œè‰²è¿›è¡Œæ··åˆ,å¾—åˆ°æ–°çš„é¢œè‰².ä½†æ˜¯,é€æ˜åº¦æ··åˆéœ€è¦å…³é—­æ·±åº¦å†™å…¥,ä½†æ²¡æœ‰å…³é—­æ·±åº¦æµ‹è¯•,è¿™æ„å‘³ç€å¦‚æœä½¿ç”¨é€æ˜åº¦æ··åˆå»æ¸²æŸ“ä¸€ä¸ªç‰‡å…ƒçš„è¯æ—¶,è¿˜æ˜¯ä¼šæ¯”è¾ƒå®ƒå’Œå½“å‰ç¼“å†²åŒºä¸­çš„æ·±åº¦å€¼.ä¹Ÿå°±æ˜¯è¯´,å¯¹äºé€æ˜åº¦æ··åˆæ¥è¯´,æ·±åº¦ç¼“å†²æ˜¯åªè¯»çš„. Â§ æ¸²æŸ“é¡ºåº Â§ å…³é—­æ·±åº¦å†™å…¥å¾ˆé‡è¦ ä½¿ç”¨é€æ˜åº¦æ··åˆæ—¶,å¦‚æœä¸å…³é—­æ·±åº¦å†™å…¥: å¦‚æœä¸€ä¸ªåŠé€æ˜è¡¨é¢èƒŒåçš„è¡¨é¢æœ¬æ˜¯å¯ä»¥é€è¿‡å‰é¢çš„è¡¨é¢è¢«æˆ‘å¦ˆçœ‹åˆ°çš„,ä½†ç”±äºæ·±åº¦æµ‹è¯•æ—¶åˆ¤æ–­ç»“æœæ˜¯å‰é¢çš„åŠé€æ˜è¡¨é¢è·ç¦»æ‘„åƒæœºæ›´è¿‘,å¯¼è‡´åé¢çš„è¡¨é¢å°†ä¼šè¢«å‰”é™¤,æˆ‘ä»¬æ— æ³•é€è¿‡åŠé€æ˜è¡¨é¢çœ‹åˆ°åé¢çš„ç‰©ä½“äº†. ä½†æ˜¯,æˆ‘ä»¬ç ´åäº†æ·±åº¦ç¼“å†²çš„å·¥ä½œæœºåˆ¶,è€Œè¿™æ˜¯ä¸€ä¸ªéå¸¸éå¸¸ç³Ÿç³•çš„äº‹æƒ…,å°½ç®¡æˆ‘ä»¬ä¸å¾—ä¸è¿™æ ·åš: å…³é—­æ·±åº¦å†™å…¥å¯¼è‡´æ¸²æŸ“é¡ºåºå˜å¾—éå¸¸é‡è¦ Â§ ä¸åŒçš„æ¸²æŸ“é¡ºåºä¼šå¾—åˆ°çš„ç»“æœ å‡è®¾åœºæ™¯é‡Œæœ‰ä¸¤ä¸ªç‰©ä½“:Aå’ŒB,å…¶ä¸­Aæ˜¯åŠé€æ˜ç‰©ä½“,Bæ˜¯ä¸é€æ˜ç‰©ä½“,å¦‚å›¾æ‰€ç¤º ç¬¬ä¸€ç§æƒ…å†µ:å…ˆæ¸²æŸ“B,å†æ¸²æŸ“A ç”±äºä¸é€æ˜ç‰©ä½“å¼€å¯äº†æ·±åº¦æµ‹è¯•å’Œæ·±åº¦å†™å…¥,è€Œå› æ­¤æˆ‘ä»¬çš„æ·±åº¦ç¼“å­˜ä¸­æ²¡æœ‰ä»»ä½•æœ‰æ•ˆæ•°æ®,å› æ­¤Bé¦–å…ˆä¼šå†™å…¥é¢œè‰²ç¼“å†²å’Œæ·±åº¦ç¼“å†².éšåæˆ‘ä»¬æ¸²æŸ“é€æ˜ç‰©ä½“A,ä»ä¼šè¿›è¡Œæ·±åº¦æµ‹è¯•,è€Œæˆ‘ä»¬å‘ç°Aæ¯”Bè·ç¦»æ‘„åƒå¤´æ›´è¿‘,æ‰€ä»¥æˆ‘ä»¬ä¼šä½¿ç”¨Açš„å¸¦é€æ˜åº¦é¢œè‰²å’ŒBçš„é¢œè‰²è¿›è¡Œæ··åˆ,å¾—åˆ°æ­£ç¡®çš„åŠé€æ˜æ•ˆæœ ç¬¬äºŒç§æƒ…å†µ:å…ˆæ¸²æŸ“A,å†æ¸²æŸ“B æ¸²æŸ“Aæ—¶,æ·±åº¦ç¼“å†²ä¸­æ²¡æœ‰ä»»ä½•æœ‰æ•ˆæ•°æ®,å› æ­¤Aç›´æ¥å†™å…¥é¢œè‰²ç¼“å†².ä½†ä¸ä¼šå†™å…¥æ·±åº¦ç¼“å†².ç­‰æ¸²æŸ“Bæ—¶,è¿›è¡Œæ·±åº¦æµ‹è¯•çš„æ—¶å€™,æ·±åº¦ç¼“å†²ä¸­æ²¡æœ‰ä»»ä½•æœ‰æ•ˆæ•°æ®,ä¼šç›´æ¥è¦†ç›–Açš„é¢œè‰²,ä»è§†è§‰ä¸Šæ¥çœ‹,Bå‡ºç°åœ¨äº†Açš„å‰é¢,è€Œè¿™æ˜¯é”™è¯¯çš„. å› æ­¤,æ¸²æŸ“å¼•æ“ä¸€èˆ¬éƒ½ä¼šå¯¹ç‰©ä½“è¿›è¡Œæ’åº,å†æ¸²æŸ“.å¸¸è§æ–¹æ³•æ˜¯: å…ˆæ¸²æŸ“æ‰€æœ‰ä¸é€æ˜ç‰©ä½“,å¹¶å¯¹ä»–ä»¬å¼€å¯æ·±åº¦æµ‹è¯•å’Œæ·±åº¦å†™å…¥; å†æŠŠåŠé€æ˜ç‰©ä½“æŒ‰å®ƒä»¬è·ç¦»æ‘„åƒæœºçš„è¿œè¿‘æ’åº,ç„¶åæŒ‰ç…§ä»åå¾€å‰çš„é¡ºåºæ¸²æŸ“è¿™äº›åŠé€æ˜ç‰©ä½“,å¹¶å¼€å¯å®ƒä»¬çš„æ·±åº¦æµ‹è¯•(ä½†å…³é—­æ·±åº¦å†™å…¥); ä½†æ˜¯,è¿™ç§æ–¹æ³•ä»ç„¶å­˜åœ¨é—®é¢˜: ç¬¬äºŒæ­¥ä¸­çš„æ¸²æŸ“é¡ºåº,æ˜¯ä¾é è·ç¦»æ‘„åƒæœºçš„æ·±åº¦åˆ¤æ–­çš„,è€Œæ·±åº¦ç¼“å†²ä¸­çš„å€¼å…¶å®æ˜¯åƒç´ çº§åˆ«çš„,ä½†æ˜¯æˆ‘ä»¬éœ€è¦å¯¹ç‰©ä½“çº§åˆ«è¿›è¡Œæ’åº.å¦‚å›¾,ä¼šå¾—åˆ°3ä¸ªç‰©ä½“å¾ªç¯çš„æƒ…å†µ. å°½ç®¡æ€»æœ‰ä¸€äº›æƒ…å†µæ‰“ä¹±æˆ‘ä»¬çš„é˜µè„š,ä½†ç”±äºä¸Šè¿°æ–¹æ³•è¶³å¤Ÿæœ‰æ•ˆä¸”å®¹æ˜“å®ç°,å› æ­¤å¤§å¤šæ•°æ¸¸æˆå¼•æ“éƒ½é€‰ç”¨çš„è¿™ç§æ–¹æ³•. Â§ Unity Shaderçš„æ¸²æŸ“é¡ºåº Unityä¸ºè§£å†³æ¸²æŸ“é—®é¢˜æä¾›äº†æ¸²æŸ“é˜Ÿåˆ—(render queue)è¿™ä¸€æ–¹æ¡ˆ.æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Subshaderçš„Queenæ ‡ç­¾æ¥å†³å®šæˆ‘ä»¬çš„æ¨¡å‹å°†å½’äºå“ªä¸ªæ¸²æŸ“é˜Ÿåˆ—. Unityåœ¨å†…éƒ¨ä½¿ç”¨äº†ä¸€ç³»åˆ—æ•´æ•°ç´¢å¼•æ¥è¡¨ç¤ºæ¯ä¸ªæ¸²æŸ“é˜Ÿåˆ—,ç´¢å¼•å·è¶Šå°å°±è¶Šå…ˆè¢«æ¸²æŸ“.åœ¨Unity5ä¸­,Unityæå‰å®šä¹‰äº†5ä¸ªæ¸²æŸ“é˜Ÿåˆ—. åç§° é˜Ÿåˆ—ç´¢å¼•å· æè¿° Background 1000 èƒŒæ™¯ Geometry 2000 é»˜è®¤æ¸²æŸ“é˜Ÿåˆ—,å¤§å¤šæ•°ç‰©ä½“ä½¿ç”¨è¿™ä¸ªé˜Ÿåˆ—,ä¸é€æ˜ç‰©ä½“ä½¿ç”¨è¿™ä¸ªé˜Ÿåˆ—. AlphaTest 2450 éœ€è¦é€æ˜åº¦æµ‹è¯•çš„ç‰©ä½“ä½¿ç”¨è¿™ä¸ªé˜Ÿåˆ—.åœ¨Unity5ä¸­å®ƒä»Geometryé˜Ÿåˆ—ä¸­è¢«å•ç‹¬åˆ†å‡ºæ¥,è¿™æ˜¯å› ä¸ºåœ¨æ‰€æœ‰ä¸é€æ˜ç‰©ä½“è½©ç„¶ä¹‹åå†æ¸²æŸ“å®ƒä»¬æ›´é«˜æ•ˆ. Transparent 3000 è¿™ä¸ªé˜Ÿåˆ—ä¸­çš„ç‰©ä½“ä¼šåœ¨æ‰€æœ‰Geometryå’ŒAlphaTestç‰©ä½“æ¸²æŸ“å,å†æŒ‰ä»åå¾€å‰çš„é¡ºåºè¿›è¡Œæ¸²æŸ“.ä»»ä½•ä½¿ç”¨äº†é€æ˜åº¦æ··åˆ(ä¾‹å¦‚å…³é—­äº†æ·±åº¦å†™å…¥çš„Shader)çš„ç‰©ä½“éƒ½åº”è¯¥ä½¿ç”¨è¯¥é˜Ÿåˆ—(???) Overlay 4000 è¯¥é˜Ÿåˆ—ç”¨äºå®ç°ä¸€äº›å åŠ æ•ˆæœ.ä»»ä½•éœ€è¦åœ¨æœ€åæ¸²æŸ“çš„ç‰©ä½“éƒ½åº”è¯¥ä½¿ç”¨è¯¥é˜Ÿåˆ— å› æ­¤,æˆ‘ä»¬æƒ³è¦é€šè¿‡é€æ˜åº¦æµ‹è¯•å®ç°é€æ˜æ•ˆæœ,ä»£ç ä¸­åº”è¯¥åŒ…å«ç±»ä¼¼ä¸‹é¢çš„ä»£ç : 123456SubShader &#123; Tags&#123;"Queue" = "AlphaTest"&#125; Pass&#123; // ...... &#125;&#125; å¦‚æœæˆ‘ä»¬æƒ³é€šè¿‡é€æ˜åº¦æ··åˆæ¥å®ç°é€æ˜æ•ˆæœ,ä»£ç ä¸­åº”è¯¥åŒ…å«ç±»ä¼¼ä¸‹é¢çš„ä»£ç : 1234567SubShader &#123; Tags&#123;"Queue" = "Transparent"&#125; Pass&#123; ZWrite Off // ...... &#125;&#125; å…¶ä¸­,ZWrite Offç”¨äºå…³é—­æ·±åº¦å†™å…¥.æˆ‘ä»¬å¯ä»¥æŠŠå®ƒå†™åœ¨Passæˆ–SubShaderä¸­. Â§ é€æ˜åº¦æµ‹è¯• ç›®æµ‹ç”¨çš„ä¸å¤š,å…ˆä¸çœ‹ Â§ é€æ˜åº¦æ··åˆ ä¼šä½¿ç”¨å½“å‰ç‰‡å…ƒçš„é€æ˜åº¦ä½œä¸ºæ··åˆå› å­,ä¸å·²ç»å­˜å‚¨åœ¨é¢œè‰²ç¼“å†²ä¸­çš„é¢œè‰²è¿›è¡Œæ··åˆ,å¾—åˆ°æ–°çš„é¢œè‰². ä¸ºäº†è¿›è¡Œæ··åˆ,æˆ‘ä»¬éœ€è¦ä½¿ç”¨Unityæä¾›çš„æ··åˆå‘½ä»¤â€“Blend. Blendæ˜¯Unityæä¾›çš„è®¾ç½®æ··åˆæ¨¡å¼çš„å‘½ä»¤.æƒ³è¦å®ç°åŠé€æ˜æ•ˆæœå°±è¦æŠŠå½“å‰è‡ªèº«çš„é¢œè‰²å’Œå·²ç»å­˜åœ¨äºé¢œè‰²ç¼“å†²ä¸­çš„é¢œè‰²è¿›è¡Œæ··åˆ,æ··åˆæ—¶ä½¿ç”¨çš„å‡½æ•°å°±æ˜¯ç”±è¯¥æŒ‡ä»¤å†³å®šçš„. è¯­ä¹‰ æè¿° Blend Off å…³é—­æ··åˆ Blend SrcFactor DstFactor å¼€å¯æ··åˆ,å¹¶è®¾ç½®æ··åˆå› å­.ç‰‡å…ƒé¢œè‰²ä¼šä¹˜ä»¥SrcFactor,è€Œå·²å­˜åœ¨äºé¢œè‰²ç¼“å†²åŒºçš„é¢œè‰²ä¼šä¹˜ä»¥DstFactor,ç„¶åæŠŠä¸¤è€…ç›¸åŠ å­˜å…¥ç¼“å­˜. Blend SrcFactor DstFactor, SrcFactorA DstFactorA å’Œä¸Šé¢å‡ ä¹ä¸€æ ·,åªæ˜¯ä½¿ç”¨ä¸åŒå› å­æ¥æ··åˆé€æ˜é€šé“ BlendOp BlendOption å¹¶éæ˜¯æŠŠæºé¢œè‰²å’Œç›®æ ‡é¢œè‰²ç®€å•ç›¸åŠ åæ··åˆ,è€Œæ˜¯ä½¿ç”¨BlendOptionå¯¹å®ƒä»¬è¿›è¡Œå…¶ä»–æ“ä½œ åœ¨æœ¬èŠ‚ä¸­æˆ‘ä»¬ä½¿ç”¨ç¬¬äºŒç§è¯­ä¹‰æ¥æ··åˆ,éœ€è¦æ³¨æ„çš„æ˜¯,è¿™ä¸ªå‘½ä»¤åœ¨è®¾ç½®æ··åˆå› å­çš„åŒæ—¶ä¹Ÿå¼€å¯äº†æ··åˆæ¨¡å¼. Â§ å®è·µ: é€æ˜åº¦æ··åˆ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980// Upgrade NOTE: replaced '_Object2World' with 'unity_ObjectToWorld'Shader "Custom/8.4"&#123; Properties &#123; _Color ("Color", Color) = (1,1,1,1) _MainTex ("Albedo (RGB)", 2D) = "white" &#123;&#125; // AlphaScaleç”¨æ¥æ§åˆ¶æ•´ä½“é€æ˜åº¦ _AlphaScale("Alpha Scale",Range(0,1)) = 1 &#125; SubShader &#123; // Queueæ ‡ç­¾æŒ‡å®šé˜Ÿåˆ— // RenderTypeæ ‡ç­¾è®¾ç½®ä¸ºTransparent,ç”¨æ¥æŒ‡æ˜è¯¥Shaderæ˜¯ä¸€ä¸ªä½¿ç”¨äº†é€æ˜åº¦æ··åˆçš„Shader.RenderTypeæ ‡ç­¾é€šå¸¸è¢«ç”¨äºç€è‰²å™¨æ›¿æ¢åŠŸèƒ½. // IgnoreProjectæ ‡ç­¾è®¾ä¸ºTrue,æ„å‘³ç€æ•´ä¸ªSubshaderä¸å—æŠ•å½±å™¨(Projectors)å½±å“. Tags &#123; "Queue"="TransParent" "IgnoreProject"="True" "RenderType"="Transparent" &#125; Pass&#123; // æŠŠLightModeæ ‡ç­¾è®¾ä¸ºForwardBase,æ˜¯ä¸ºäº†è®©Unityèƒ½å¤ŸæŒ‰å‰å‘æ¸²æŸ“è·¯å¾„çš„æ–¹å¼ä¸ºæˆ‘ä»¬æ­£ç¡®æä¾›å„ä¸ªå…‰ç…§å˜é‡. Tags &#123;"LightMode"="ForwardBase"&#125; // å…³é—­æ·±åº¦å†™å…¥ ZWrite Off // è®¾ç½®æ··åˆæ¨¡å¼ Blend SrcAlpha OneMinusSrcAlpha CGPROGRAM #pragma vertex vert #pragma fragment frag #include "Lighting.cginc" fixed4 _Color; sampler2D _MainTex; float4 _MainTex_ST; fixed _AlphaScale; struct a2v&#123; float4 vertex : POSITION; float3 normal : NORMAL; float4 texcoord : TEXCOORD0; &#125;; struct v2f&#123; float4 pos : SV_POSITION; float3 worldNormal : TEXCOORD0; float3 worldPos : TEXCOORD1; float uv : TEXCOORD2; &#125;; v2f vert(a2v v)&#123; v2f o; o.pos = UnityObjectToClipPos(v.vertex); o.worldNormal = UnityObjectToWorldNormal(v.normal); o.worldPos = mul(unity_ObjectToWorld, v.vertex).xyz; o.uv = TRANSFORM_TEX(v.texcoord, _MainTex); return o; &#125; fixed4 frag(v2f i) : SV_TARGET&#123; fixed3 worldNormal = normalize(i.worldNormal); fixed3 worldLightDir = normalize(UnityWorldSpaceLightDir(i.worldPos)); fixed4 texColor = tex2D(_MainTex, i.uv); fixed3 albedo = texColor.rgb * _Color.rgb; fixed3 ambient = UNITY_LIGHTMODEL_AMBIENT.xyz * albedo; fixed3 diffuse = _LightColor0.rgb * albedo * max(0, dot(worldNormal, worldLightDir)); // alphaçš„å€¼ return fixed4(ambient + diffuse,texColor.a * _AlphaScale); &#125; ENDCG &#125; &#125; FallBack "Diffuse"&#125; å½“æ¨¡å‹è‡ªèº«æœ‰å¤æ‚çš„é®æŒ¡å…³ç³»æˆ–åŒ…å«äº†å¤æ‚çš„éå‡¸ç½‘æ ¼çš„æ—¶å€™,å°±ä¼šæœ‰å„ç§å„æ ·å› ä¸ºæ’åºé”™è¯¯è€Œäº§ç”Ÿçš„é”™è¯¯çš„æ’åºæ•ˆæœ. Â§ å¼€å¯æ·±åº¦å†™å…¥çš„åŠé€æ˜æ•ˆæœ ä¸Šé¢çš„é—®é¢˜éƒ½æ˜¯ç”±äºå…³é—­äº†æ·±åº¦å†™å…¥é€ æˆçš„,å› ä¸ºè¿™æ ·æˆ‘ä»¬æ— æ³•å¯¹æ¨¡å‹è¿›è¡Œåƒç´ çº§åˆ«çš„æ·±åº¦æ’åº. è¿™æ˜¯,æˆ‘ä»¬å¯ä»¥æƒ³åŠæ³•é‡æ–°åˆ©ç”¨æ·±åº¦å†™å…¥,è®©æ¨¡å‹å¯ä»¥æƒ³åŠé€æ˜ç‰©ä½“ä¸€æ ·è¿›è¡Œæ·¡å…¥æ·¡å‡º(æ·¡å…¥æ·¡å‡ºä»€ä¹ˆé¬¼???).è¿™å°±æ˜¯ä¸‹é¢çš„å†…å®¹. å¯¹äºä¸Šé¢çš„é—®é¢˜,ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ä¸¤ä¸ªPassæ¥æ¸²æŸ“æ¨¡å‹: ä¸€ä¸ªPasså¼€å¯æ·±åº¦å†™å…¥,ä½†ä¸è¾“å‡ºé¢œè‰²,å®ƒçš„ç›®çš„ä»…ä»…æ˜¯ä¸ºäº†æŠŠè¯¥æ¨¡å‹å†™å…¥æ·±åº¦ç¼“å†²ä¸­; ç¬¬äºŒä¸ªPassè¿›è¡Œæ­£å¸¸çš„é€æ˜åº¦æ··åˆ,ç”±äºä¸Šä¸€ä¸ªPasså·²ç»å¾—åˆ°äº†é€åƒç´ çš„æ­£ç¡®çš„æ·±åº¦ä¿¡æ¯,è¯¥Passå°±å¯ä»¥æŒ‰ç…§åƒç´ çº§åˆ«çš„æ·±åº¦æ’åºçš„ç»“æœè¿›è¡Œé€æ˜æ¸²æŸ“. ä½†è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹åœ¨äº,å¤šä½¿ç”¨ä¸€ä¸ªPassä¼šå¯¹æ€§èƒ½é€ æˆä¸€å®šçš„å½±å“. ä»£ç åªéœ€è¦åœ¨ä¸Šé¢çš„é‚£ä»½ä»£ç ä¸­æ–°åŠ ä¸€ä¸ªPasså³å¯,åŠ åœ¨åŸPassçš„ä¸Šé¢ 1234Pass&#123; ZWrite On ColorMask 0&#125; ColorMaskç”¨äºè®¾ç½®é¢œè‰²é€šé“çš„å†™æ©ç (write mask),å®ƒçš„è¯­ä¹‰å¦‚ä¸‹: ColorMask RGB | A | 0 | å…¶ä»–ä»»ä½•R, G, B, Açš„ç»„åˆ å½“ColorMaskè®¾ä¸º0æ—¶,æ„å‘³ç€è¯¥Passä¸å†™å…¥ä»»ä½•é¢œè‰²é€šé“,å³ä¸ä¼šè¾“å‡ºä»»ä½•é¢œè‰². Â§ ShaderLabçš„æ··åˆå‘½ä»¤ ä¸Šé¢å·²ç»ç”¨äº†Blendå‘½ä»¤è¿›è¡Œæ··åˆ,å®é™…ä¸Šæ··åˆè¿˜æœ‰å…¶ä»–å¾ˆå¤šç”¨å¤„,ä¸ä»…ä»…æ˜¯é€æ˜åº¦æ··åˆ. Â§ æ··åˆçš„åŸç† å½“ç‰‡å…ƒç€è‰²å™¨äº§ç”Ÿä¸€ä¸ªé¢œè‰²çš„æ—¶å€™,å¯ä»¥é€‰æ‹©ä¸é¢œè‰²ç¼“å­˜ä¸­çš„é¢œè‰²è¿›è¡Œæ··åˆ,è¿™æ ·ä¸€æ¥,æ··åˆå°±å’Œä¸¤ä¸ªæ“ä½œæ•°æœ‰å…³:æºé¢œè‰²(source color)å’Œç›®æ ‡é¢œè‰²(destination color). æºé¢œè‰²,ç”¨Sè¡¨ç¤º,æŒ‡çš„æ˜¯ç‰‡å…ƒç€è‰²å™¨äº§ç”Ÿçš„é¢œè‰²å€¼; ç›®æ ‡é¢œè‰²,ç”¨Dè¡¨ç¤º,æŒ‡çš„æ˜¯ä»é¢œè‰²ç¼“å†²ä¸­è¯»å–åˆ°çš„é¢œè‰²å€¼. å¯¹å®ƒä»¬è¿›è¡Œæ··åˆåå¾—åˆ°è¾“å‡ºé¢œè‰²,ç”¨Oè¡¨ç¤º,å®ƒä¼šé‡æ–°å†™å…¥åˆ°é¢œè‰²ç¼“å­˜ä¸­. éœ€è¦æ³¨æ„çš„æ˜¯,å½“æˆ‘ä»¬è°ˆåŠæ··åˆä¸­çš„æºé¢œè‰², ç›®æ ‡é¢œè‰²å’Œè¾“å‡ºé¢œè‰²æ—¶,ä»–ä»¬éƒ½åŒ…å«äº†RGBAå››ä¸ªé€šé“,è€Œå¹¶éä»…ä»…çš„RGBé€šé“. Â§ å¼€å¯æ··åˆ åœ¨Unityä¸­,å½“æˆ‘ä»¬ä½¿ç”¨Blend(Blend Offé™¤å¤–)å‘½ä»¤æ—¶,é™¤äº†è®¾ç½®æ··åˆçŠ¶æ€å¤–ä¹Ÿå¼€å¯çš„æ··åˆ. Â§ æ··åˆçš„ç­‰å¼å’Œå‚æ•° æ··åˆæ˜¯ä¸€ä¸ªé€ç‰‡å…ƒçš„æ“ä½œ,è€Œä¸”å®ƒæ˜¯ä¸å¯ç¼–ç¨‹çš„,ä½†æ˜¯æ˜¯é«˜åº¦å¯é…ç½®çš„. æˆ‘ä»¬å¯ä»¥è®¾ç½®æ··åˆæ—¶ä½¿ç”¨çš„è¿ç®—æ“ä½œ,æ··åˆå› å­ç­‰æ¥å½±å“æ··åˆ. ä»æºé¢œè‰²Så’Œç›®æ ‡é¢œè‰²Då¾—åˆ°è¾“å‡ºé¢œè‰²Oå¿…é¡»é€‚ç”¨ä¸€ä¸ªç­‰å¼æ¥è®¡ç®—,è¿™ä¸ªç­‰å¼å«åšæ··åˆç­‰å¼(Blending equation). å½“è¿›è¡Œæ··åˆæ—¶,æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸¤ä¸ªæ··åˆç­‰å¼,ä¸€ä¸ªç”¨äºæ··åˆRGBé€šé“,ä¸€ä¸ªç”¨äºæ··åˆAé€šé“. å½“è®¾ç½®æ··åˆçŠ¶æ€æ—¶,æˆ‘ä»¬å®é™…ä¸Šè®¾ç½®çš„æ˜¯æ··åˆç­‰å¼ä¸­çš„æ“ä½œå’Œå› å­ åœ¨é»˜è®¤æƒ…å†µä¸‹,æ··åˆç­‰å¼ä½¿ç”¨çš„æ“ä½œéƒ½æ˜¯åŠ æ“ä½œ(æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æ“ä½œ),æˆ‘ä»¬åªéœ€è¦å†è®¾ç½®ä¸€ä¸‹æ··åˆå› å­å³å¯. ç”±äºéœ€è¦ä¸¤ä¸ªç­‰å¼,æ¯ä¸ªç­‰å¼æœ‰ä¸¤ä¸ªå› å­(ä¸€ä¸ªç”¨äºå’Œæºé¢œè‰²ç›¸ä¹˜,ä¸€ä¸ªç”¨äºå’Œç›®æ ‡é¢œè‰²ç›¸ä¹˜),å› æ­¤ä¸€å…±éœ€è¦4ä¸ªå› å­. ä¸‹é¢æ˜¯ShaderLabä¸­è®¾ç½®æ··åˆå› å­çš„å‘½ä»¤ å‘½ä»¤ æè¿° Blend SrcFactor DstFactor å¼€å¯æ··åˆ,å¹¶è®¾ç½®æ··åˆå› å­.æºé¢œè‰²ä¼šä¹˜ä»¥SrcFactor,è€Œç›®æ ‡é¢œè‰²ä¼šä¹˜ä»¥DstFactor,ç„¶åå°†ä¸¤è€…ç›¸åŠ åå­˜å…¥é¢œè‰²ç¼“å†²ä¸­ Blend SrcFactor DstFactor,SrcFactorA DstFactor A å’Œä¸Šé¢å‡ ä¹ä¸€æ ·,åªæ˜¯ä½¿ç”¨ä¸åŒå› å­æ¥æ··åˆé€æ˜é€šé“. ç¬¬ä¸€ä¸ªå‘½ä»¤åªæä¾›äº†ä¸¤ä¸ªå› å­,è¿™æ„å‘³ç€ä½¿ç”¨åŒæ ·æ··åˆå› å­æ¥æ··åˆRGBé€šé“å’ŒAé€šé“,å³æ­¤æ—¶SrcFactorAç­‰äºSrcFactor, DstFactorAç­‰äºDstFactor. è¿™äº›æ··åˆå› å­çš„å€¼å¯ä»¥å–ä»¥ä¸‹: å‚æ•° æè¿° One å› å­ä¸º1 Zero å› å­ä¸º0 SrcColor å› å­ä¸ºæºé¢œè‰²å€¼.å½“ç”¨äºRGBé€šé“çš„æ··åˆç­‰å¼æ—¶,ä½¿ç”¨SrcColorçš„RGBåˆ†é‡ä½œä¸ºæ··åˆå› å­;å½“ç”¨äºAé€šé“æ··åˆç­‰å¼æ—¶,ä½¿ç”¨SrcColorçš„Aåˆ†é‡ä½œä¸ºæ··åˆå› å­. SrcAlpha å› å­æºé¢œè‰²çš„é€æ˜åº¦å€¼(Aé€šé“) DstColor å› å­ä¸ºç›®æ ‡é¢œè‰²å€¼.å½“ç”¨äºRGBé€šé“çš„æ··åˆç­‰å¼æ—¶,ä½¿ç”¨DstColorçš„RGBåˆ†é‡ä½œä¸ºæ··åˆå› å­;å½“ç”¨äºAé€šé“æ··åˆç­‰å¼æ—¶,ä½¿ç”¨DstColorçš„Aåˆ†é‡ä½œä¸ºæ··åˆå› å­. DstAlpha å°¹å­ç»´ç›®æ ‡é¢œè‰²å€¼çš„é€æ˜åº¦å€¼(Aé€šé“) OneMinusSrcColor 1 - SrcColor OneMinusSrcAlpha 1 - SrcAlpha OneMinusDstColor 1 - DstColor OneMinusDstAlpha 1 - DstAlpha Â§ æ··åˆæ“ä½œ å¯ä»¥ä½¿ç”¨ShaderLabçš„BlendOp BlendOptionå‘½ä»¤,æ¥é€‰æ‹©ä¸åŒçš„æ··åˆæ“ä½œ æ“ä½œ æè¿° Add å°†æ··åˆåçš„æºé¢œè‰²å’Œç›®çš„é¢œè‰²ç›¸åŠ .æ˜¯é»˜è®¤çš„æ··åˆæ“ä½œ.ä½¿ç”¨çš„æ··åˆç­‰å¼æ˜¯:O(rgb) = SrcFactor * S(rgb) + DstFactor * D(rgb)O(a) = SrcFactor * S(a) + DstFactor * D(a) Sub ç”¨æ··åˆåçš„æºé¢œè‰²å‡å»æ··åˆåçš„ç›®æ ‡é¢œè‰².ä½¿ç”¨çš„æ··åˆç­‰å¼æ˜¯:O(rgb) = SrcFactor * S(rgb) - DstFactor * D(rgb)O(a) = SrcFactor * S(a) - DstFactor * D(a) RevSub ç”¨æ··åˆåçš„ç›®æ ‡é¢œè‰²å‡å»æ··åˆåçš„æºé¢œè‰².ä½¿ç”¨çš„æ··åˆç­‰å¼æ˜¯:O(rgb) = DstFactor * D(rgb) - SrcFactor * S(rgb)O(a) = DstFactor * D(a) - SrcFactor * S(a) Min ä½¿ç”¨æºé¢œè‰²å’Œç›®æ ‡é¢œè‰²ä¸­çš„è¾ƒå°å€¼,æ˜¯é€åˆ†é‡æ¯”è¾ƒçš„.ä½¿ç”¨çš„æ··åˆç­‰å¼æ˜¯O(rgba) = (min(SÂ®, DÂ®, min(S(g), D(g), min(S(b), D(b), min(S(a), D(a))) Max ä½¿ç”¨æºé¢œè‰²å’Œç›®æ ‡é¢œè‰²ä¸­çš„è¾ƒå¤§å€¼,æ˜¯é€åˆ†é‡æ¯”è¾ƒçš„.ä½¿ç”¨çš„æ··åˆç­‰å¼æ˜¯O(rgba) = (max(SÂ®, DÂ®, max(S(g), D(g), max(S(b), D(b), max(S(a), D(a))) æ··åˆå› å­å‘½ä»¤é€šå¸¸æ˜¯ä¸æ··åˆå› å­å‘½ä»¤ä¸€èµ·å·¥ä½œçš„.ä½†ä½¿ç”¨Minæˆ–Maxæ··åˆæ“ä½œæ—¶,æ··åˆå› å­å®é™…ä¸Šæ˜¯ä¸èµ·ä»»ä½•ä½œç”¨çš„ Â§ å¸¸è§çš„æ··åˆç±»å‹ é€šè¿‡æ··åˆæ“ä½œå’Œæ··åˆå› å­å‘½ä»¤çš„ç»„åˆ,å¯ä»¥å¾—åˆ°ä¸€äº›ç±»ä¼¼PhotoShopæ··åˆæ¨¡å¼ä¸­çš„æ··åˆæ•ˆæœ. æ“ä½œ æ•ˆæœ Blend SrcAlpha OneMinusSrcAlpha æ­£å¸¸(Normal), å³é€æ˜åº¦æ··åˆ Blend OneMinusDstColor One æŸ”å’Œç›¸åŠ (Soft Additive) Blend DstColor Zero æ­£ç‰‡å åº•(Multiply),å³ç›¸ä¹˜ Blend DstColor SrcColor ä¸¤å€ç›¸ä¹˜(2x Multiply) BlendOp MinBlend One One å˜æš—(Darking) BlendOp MaxBlend One One å˜äº®(Lighting) Blend OneMinusDstColor One æ»¤è‰²(Screen) Blend One OneMinusSrcColor æ»¤è‰²,ç­‰åŒäºä¸Šé¢çš„ Blend One One çº¿æ€§å‡æ·¡(Linear Dodge) Â§ åŒé¢æ¸²æŸ“çš„é€æ˜æ•ˆæœ ç°å®ç”Ÿæ´»ä¸­,å¦‚æœä¸€ä¸ªç‰©ä½“æ˜¯é€æ˜çš„,æ„å‘³ç€æˆ‘ä»¬ä¸ä»…å¯ä»¥é€è¿‡å®ƒçœ‹åˆ°å…¶å®ƒç‰©ä½“çš„æ ·å­,ä¹Ÿå¯ä»¥çœ‹åˆ°å®ƒçš„å†…éƒ¨ç»“æ„. ä½†åœ¨å‰é¢å®ç°çš„é€æ˜æ•ˆæœä¸­,æˆ‘ä»¬æ— æ³•è§‚å¯Ÿåˆ°æ­£æ–¹ä½“çš„å†…éƒ¨åŠå…¶èƒŒé¢çš„å½¢çŠ¶. è¿™æ˜¯å› ä¸º,é»˜è®¤æƒ…å†µä¸‹,æ¸²æŸ“å¼•æ“å‰”é™¤äº†ç‰©ä½“èƒŒé¢çš„æ¸²æŸ“å›¾å…ƒ,è€Œåªæ¸²æŸ“äº†ç‰©ä½“çš„æ­£é¢. å¯ä»¥ä½¿ç”¨CullæŒ‡ä»¤æ¥æ§åˆ¶éœ€è¦å‰”é™¤å“ªä¸ªé¢çš„å›¾å…ƒ åœ¨Unityä¸­,CullæŒ‡ä»¤çš„è¯­æ³•å¦‚ä¸‹: Cull Back | Front | Off å¦‚æœè®¾ç½®ä¸ºBack,åˆ™èƒŒå¯¹æ‘„åƒæœºçš„æ¸²æŸ“å›¾å…ƒä¸ä¼šè¢«æ¸²æŸ“,ä¹Ÿå°±æ˜¯é»˜è®¤æƒ…å†µä¸‹çš„å‰”é™¤çŠ¶æ€; å¦‚æœè®¾ä¸ºFront,åˆ™æœå‘æ‘„åƒæœºçš„æ¸²æŸ“å›¾å…ƒä¸ä¼šè¢«æ¸²æŸ“; å¦‚æœè®¾ç½®ä¸ºOff,å°±ä¼šå…³é—­å‰”é™¤åŠŸèƒ½,æ‰€æœ‰å›¾å…ƒéƒ½ä¼šè¢«æ¸²æŸ“,ä½†ç”±äºè¿™æ—¶éœ€è¦æ¸²æŸ“çš„å›¾å…ƒæ•°ç›®ä¼šæˆå€å¢åŠ ,å› æ­¤é™¤éæ˜¯ç”¨äºç‰¹æ®Šæ•ˆæœ(ä¾‹å¦‚è¿™é‡Œçš„é€æ˜æ•ˆæœ),é€šå¸¸æƒ…å†µä¸‹æ˜¯ä¸ä¼šå…³é—­å‰”é™¤åŠŸèƒ½çš„. Â§ å®è·µ: é€æ˜åº¦æ··åˆçš„åŒé¢æ¸²æŸ“ æˆ‘ä»¬æƒ³è¦å¾—åˆ°æ­£ç¡®çš„é€æ˜æ•ˆæœ,æ¸²æŸ“é¡ºåºæ˜¯ååˆ†é‡è¦çš„,æˆ‘ä»¬è¦ä¿è¯å›¾å…ƒè¦ä»å‰å¾€åæ¸²æŸ“. å¯¹äºé€æ˜åº¦æµ‹è¯•æ¥è¯´,ç”±äºæˆ‘ä»¬æ²¡æœ‰å…³é—­æ·±åº¦å†™å…¥,æ‰€ä»¥å¯ä»¥åˆ©ç”¨æ·±åº¦ç¼“å†²æŒ‰é€åƒç´ çš„ç»†ç²’åº¦è¿›è¡Œæ·±åº¦æ’åº,ä»è€Œä¿è¯æ¸²æŸ“çš„æ­£ç¡®æ€§. ç„¶è€Œé€æ˜åº¦æ··åˆè¦å…³é—­æ·±åº¦å†™å…¥â€¦æˆ‘ä»¬å°±éœ€è¦å°å¿ƒæ§åˆ¶æ¸²æŸ“é¡ºåºæ¥å¾—åˆ°æ­£ç¡®çš„æ·±åº¦å…³ç³». å¦‚æœæˆ‘ä»¬ç›´æ¥å…³é—­å‰”é™¤åŠŸèƒ½,æˆ‘ä»¬å°±æ— æ³•ä¿è¯åŒä¸€ä¸ªç‰©ä½“çš„æ­£é¢å’ŒèƒŒé¢æ¸²æŸ“å›¾å…ƒçš„æ¸²æŸ“é¡ºåº,å°±æœ‰å¯èƒ½å¾—åˆ°é”™è¯¯çš„åŠé€æ˜æ•ˆæœ. ä¸ºæ­¤,æˆ‘ä»¬é€‰æ‹©æŠŠåŒé¢æ¸²æŸ“çš„å·¥ä½œåˆ†ä¸ºä¸¤ä¸ªPass: ç¬¬ä¸€ä¸ªPassåªæ¸²æŸ“èƒŒé¢,ç¬¬äºŒä¸ªPassåªæ¸²æŸ“æ­£é¢,ç”±äºUnityä¼šé¡ºåºæ‰§è¡ŒSubShaderä¸­çš„å„ä¸ªPass,å› æ­¤æˆ‘ä»¬å¯ä»¥ä¿è¯èƒŒé¢æ€»æ˜¯åœ¨æ­£é¢ä¹‹å‰è¢«æ¸²æŸ“. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125Shader "Custom/8.4"&#123; Properties &#123; _Color ("Color", Color) = (1,1,1,1) _MainTex ("Albedo (RGB)", 2D) = "white" &#123;&#125; _AlphaScale("Alpha Scale",Range(0,1)) = 1 &#125; SubShader &#123; Tags &#123; "Queue"="TransParent" "IgnoreProject"="True" "RenderType"="Transparent" &#125; Pass&#123; Tags &#123;"LightMode"="ForwardBase"&#125; // å‰”é™¤å‰é¢ Cull Front // å…¨æ˜¯åŸPass ZWrite Off Blend SrcAlpha OneMinusSrcAlpha CGPROGRAM #pragma vertex vert #pragma fragment frag #include "Lighting.cginc" fixed4 _Color; sampler2D _MainTex; float4 _MainTex_ST; fixed _AlphaScale; struct a2v&#123; float4 vertex : POSITION; float3 normal : NORMAL; float4 texcoord : TEXCOORD0; &#125;; struct v2f&#123; float4 pos : SV_POSITION; float3 worldNormal : TEXCOORD0; float3 worldPos : TEXCOORD1; float uv : TEXCOORD2; &#125;; v2f vert(a2v v)&#123; v2f o; o.pos = UnityObjectToClipPos(v.vertex); o.worldNormal = UnityObjectToWorldNormal(v.normal); o.worldPos = mul(unity_ObjectToWorld, v.vertex).xyz; o.uv = TRANSFORM_TEX(v.texcoord, _MainTex); return o; &#125; fixed4 frag(v2f i) : SV_TARGET&#123; fixed3 worldNormal = normalize(i.worldNormal); fixed3 worldLightDir = normalize(UnityWorldSpaceLightDir(i.worldPos)); fixed4 texColor = tex2D(_MainTex, i.uv); fixed3 albedo = texColor.rgb * _Color.rgb; fixed3 ambient = UNITY_LIGHTMODEL_AMBIENT.xyz * albedo; fixed3 diffuse = _LightColor0.rgb * albedo * max(0, dot(worldNormal, worldLightDir)); return fixed4(ambient + diffuse,texColor.a * _AlphaScale); &#125; ENDCG &#125; Pass&#123; Tags &#123;"LightMode"="ForwardBase"&#125; // å‰”é™¤åé¢ Cull Back // åŸPass ZWrite Off Blend SrcAlpha OneMinusSrcAlpha CGPROGRAM #pragma vertex vert #pragma fragment frag #include "Lighting.cginc" fixed4 _Color; sampler2D _MainTex; float4 _MainTex_ST; fixed _AlphaScale; struct a2v&#123; float4 vertex : POSITION; float3 normal : NORMAL; float4 texcoord : TEXCOORD0; &#125;; struct v2f&#123; float4 pos : SV_POSITION; float3 worldNormal : TEXCOORD0; float3 worldPos : TEXCOORD1; float uv : TEXCOORD2; &#125;; v2f vert(a2v v)&#123; v2f o; o.pos = UnityObjectToClipPos(v.vertex); o.worldNormal = UnityObjectToWorldNormal(v.normal); o.worldPos = mul(unity_ObjectToWorld, v.vertex).xyz; o.uv = TRANSFORM_TEX(v.texcoord, _MainTex); return o; &#125; fixed4 frag(v2f i) : SV_TARGET&#123; fixed3 worldNormal = normalize(i.worldNormal); fixed3 worldLightDir = normalize(UnityWorldSpaceLightDir(i.worldPos)); fixed4 texColor = tex2D(_MainTex, i.uv); fixed3 albedo = texColor.rgb * _Color.rgb; fixed3 ambient = UNITY_LIGHTMODEL_AMBIENT.xyz * albedo; fixed3 diffuse = _LightColor0.rgb * albedo * max(0, dot(worldNormal, worldLightDir)); return fixed4(ambient + diffuse,texColor.a * _AlphaScale); &#125; ENDCG &#125; &#125; FallBack "Diffuse"&#125;]]></content>
      <categories>
        <category>shader</category>
      </categories>
      <tags>
        <tag>unity</tag>
        <tag>shader</tag>
        <tag>ã€Šshaderå…¥é—¨ç²¾è¦ã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Šshaderå…¥é—¨ç²¾è¦ã€‹ç¬”è®°-ç¬¬7ç« -åŸºç¡€çº¹ç†]]></title>
    <url>%2Fshader-r-standard-texture%2F</url>
    <content type="text"><![CDATA[çº¹ç†çš„æœ€åˆç›®çš„æ˜¯ä½¿ç”¨ä¸€å¼ å›¾ç‰‡æ¥æ§åˆ¶æ¨¡å‹çš„å¤–è§‚.ä½¿ç”¨çº¹ç†æ˜ å°„(texture mapping)æŠ€æœ¯,æˆ‘ä»¬å¯ä»¥æŠŠä¸€å¼ å›¾ç‰‡&quot;é»&quot;åœ¨æ¨¡å‹è¡¨é¢,é€çº¹ç´ (texel)åœ°æ§åˆ¶æ¨¡å‹çš„é¢œè‰² åœ¨ç¾å·¥äººå‘˜å»ºæ¨¡çš„æ—¶å€™,é€šå¸¸ä¼šåœ¨å»ºæ¨¡è½¯ä»¶ä¸­åˆ©ç”¨çº¹ç†å±•å¼€æŠ€æœ¯æŠŠçº¹ç†æ˜ å°„åæ ‡(texture-mapping coordinates)å­˜å‚¨åœ¨æ¯ä¸ªé¡¶ç‚¹ä¸Š. Â§ å•å¼ çº¹ç† Â§ å®è·µ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788Shader "Custom/7.1"&#123; Properties &#123; _Color ("Color Tint", Color) = (1, 1, 1, 1) // å£°æ˜ä¸€ä¸ª2Dçº¹ç† _MainTex ("Main Tex", 2D) = "white" &#123;&#125; _Specular ("Specular", Color) = (1, 1, 1, 1) _Gloss ("Gloss", Range(8.0, 256)) = 20 &#125; SubShader &#123; Pass &#123; Tags &#123; "LightMode"="ForwardBase" &#125; CGPROGRAM #pragma vertex vert #pragma fragment frag #include "Lighting.cginc" fixed4 _Color; sampler2D _MainTex; // _MainTexçš„åå­—ä¸æ˜¯éšæ„èµ·çš„,åœ¨Unityä¸­æˆ‘ä»¬ä½¿ç”¨çº¹ç†å_STæ¥å£°æ˜æŸä¸ªçº¹ç†çš„å±æ€§. // å…¶ä¸­STæ˜¯ç¼©æ”¾(scale)å’Œå¹³ç§»(translation)çš„ç¼©å†™. // å¯ä»¥åœ¨æè´¨é¢æ¿çš„çº¹ç†å±æ€§è°ƒæ•´è¿™äº›å€¼æ§åˆ¶æè´¨çš„å¹³ç§»å’Œç¼©æ”¾. float4 _MainTex_ST; fixed4 _Specular; float _Gloss; struct a2v &#123; float4 vertex : POSITION; float3 normal : NORMAL; // ä¼šæŠŠç¬¬ä¸€ç»„çº¹ç†å­˜å‚¨åˆ°è¯¥å˜é‡ä¸­ float4 texcoord : TEXCOORD0; &#125;; struct v2f &#123; float4 pos : SV_POSITION; float3 worldNormal : TEXCOORD0; float3 worldPos : TEXCOORD1; float2 uv : TEXCOORD2; &#125;; v2f vert(a2v v) &#123; v2f o; o.pos = UnityObjectToClipPos(v.vertex); o.worldNormal = UnityObjectToWorldNormal(v.normal); o.worldPos = mul(unity_ObjectToWorld, v.vertex).xyz; // ä½¿ç”¨çº¹ç†ç¼©æ”¾å’Œåç§»å±æ€§å¯¹é¡¶ç‚¹çº¹ç†åæ ‡è¿›è¡Œå˜æ¢ o.uv = v.texcoord.xy * _MainTex_ST.xy + _MainTex_ST.zw; // æˆ–ä½¿ç”¨unityçš„å†…ç½®å‡½æ•° // o.uv = TRANSFORM_TEX(v.texcoord, _MainTex); return o; &#125; fixed4 frag(v2f i) : SV_Target &#123; fixed3 worldNormal = normalize(i.worldNormal); fixed3 worldLightDir = normalize(UnityWorldSpaceLightDir(i.worldPos)); // ç”¨tex2Då¯¹çº¹ç†è¿›è¡Œé‡‡æ · // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦è¢«é‡‡æ ·çš„çº¹ç†,ç¬¬äºŒä¸ªå‚æ•°æ˜¯float2ç±»å‹çš„çº¹ç†åæ ‡ // è¿”å›è®¡ç®—å¾—åˆ°çš„çº¹ç´ å€¼ fixed3 albedo = tex2D(_MainTex, i.uv).rgb * _Color.rgb; fixed3 ambient = UNITY_LIGHTMODEL_AMBIENT.xyz * albedo; fixed3 diffuse = _LightColor0.rgb * albedo * max(0, dot(worldNormal, worldLightDir)); fixed3 viewDir = normalize(UnityWorldSpaceViewDir(i.worldPos)); fixed3 halfDir = normalize(worldLightDir + viewDir); fixed3 specular = _LightColor0.rgb * _Specular.rgb * pow(max(0, dot(worldNormal, halfDir)), _Gloss); return fixed4(ambient + diffuse + specular, 1.0); &#125; ENDCG &#125; &#125; FallBack "Specular"&#125; Â§ çº¹ç†çš„å±æ€§ Â§ Texture Type ä¹¦ä¸Šè®²çš„TextureTypeå¥½åƒè¿‡æ—¶äº†,ç°åœ¨æ˜¯è¿™æ ·çš„: è¿™é‡Œä½¿ç”¨æœ€æ™®é€šçš„texture,åœ¨åé¢çš„æ³•çº¿çº¹ç†ä¸€èŠ‚,æˆ‘ä»¬ä¼šä½¿ç”¨Normal mapç±»å‹,åœ¨åé¢çš„ç« èŠ‚ä¸­,æˆ‘ä»¬è¿˜ä¼šçœ‹åˆ°Cubemapç­‰é«˜çº§çº¹ç†ç±»å‹. æˆ‘ä»¬ä¹‹æ‰€ä»¥è¦ä¸ºçº¹ç†é€‰æ‹©åˆé€‚çš„ç±»å‹,æ˜¯å› ä¸ºåªæœ‰è¿™æ ·æ‰ä¼šè®©UnityçŸ¥é“æˆ‘ä»¬çš„æ„å›¾,ä¸ºUnity Shaderä¼ é€’æ­£ç¡®çš„çº¹ç†,å¹¶åœ¨ä¸€äº›æƒ…å†µä¸‹è®©Unityå¯¹è¯¥çº¹ç†è¿›è¡Œä¼˜åŒ– Â§ Alpha Source å¦‚æœé€‰æ‹©äº†From Gray Scale,é‚£ä¹ˆé€æ˜é€šé“çš„å€¼å°†ä¼šç”±æ¯ä¸ªåƒç´ çš„ç°åº¦å€¼ç”Ÿæˆ. å…³äºé€æ˜æ•ˆæœä¼šåœ¨ç¬¬8ç« è®²åˆ° Â§ Wrap Mode å½“çº¹ç†åæ ‡è¶…è¿‡[0, 1]è¿”å›åå°†ä¼šå¦‚ä½•è¢«å¹³é“º. Repeatä¸‹,çº¹ç†å°†ä¼šé‡å¤. Clampä¸‹å°†ä¼šå¯¹çº¹ç†è¿›è¡Œæˆªå–. Â§ Filter Mode å†³å®šäº†å½“çº¹ç†ç”±äºå˜æ¢è€Œäº§ç”Ÿæ‹‰ä¼¸æ—¶å°†ä¼šé‡‡ç”¨å“ªç§æ»¤æ³¢æ¨¡å¼. Filter Modeæ”¯æŒä¸‰ç§æ¨¡å¼: Point, Bilinear, Trilinear.å®ƒä»¬å¾—åˆ°çš„å›¾ç‰‡æ»¤æ³¢æ•ˆæœä¼šä¾æ¬¡æå‡,ä½†éœ€è¦æ¶ˆè€—çš„æ€§èƒ½ä¹Ÿä¾æ¬¡å¢å¤§ çº¹ç†æ»¤æ³¢ä¼šå½±å“æ”¾å¤§æˆ–ç¼©å°çº¹ç†æ—¶å¾—åˆ°çš„å›¾ç‰‡çš„è´¨é‡. çº¹ç†çš„ç¼©å°è¿‡ç¨‹æ¯”æ”¾å¤§æ›´å¤æ‚ä¸€äº›.ç¼©å°æ—¶,åŸçº¹ç†ä¸­çš„å¤šä¸ªåƒç´ å°†ä¼šå¯¹åº”ä¸€ä¸ªç›®æ ‡åƒç´ .çº¹ç†ç¼©å°æ›´åŠ å¤æ‚çš„åŸå› åœ¨äºæˆ‘ä»¬å¾€å¾€éœ€è¦å¤„ç†æŠ—é”¯é½¿é—®é¢˜,ä¸€ä¸ªæœ€å¸¸ä½¿ç”¨çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨å¤šçº§æ¸è¿œçº¹ç†(mipmapping)æŠ€æœ¯. å¤šçº§æ¸è¿œçº¹ç†æŠ€æœ¯å°†åŸçº¹ç†æå‰ç”¨æ»¤æ³¢å¤„ç†æ¥å¾—åˆ°å¾ˆå¤šæ›´å°çš„å›¾åƒ,å½¢æˆä¸€ä¸ªå›¾åƒé‡‘å­—å¡”,æ¯ä¸€å±‚éƒ½æ˜¯å¯¹ä¸Šä¸€å±‚å›¾åƒé™é‡‡æ ·çš„ç»“æœ.è¿™æ ·åœ¨å®æ—¶è¿è¡Œæ—¶,å°±å¯ä»¥å¿«é€Ÿå¾—åˆ°ç»“æœåƒç´ . ä¾‹å¦‚å½“æ‘„åƒæœºè¾ƒè¿œçš„æ—¶å€™,å¯ä»¥ç›´æ¥ä½¿ç”¨è¾ƒå°çš„çº¹ç†. ç¼ºç‚¹æ˜¯éœ€è¦ä½¿ç”¨ä¸€å®šç©ºé—´ç”¨äºå­˜å‚¨è¿™äº›å¤šçº§æ¸è¿œçº¹ç†,é€šå¸¸ä¼šå¤šå 33%çš„å†…å­˜ç©ºé—´. åœ¨Unityä¸­,æˆ‘ä»¬å¯ä»¥åœ¨çº¹ç†å¯¼å…¥é¢æ¿ä¸­,é¦–å…ˆå°†texture typeé€‰æ‹©æˆadvanced,å†å‹¾é€‰Generate Mip Mapså³å¯å¼€å¯å¤šçº§æ¸è¿œçº¹ç†æŠ€æœ¯. è¿™å¼ å›¾æ˜¯,ä»ä¸€ä¸ªå€¾æ–œè§’åº¦è§‚å¯Ÿä¸€ä¸ªç½‘æ ¼ç»“æ„çš„åœ°æ¿æ—¶,ä½¿ç”¨ä¸åŒçš„Filter Mode(åŒæ—¶ä¹Ÿä½¿ç”¨äº†å¤šçº§æ¸è¿œçº¹ç†æŠ€æœ¯)å¾—åˆ°çš„æ•ˆæœ. åœ¨å†…éƒ¨å®ç°ä¸Š,Pointæ¨¡å¼ä½¿ç”¨äº†æœ€é‚»è¿‘(nearest neighbor)æ»¤æ³¢.åœ¨æ”¾å¤§æˆ–ç¼©å°æ—¶,å®ƒçš„é‡‡æ ·åƒç´ æ•°ç›®é€šå¸¸åªæœ‰ä¸€ä¸ª,å› æ­¤å›¾åƒçœ‹èµ·æ¥å¯èƒ½ä¼šæœ‰åƒç´ é£æ ¼çš„æ•ˆæœ. è€ŒBilinearæ»¤æ³¢åˆ™ä½¿ç”¨äº†çº¿æ€§æ»¤æ³¢,å¯¹äºæ¯ä¸ªåƒç´ ,å®ƒä¼šæ‰¾åˆ°å››ä¸ªä¸´è¿‘åƒç´ ,ç„¶åå¯¹å®ƒä»¬è¿›è¡Œçº¿æ€§æ’å€¼æ··åˆåå¾—åˆ°æœ€ç»ˆåƒç´ ,å› æ­¤å›¾åƒçœ‹èµ·æ¥æ¨¡ç³Šäº†. è€ŒTrilinearæ»¤æ³¢å‡ ä¹æ˜¯å’ŒBilinearä¸€æ ·çš„,åªæ˜¯Trilinearè¿˜ä¼šåœ¨å¤šçº§æ¸è¿œçº¹ç†ä¹‹é—´è¿›è¡Œäº†æ··åˆ.å¦‚æœä¸€å¼ çº¹ç†æ²¡æœ‰ä½¿ç”¨å¤šçº§æ¸è¿œçº¹ç†æŠ€æœ¯,é‚£ä¹ˆTrilinearå¾—åˆ°çš„ç»“æœå°±å’ŒBilinearçš„å®Œå…¨ä¸€æ ·äº†. é€šå¸¸,æˆ‘ä»¬é€‰æ‹©Bilinearæ»¤æ³¢æ ¼å¼.éœ€è¦æ³¨æ„çš„æ˜¯,æœ‰æ—¶æˆ‘ä»¬ä¸å¸Œæœ›çº¹ç†çœ‹èµ·æ¥æ˜¯æ¨¡ç³Šçš„,ä¾‹å¦‚ä¸€äº›ç±»ä¼¼æ£‹ç›˜çš„çº¹ç†,æˆ‘ä»¬å¸Œæœ›å®ƒæ˜¯åƒç´ é£çš„,è¿™æ—¶æˆ‘ä»¬å¯èƒ½ä¼šé€‰ç”¨Pointæ¨¡å¼. Â§ çº¹ç†çš„æœ€å¤§å°ºå¯¸å’Œçº¹ç†æ¨¡å¼ å½“æˆ‘ä»¬åœ¨ä¸åŒå¹³å°å‘å¸ƒæ¸¸æˆæ—¶,éœ€è¦è€ƒè™‘ç›®æ ‡å¹³å°çš„çº¹ç†å°ºå¯¸å’Œè´¨é‡é—®é¢˜.Unityå…è®¸æˆ‘ä»¬ä¸ºä¸åŒç›®æ ‡å¹³å°é€‰æ‹©ä¸åŒçš„åˆ†è¾¨ç‡. å¦‚æœå¯¼å…¥çš„çº¹ç†å¤§å°è¶…è¿‡äº†Max Texture Sizeçš„è®¾ç½®å€¼,é‚£ä¹ˆUnityå°†ä¼šæŠŠè¯¥çº¹ç†ç¼©æ”¾ä¸ºè¿™ä¸ªæœ€å¤§åˆ†è¾¨ç‡. ç†æƒ³æƒ…å†µä¸‹,å¯¼å…¥çš„çº¹ç†å¯ä»¥æ˜¯éæ­£æ–¹å½¢çš„,å•é•¿å®½åº”è¯¥æ˜¯2çš„å¹‚.å¦‚æœä½¿ç”¨äº†é2çš„å¹‚çš„å¤§å°çš„çº¹ç†,é‚£ä¹ˆè¿™äº›çº¹ç†å¾€å¾€ä¼šå ç”¨æ›´å¤šçš„å†…å­˜ç©ºé—´,è€Œä¸”CPUè¯»å–è¯¥çº¹ç†çš„é€Ÿåº¦ä¹Ÿä¼šä¸‹é™.æœ‰ä¸€äº›å¹³å°ç”šè‡³ä¸æ”¯æŒè¿™ç§NPOTçº¹ç†,è¿™æ—¶Unityåœ¨å†…éƒ¨ä¼šæŠŠå®ƒç¼©æ”¾æˆæœ€è¿‘çš„2çš„å¹‚å¤§å°. è€ŒFormatåˆ™å†³å®šäº†Unityå†…éƒ¨ä½¿ç”¨å“ªç§æ ¼å¼æ¥å­˜å‚¨è¯¥çº¹ç†.å¦‚æœæˆ‘ä»¬å°†Texture Typeè®¾ç½®ä¸ºAdvanced,é‚£ä¹ˆä¼šæœ‰æ›´å¤šçš„Formatä¾›æˆ‘ä»¬é€‰æ‹©. Â§ å‡¹å‡¸æ˜ å°„ å‡¹å‡¸æ˜ å°„çš„ç›®çš„æ˜¯ä½¿ç”¨ä¸€å¼ çº¹ç†æ¥ä¿®æ”¹æ¨¡å‹è¡¨é¢çš„æ³•çº¿,ä»¥ä¾¿æ¨¡å‹æä¾›æ›´å¤šçš„ç»†èŠ‚. è¿™ç§æ–¹æ³•ä¸ä¼šçœŸçš„æ”¹å˜é¡¶ç‚¹ä½ç½®,åªæ˜¯æ˜¯æ¨¡å‹çœ‹èµ·æ¥å‡¹å‡¸ä¸å¹³ Â§ é«˜åº¦çº¹ç† ä½¿ç”¨ä¸€å¼ é«˜åº¦å›¾æ¥å®ç°å‡¹å‡¸æ˜ å°„ é«˜åº¦å›¾ä¸­å­˜å‚¨çš„æ˜¯å¼ºåº¦å€¼(intensity),å®ƒç”¨äºè¡¨ç¤ºæ¨¡å‹è¡¨é¢å±€éƒ¨çš„æµ·æ‹”é«˜åº¦. é¢œè‰²è¶Šæµ…è¡¨æ˜è¯¥ä½ç½®çš„è¡¨é¢è¶Šå‘å¤–å‡¸èµ·,è¶Šæ·±è¡¨æ˜è¯¥ä½ç½®çš„è¡¨é¢è¶Šå‘é‡Œå‡¹. è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯æ¯”è¾ƒç›´è§‚.æˆ‘ä»¬å¯ä»¥ä»é«˜åº¦å›¾æ˜ç¡®çš„çŸ¥é“ä¸€ä¸ªæ¨¡å‹è¡¨é¢çš„å‡¹å‡¸æƒ…å†µ. ç¼ºç‚¹æ˜¯è®¡ç®—æ›´åŠ å¤æ‚,åœ¨å®æ—¶è®¡ç®—ä¸­ä¸èƒ½ç›´æ¥å¾—åˆ°è¡¨é¢æ³•çº¿,è€Œæ˜¯ç”±åƒç´ çš„ç°åº¦å€¼è®¡ç®—è€Œå¾—.å› æ­¤éœ€è¦æ¶ˆè€—æ›´å¤šçš„æ€§èƒ½. Â§ æ³•çº¿çº¹ç† æ³•çº¿çº¹ç†ä¸­å­˜å‚¨çš„æ˜¯è¡¨é¢çš„æ³•çº¿æ–¹å‘.ç”±äºæ³•çº¿æ–¹å‘çš„åˆ†é‡èŒƒå›´åœ¨[-1, 1],è€Œåƒç´ çš„åˆ†é‡åœ¨[0, 1],å› æ­¤æˆ‘ä»¬éœ€è¦åšä¸€ä¸ªæ˜ å°„,é€šå¸¸ä½¿ç”¨çš„æ˜ å°„æ˜¯: pixel = (normal + 1)/2 è¿™è¦æ±‚æˆ‘ä»¬åœ¨Shaderä¸­å¯¹æ³•çº¿çº¹ç†è¿›è¡Œçº¹ç†é‡‡æ ·å,è¿˜éœ€è¦å¯¹ç»“æœè¿›è¡Œä¸€æ¬¡åæ˜ å°„çš„è¿‡ç¨‹,ä»¥å¾—åˆ°åŸå…ˆçš„æ³•çº¿æ–¹å‘.åæ˜ å°„çš„è¿‡ç¨‹å®é™…å°±æ˜¯ä½¿ç”¨ä¸Šé¢æ˜ å°„å‡½æ•°çš„é€†å‡½æ•°: normal = pixwl * 2 - 1 ç”±äºæ–¹å‘æ˜¯ç›¸å¯¹äºåæ ‡ç©ºé—´æ¥è¯´çš„,é‚£ä¹ˆæ³•çº¿çº¹ç†å­˜åœ¨å“ªä¸ªåæ ‡ç©ºé—´ä¸­å‘¢? Â§ æ¨¡å‹ç©ºé—´çš„æ³•çº¿çº¹ç†å’Œåˆ‡çº¿ç©ºé—´çš„æ³•çº¿çº¹ç† Â§ æ¨¡å‹ç©ºé—´çš„æ³•çº¿çº¹ç† object-space normal map å°†ä¿®æ”¹åçš„æ¨¡å‹ç©ºé—´çš„è¡¨é¢æ³•çº¿å­˜å‚¨åœ¨ä¸€å¼ çº¹ç†ä¸­. Â§ åˆ‡çº¿ç©ºé—´çš„æ³•çº¿çº¹ç† tangent-space normal space å¯¹äºæ¨¡å‹çš„æ¯ä¸ªé¡¶ç‚¹,ä»–éƒ½æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„åˆ‡çº¿ç©ºé—´. è¿™ä¸ªåˆ‡çº¿ç©ºé—´çš„åŸç‚¹å°±æ˜¯é¡¶ç‚¹æœ¬èº«,è€Œzè½´å°±æ˜¯é¡¶ç‚¹çš„æ³•çº¿æ–¹å‘,xè½´æ˜¯é¡¶ç‚¹çš„åˆ‡çº¿æ–¹å‘,è€Œyè½´å¯ç”±æ³•çº¿å’Œåˆ‡çº¿çš„å‰ç§¯è€Œå¾—,ä¹Ÿè¢«ç§°ä¸ºå‰¯åˆ‡çº¿(bitangent). Â§ æ˜ å°„åˆ°çº¹ç†ä¸Šçš„åŒºåˆ« ä»å›¾å¯ä»¥çœ‹å‡º,æ¨¡å‹ç©ºé—´ä¸‹çš„æ³•çº¿çº¹ç†çœ‹èµ·æ¥æ˜¯äº”é¢œå…­è‰²çš„,è€Œæ˜¯å› ä¸ºæ‰€æœ‰æ³•çº¿æ‰€åœ¨çš„åæ ‡ç©ºé—´æ˜¯åŒä¸€ä¸ªåæ ‡ç©ºé—´,å³æ¨¡å‹ç©ºé—´,è€Œæ¯ä¸ªç‚¹å­˜å‚¨çš„æ³•çº¿æ–¹å‘æ˜¯å„å¼‚çš„. æœ‰çš„æ˜¯(0, 1, 0),æ˜ å°„åå­˜å‚¨åˆ°çº¹ç†ä¸­å°±å¯¹åº”äº†RGB(0.5, 1, 0.5),æµ…ç»¿è‰²;æœ‰çš„æ˜¯(0, -1, 0),æ˜ å°„åå­˜å‚¨åˆ°çº¹ç†ä¸­å¯¹åº”äº†RGB(0.5,0,0.5)çš„ç´«è‰². è€Œåˆ‡çº¿ç©ºé—´ä¸‹çš„æ³•çº¿çº¹ç†å‡ ä¹å…¨éƒ¨éƒ½æ˜¯æµ…è“è‰².è¿™æ˜¯å› ä¸º,æ¯ä¸ªå‘ç°æ–¹å‘æ‰€åœ¨çš„åæ ‡ç©ºé—´æ˜¯ä¸ä¸€æ ·çš„,å³è¡¨é¢æ¯ç‚¹å„è‡ªçš„åˆ‡çº¿ç©ºé—´. è¿™ç§æ³•çº¿çº¹ç†å…¶å®æ˜¯å­˜å‚¨äº†æ¯ä¸ªç‚¹åœ¨å„è‡ªçš„åˆ‡çº¿ç©ºé—´ä¸­çš„æ³•çº¿æ‰°åŠ¨æ–¹å‘. ä¹Ÿå°±æ˜¯è¯´,å¦‚æœä¸€ä¸ªç‚¹çš„æ³•çº¿æ–¹å‘ä¸å˜,é‚£ä¹ˆå®ƒåœ¨å®ƒçš„åˆ‡çº¿ç©ºé—´ä¸­,æ–°æ³•çº¿æ–¹å‘å°±æ˜¯zè½´æ–¹å‘,å³(0,0,1),ç»è¿‡æ˜ å°„åå­˜å‚¨åœ¨çº¹ç†ä¸­å°±å¯¹åº”äº†RGB(0.5, 0.5, 1)çš„æµ…è“è‰². Â§ å¦‚ä½•é€‰æ‹© å®é™…ä¸Š,æ³•çº¿æœ¬èº«å­˜å‚¨åœ¨å“ªä¸ªç©ºé—´éƒ½æ˜¯å¯ä»¥çš„,ä½†é—®é¢˜æ˜¯,æˆ‘ä»¬çš„ç›®çš„æ˜¯è®¡ç®—å…‰ç…§è€Œéå•çº¯çš„è®¡ç®—æ³•çº¿. è€Œé€‰æ‹©å“ªä¸ªç©ºé—´,æ„å‘³ç€æˆ‘ä»¬éœ€è¦æŠŠä¸åŒçš„ä¿¡æ¯è½¬æ¢åˆ°ç›¸åº”çš„åæ ‡ç³»ä¸­. ä¾‹å¦‚,å¦‚æœé€‰æ‹©äº†åˆ‡çº¿ç©ºé—´,æˆ‘ä»¬éœ€è¦æŠŠä»æ³•çº¿çº¹ç†ä¸­å¾—åˆ°çš„æ³•çº¿æ–¹å‘ä»åˆ‡çº¿ç©ºé—´è½¬æ¢åˆ°ä¸–ç•Œç©ºé—´æˆ–å…¶ä»–ç©ºé—´ä¸­. æ€»ä½“æ¥è¯´,ç”¨æ¨¡å‹ç©ºé—´æ¥å­˜å‚¨æ³•çº¿çš„ä¼˜ç‚¹å¦‚ä¸‹: å®ç°ç®€å•,æ›´ä½³ç›´è§‚ æˆ‘ä»¬ç”šè‡³ä¸éœ€è¦æ¨¡å‹åŸå§‹çš„æ³•çº¿å’Œåˆ‡çº¿ç­‰ä¿¡æ¯,ä¹Ÿå°±æ˜¯è¯´,è®¡ç®—æ›´å°‘.ç”Ÿæˆå®ƒä¹Ÿå¾ˆç®€å•.è€Œå¦‚æœè¦ç”Ÿæˆåˆ‡çº¿ç©ºé—´ä¸‹çš„æ³•çº¿çº¹ç†,ç”±äºæ¨¡å‹çš„åˆ‡çº¿ä¸€èˆ¬æ˜¯å’ŒUVæ–¹å‘ç›¸åŒ,å› æ­¤æƒ³è¦å¾—åˆ°æ•ˆæœæ¯”è¾ƒå¥½çš„æ³•çº¿æ˜ å°„å°±è¦æ±‚çº¹ç†æ˜ å°„ä¹Ÿæ˜¯è¿ç»­çš„ è¾¹ç•Œå¹³æ»‘ åœ¨çº¹ç†åæ ‡çš„ç¼åˆå¤„å’Œå°–é”çš„è¾¹è§’éƒ¨åˆ†,å¯è§çš„çªå˜(ç¼éš™)è¾ƒå°‘.è¿™æ˜¯å› ä¸ºæ¨¡å‹ç©ºé—´ä¸‹çš„æ³•çº¿çº¹ç†å­˜å‚¨çš„æ˜¯ç»Ÿä¸€åæ ‡ç³»ä¸‹çš„æ³•çº¿ä¿¡æ¯.å› æ­¤åœ¨è¾¹ç•Œä¸Šé€šè¿‡æ’å€¼å¾—åˆ°çš„æ³•çº¿å¯ä»¥å¹³æ»‘å˜æ¢.è€Œåˆ‡çº¿ç©ºé—´ä¸‹çš„æ³•çº¿çº¹ç†ä¸­çš„æ³•çº¿ä¿¡æ¯æ˜¯ä¾é çº¹ç†åæ ‡çš„æ–¹å‘å¾—åˆ°çš„,å¯èƒ½ä¼šåœ¨è¾¹ç¼˜å¤„æˆ–å°–é”éƒ¨åˆ†é€ æˆæ›´å¤šçš„å¯è§ç¼åˆç°è±¡ ä½†ä½¿ç”¨åˆ‡çº¿ç©ºé—´æœ‰æ›´å¤šä¼˜ç‚¹: è‡ªç”±åº¦å¾ˆé«˜. æ¨¡å‹ç©ºé—´ä¸‹çš„æ³•çº¿çº¹ç†è®°å½•çš„æ˜¯ç»å¯¹çš„æ³•çº¿ä¿¡æ¯,ä»…å¯ç”¨äºåˆ›å»ºå®ƒæ—¶çš„é‚£ä¸ªæ¨¡å‹,è€Œåº”ç”¨åˆ°å…¶ä»–æ¨¡å‹ä¸Šæ•ˆæœå°±å®Œå…¨é”™è¯¯äº†.è€Œåˆ‡çº¿ç©ºé—´ä¸‹çš„æ³•çº¿çº¹ç†è®°å½•çš„æ˜¯ç›¸å¯¹æ³•çº¿ä¿¡æ¯,å³ä¾¿æŠŠè¯¥çº¹ç†åº”ç”¨åˆ°ä¸€ä¸ªå®Œå…¨ä¸åŒçš„ç½‘æ ¼ä¸Š,ä¹Ÿå¯ä»¥å¾—åˆ°ä¸€ä¸ªåˆç†çš„æ•ˆæœ. å¯è¿›è¡ŒUVåŠ¨ç”». æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ç§»åŠ¨ä¸€ä¸ªçº¹ç†çš„UVåæ ‡æ¥å®ç°ä¸€ä¸ªå‡¹å‡¸ç§»åŠ¨çš„æ•ˆæœ,ä½†ä½¿ç”¨æ¨¡å‹ç©ºé—´ä¸‹çš„æ³•çº¿çº¹ç†ä¼šå¾—åˆ°å®Œå…¨é”™è¯¯çš„ç»“æœ.è¿™ç§UVåŠ¨ç”»ç»å¸¸åœ¨æ°´æˆ–è€…ç«å±±ç†”å²©è¿™ç§ç±»å‹çš„ç‰©ä½“ä¸Šä¼šç»å¸¸ç”¨åˆ°. å¯å‹ç¼© ç”±äºåˆ‡çº¿ç©ºé—´ä¸‹çš„æ³•çº¿çº¹ç†ä¸­æ³•çº¿zæ–¹å‘æ€»æ˜¯æ­£æ–¹å‘,å› æ­¤æˆ‘ä»¬å¯ä»¥ä»…å­˜å‚¨XYæ–¹å‘,è€Œæ¨å¯¼å‡ºZæ–¹å‘.è€Œæ¨¡å‹ç©ºé—´ä¸‹çš„æ³•çº¿çº¹ç†ç”±äºæ¯ä¸ªæ–¹å‘éƒ½æ˜¯å¯èƒ½çš„,å› æ­¤å¿…é¡»å­˜å‚¨3ä¸ªæ–¹å‘çš„å€¼ä¸å¯å‹ç¼©. Â§ å®è·µ Â§ å®è·µ : åœ¨åˆ‡çº¿ç©ºé—´ä¸‹è®¡ç®—å…‰ç…§æ¨¡å‹ åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­é€šè¿‡çº¹ç†é‡‡æ ·å¾—åˆ°åˆ‡çº¿ç©ºé—´ä¸‹çš„æ³•çº¿,ç„¶åå†ä¸åˆ‡çº¿ç©ºé—´ä¸‹çš„è§†è§’,å…‰ç…§æ–¹å‘è¿›è¡Œè®¡ç®—,å¾—åˆ°æœ€ç»ˆçš„å…‰ç…§æ•ˆæœ. ä¸ºæ­¤,æˆ‘ä»¬éœ€è¦åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­æŠŠè§†è§’æ–¹å‘å’Œå…‰ç…§æ–¹å‘ä»æ¨¡å‹ç©ºé—´å˜æ¢åˆ°åˆ‡çº¿ç©ºé—´ä¸­.å³æˆ‘ä»¬éœ€è¦çŸ¥é“æ¨¡å‹ç©ºé—´åˆ°åˆ‡çº¿ç©ºé—´çš„å˜æ¢çŸ©é˜µ.è¿™ä¸ªçŸ©é˜µçš„é€†çŸ©é˜µ,å³ä»åˆ‡çº¿ç©ºé—´å˜æ¢åˆ°æ¨¡å‹ç©ºé—´çš„å˜æ¢çŸ©é˜µ,æ˜¯å¾ˆå®¹æ˜“æ±‚å¾—çš„: æˆ‘ä»¬åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­æŒ‰åˆ‡çº¿(xè½´),å‰¯åˆ‡çº¿(yè½´),æ³•çº¿(zè½´)çš„é¡ºåºæŒ‰åˆ—æ’åˆ—å³å¯å¾—åˆ°(æ•°å­¦åŸç†è§4.6.2èŠ‚).åœ¨4.6.2èŠ‚æˆ‘ä»¬å·²ç»çŸ¥é“,å¦‚æœä¸€ä¸ªå˜æ¢ä»…å­˜åœ¨æ—‹è½¬å’Œå¹³ç§»å˜æ¢,é‚£ä¹ˆè¿™ä¸ªçŸ©é˜µçš„è½¬ç½®çŸ©é˜µå°±ç­‰äºå®ƒçš„é€†çŸ©é˜µ,è€Œä»åˆ‡çº¿ç©ºé—´åˆ°æ¨¡å‹ç©ºé—´çš„å˜æ¢æ­£æ˜¯ç¬¦åˆè¿™æ ·çš„è¦æ±‚çš„å˜æ¢.å› æ­¤,æˆ‘ä»¬æŠŠåˆ‡çº¿(xè½´),å‰¯åˆ‡çº¿(yè½´),æ³•çº¿(zè½´)çš„é¡ºåºæŒ‰è¡Œæ’åˆ—(å› ä¸ºè½¬ç½®äº†),å³å¯å¾—åˆ°æ¨¡å‹ç©ºé—´åˆ°åˆ‡çº¿ç©ºé—´çš„å˜æ¢çŸ©é˜µ. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106Shader "Custom/7.1"&#123; Properties &#123; _Color ("Color Tint", Color) = (1, 1, 1, 1) _MainTex ("Main Tex", 2D) = "white" &#123;&#125; // æ³•çº¿çº¹ç†çš„å±æ€§ // "bump"æ˜¯Unityå†…ç½®çš„æ³•çº¿çº¹ç†. // Bump Scaleç”¨äºæ§åˆ¶å‡¹å‡¸ç¨‹åº¦,å½“å®ƒä¸º0æ—¶,æ„å‘³ç€æ³•çº¿çº¹ç†ä¸å¯¹å…‰ç…§äº§ç”Ÿä»»ä½•å½±å“ _BumpMap ("Normal Map", 2D) = "bump"&#123;&#125; _BumpScale ("Bump Scale", Float) = 1.0 _Specular ("Specular", Color) = (1, 1, 1, 1) _Gloss ("Gloss", Range(8.0, 256)) = 20 &#125; SubShader &#123; Pass &#123; Tags &#123;"LightMode" = "ForwardBase"&#125; CGPROGRAM #pragma vertex vert #pragma fragment frag #include "Lighting.cginc" fixed4 _Color; sampler2D _MainTex; float4 _MainTex_ST; sampler2D _BumpMap; float4 _BumpMap_ST; float _BumpScale; fixed4 _Specular; float _Gloss; struct a2v&#123; float4 vertex : POSITION; float3 normal : NORMAL; // åˆ‡çº¿æ–¹å‘èµ‹ç»™tangent float4 tangent : TANGENT; float4 texcoord : TEXCOORD0; &#125;; struct v2f&#123; float4 pos : SV_POSITION; float4 uv : TEXCOORD0; float3 lightDir : TEXCOORD1; float3 viewDir : TEXCOORD2; &#125;; v2f vert(a2v v) &#123; v2f o; o.pos = UnityObjectToClipPos(v.vertex); // uvçš„xyåˆ†é‡å­˜å‚¨_MainTexçš„çº¹ç†åæ ‡ // zwåˆ†é‡å­˜å‚¨_BumpMapçš„çº¹ç†åæ ‡ // åœ¨å›å¿†ä¸€ä¸‹,_Name_STçš„xyä»£è¡¨çš„æ˜¯ç¼©æ”¾å€¼,zwä»£è¡¨åç§»å€¼ o.uv.zw = v.texcoord.xy * _BumpMap_ST.xy + _BumpMap_ST.zw; // å®é™…ä¸Š,_MainTexå’Œ_BumpMapä½¿ç”¨åŒä¸€ç»„çº¹ç†åæ ‡å°±è¡Œäº†,å¯ä»¥å‡å°‘å·®å€¼å¯„å­˜å™¨çš„ä½¿ç”¨æ•°ç›®. // o.uv.xy = v.texcoord.xy * _MainTex_ST.xy + _MainTex_ST.zw; o.uv.xy = o.uv.zw; // è®¡ç®—å‰¯åˆ‡çº¿.åé¢ä¹˜ä»¥v.tangent.wæ˜¯å†³å®šå‰¯åˆ‡çº¿çš„æ–¹å‘ float3 binormal = cross(normalize(v.normal),normalize(v.tangent.xyz)) * v.tangent.w; // æŠŠåˆ‡çº¿(xè½´),å‰¯åˆ‡çº¿(yè½´),æ³•çº¿(zè½´)çš„é¡ºåºæŒ‰è¡Œæ’åˆ—æ¥å¾—åˆ°æ¨¡å‹ç©ºé—´åˆ°åˆ‡çº¿ç©ºé—´çš„å˜æ¢çŸ©é˜µrotation float3x3 rotation = float3x3(v.tangent.xyz,binormal,v.normal); // æŠŠå…‰ç…§å’Œè§†è§’æ–¹å‘å˜æ¢åˆ°åˆ‡çº¿ç©ºé—´ä¸­ o.lightDir = mul(rotation,ObjSpaceLightDir(v.vertex)).xyz; o.viewDir = mul(rotation,ObjSpaceViewDir(v.vertex)).xyz; return o; &#125; fixed4 frag(v2f i) : SV_Target&#123; fixed3 tangentLightDir = normalize(i.lightDir); fixed3 tangentViewDir = normalize(i.viewDir); // åˆ©ç”¨tex2Då¯¹_BumpMapè¿›è¡Œé‡‡æ · // æ³•çº¿çº¹ç†ä¸­å­˜å‚¨çš„æ˜¯æ³•çº¿ç»è¿‡æ˜ å°„åå¾—åˆ°çš„åƒç´ å€¼,å› æ­¤æˆ‘ä»¬è¦æŠŠå®ƒä»¬åæ˜ å°„å›æ¥ fixed4 packedNormal = tex2D(_BumpMap, i.uv.zw); fixed3 tangentNormal; tangentNormal = UnpackNormal(packedNormal); // ä¹˜ä»¥å‡¹å‡¸åº¦æ¥å¾—åˆ°xyåˆ†é‡. tangentNormal.xy *= _BumpScale; // ç”±xyå‘é‡è®¡ç®—zå‘é‡ tangentNormal.z = sqrt(1.0 - saturate(dot(tangentNormal.xy,tangentNormal.xy))); fixed3 albedo = tex2D(_MainTex, i.uv).rgb * _Color.rgb; fixed3 ambient = UNITY_LIGHTMODEL_AMBIENT.xyz * albedo; fixed3 diffuse = _LightColor0.rgb * albedo * max(0, dot(tangentNormal, tangentLightDir)); fixed3 halfDir = normalize(tangentLightDir + tangentViewDir); fixed3 specular = _LightColor0.rgb * _Specular.rgb * pow(max(0, dot(tangentNormal, halfDir)), _Gloss); return fixed4(ambient + diffuse + specular, 1.0); &#125; ENDCG &#125; &#125; FallBack "Specular"&#125; Â§ å®è·µ : åœ¨ä¸–ç•Œç©ºé—´ä¸‹è®¡ç®—å…‰ç…§æ¨¡å‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596Shader "Unity Shaders Book/Chapter 7/Normal Map In World Space" &#123; Properties &#123; _Color ("Color Tint", Color) = (1, 1, 1, 1) _MainTex ("Main Tex", 2D) = "white" &#123;&#125; _BumpMap ("Normal Map", 2D) = "bump" &#123;&#125; _BumpScale ("Bump Scale", Float) = 1.0 _Specular ("Specular", Color) = (1, 1, 1, 1) _Gloss ("Gloss", Range(8.0, 256)) = 20 &#125; SubShader &#123; Pass &#123; Tags &#123; "LightMode"="ForwardBase" &#125; CGPROGRAM #pragma vertex vert #pragma fragment frag #include "Lighting.cginc" fixed4 _Color; sampler2D _MainTex; float4 _MainTex_ST; sampler2D _BumpMap; float4 _BumpMap_ST; float _BumpScale; fixed4 _Specular; float _Gloss; struct a2v &#123; float4 vertex : POSITION; float3 normal : NORMAL; float4 tangent : TANGENT; float4 texcoord : TEXCOORD0; &#125;; struct v2f &#123; float4 pos : SV_POSITION; float4 uv : TEXCOORD0; float4 TtoW0 : TEXCOORD1; float4 TtoW1 : TEXCOORD2; float4 TtoW2 : TEXCOORD3; &#125;; v2f vert(a2v v) &#123; v2f o; o.pos = UnityObjectToClipPos(v.vertex); o.uv.xy = v.texcoord.xy * _MainTex_ST.xy + _MainTex_ST.zw; o.uv.zw = v.texcoord.xy * _BumpMap_ST.xy + _BumpMap_ST.zw; float3 worldPos = mul(unity_ObjectToWorld, v.vertex).xyz; fixed3 worldNormal = UnityObjectToWorldNormal(v.normal); fixed3 worldTangent = UnityObjectToWorldDir(v.tangent.xyz); fixed3 worldBinormal = cross(worldNormal, worldTangent) * v.tangent.w; // Compute the matrix that transform directions from tangent space to world space // Put the world position in w component for optimization o.TtoW0 = float4(worldTangent.x, worldBinormal.x, worldNormal.x, worldPos.x); o.TtoW1 = float4(worldTangent.y, worldBinormal.y, worldNormal.y, worldPos.y); o.TtoW2 = float4(worldTangent.z, worldBinormal.z, worldNormal.z, worldPos.z); return o; &#125; fixed4 frag(v2f i) : SV_Target &#123; // Get the position in world space float3 worldPos = float3(i.TtoW0.w, i.TtoW1.w, i.TtoW2.w); // Compute the light and view dir in world space fixed3 lightDir = normalize(UnityWorldSpaceLightDir(worldPos)); fixed3 viewDir = normalize(UnityWorldSpaceViewDir(worldPos)); // Get the normal in tangent space fixed3 bump = UnpackNormal(tex2D(_BumpMap, i.uv.zw)); bump.xy *= _BumpScale; bump.z = sqrt(1.0 - saturate(dot(bump.xy, bump.xy))); // Transform the narmal from tangent space to world space bump = normalize(half3(dot(i.TtoW0.xyz, bump), dot(i.TtoW1.xyz, bump), dot(i.TtoW2.xyz, bump))); fixed3 albedo = tex2D(_MainTex, i.uv).rgb * _Color.rgb; fixed3 ambient = UNITY_LIGHTMODEL_AMBIENT.xyz * albedo; fixed3 diffuse = _LightColor0.rgb * albedo * max(0, dot(bump, lightDir)); fixed3 halfDir = normalize(lightDir + viewDir); fixed3 specular = _LightColor0.rgb * _Specular.rgb * pow(max(0, dot(bump, halfDir)), _Gloss); return fixed4(ambient + diffuse + specular, 1.0); &#125; ENDCG &#125; &#125; FallBack "Specular"&#125; :TODO å¥½ç„¦èºå•Š,è¿™äº›å…ˆç•™ç€ä¸çœ‹â€¦ Â§ æ¸å˜çº¹ç†]]></content>
      <categories>
        <category>shader</category>
      </categories>
      <tags>
        <tag>unity</tag>
        <tag>shader</tag>
        <tag>ã€Šshaderå…¥é—¨ç²¾è¦ã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Šshaderå…¥é—¨ç²¾è¦ã€‹ç¬”è®°-ç¬¬6ç« -Unityä¸­çš„åŸºç¡€å…‰ç…§]]></title>
    <url>%2Fshader-r-standard-lighting%2F</url>
    <content type="text"><![CDATA[Â§ å…‰ç…§åŸºç¡€ æˆ‘ä»¬è¦æ¨¡æ‹ŸçœŸå®çš„å…‰ç…§ç¯å¢ƒæ¥ç”Ÿæˆä¸€å¼ å›¾åƒ,éœ€è¦è€ƒè™‘ä¸‰ç§ç‰©ç†ç°è±¡: é¦–å…ˆ,å…‰çº¿ä»å…‰æºä¸­è¢«å‘å°„å‡ºæ¥ ç„¶å,å…‰çº¿å’Œåœºæ™¯ä¸­çš„ä¸€äº›ç‰©ä½“ç›¸äº¤: ä¸€äº›å…‰çº¿è¢«ç‰©ä½“å¸æ”¶äº†,è€Œå¦ä¸€äº›å…‰çº¿è¢«æ•£å°„åˆ°å…¶ä»–æ–¹å‘ æœ€å,æ‘„åƒæœºå¸æ”¶äº†ä¸€äº›å…‰,äº§ç”Ÿäº†ä¸€å¼ å›¾åƒ Â§ å…‰æº åœ¨å…‰å­¦é‡Œ,æˆ‘ä»¬ç”¨è¾ç…§åº¦(irradiance)æ¥é‡åŒ–å…‰. å¯¹äºå¹³è¡Œå…‰æ¥è¯´,å®ƒçš„è¾ç…§åº¦å¯é€šè¿‡è®¡ç®—åœ¨å‚ç›´äºlçš„å•ä½é¢ç§¯ä¸Šå•ä½æ—¶é—´å†…ç©¿è¿‡çš„é‡æ¥å¾—åˆ°. Â§ å¸æ”¶å’Œæ•£å°„ å…‰çº¿ç”±å…‰æºå‘å°„å‡ºæ¥å,å°±ä¼šä¸ä¸€äº›ç‰©ä½“ç›¸äº¤,é€šå¸¸,ç›¸äº¤çš„ç»“æœæœ‰ä¸¤ä¸ª:æ•£å°„(scattering)å’Œå¸æ”¶(absorption) æ•£å°„åªæ”¹å˜å…‰çº¿çš„æ–¹å‘,ä½†ä¸æ”¹å˜å…‰çš„å¯†åº¦å’Œé¢œè‰².è€Œå¸æ”¶åªæ”¹å˜å…‰çº¿çš„å¯†åº¦å’Œé¢œè‰²,è€Œä¸æ”¹å˜å…‰çº¿çš„æ–¹å‘. å…‰çº¿åœ¨ç‰©ä½“è¡¨é¢ç»è¿‡æ•£å°„å,æœ‰ä¸¤ç§æ–¹å‘: ä¸€ç§å°†ä¼šæ•£å°„åˆ°ç‰©ä½“å†…éƒ¨,è¿™ç§ç°è±¡è¢«ç§°ä¸ºæŠ˜å°„(refraction)æˆ–é€å°„(transmission); å¦ä¸€ç§å°†ä¼šæ•£å°„åˆ°å¤–éƒ¨,è¿™ç§ç°è±¡è¢«ç§°ä¸ºåå°„(reflection). å¯¹äºä¸é€æ˜ç‰©ä½“,æŠ˜å°„è¿›å…¥ç‰©ä½“å†…éƒ¨çš„å…‰çº¿è¿˜ä¼šç»§ç»­ä¸å†…éƒ¨é¢—ç²’è¿›è¡Œç›¸äº¤,å…¶ä¸­ä¸€éƒ¨åˆ†å…‰çº¿æœ€åä¼šé‡æ–°å‘å°„å‡ºç‰©ä½“è¡¨é¢.è€Œå¦ä¸€äº›åˆ™ä¼šè¢«ç‰©ä½“å¸æ”¶.é‚£äº›ä»ç‰©ä½“è¡¨é¢é‡æ–°å‘å°„å‡ºçš„å…‰çº¿å°†å…·æœ‰å’Œå…¥å°„å…‰çº¿ä¸åŒçš„åˆ†å¸ƒå’Œé¢œè‰². ä¸ºäº†åŒºåˆ†è¿™ä¸¤ç§ä¸åŒçš„æ•£å°„æ–¹å‘,æˆ‘ä»¬åœ¨å…‰ç…§æ¨¡å‹ä¸­ä½¿ç”¨äº†ä¸åŒçš„éƒ¨åˆ†æ¥è®¡ç®—å®ƒä»¬: é«˜å…‰åå°„(specular)éƒ¨åˆ†è¡¨ç¤ºç‰©ä½“è¡¨é¢æ˜¯å¦‚ä½•åå°„å…‰çº¿çš„ æ¼«åå°„(diffuse)éƒ¨åˆ†åˆ™è¡¨ç¤ºæœ‰å¤šå°‘å…‰çº¿ä¼šè¢«æŠ˜å°„,å¸æ”¶å’Œæ•£å°„å‡ºè¡¨é¢. æ ¹æ®å…¥å°„å…‰çº¿çš„æ•°é‡å’Œæ–¹å‘,æˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºå°„å…‰çº¿çš„æ•°é‡å’Œæ–¹å‘,æˆ‘ä»¬å¸¸ç”¨å‡ºå°„åº¦(exitance)æ¥æè¿°å®ƒ. è¾ç…§åº¦å’Œå‡ºå°„åº¦ä¹‹é—´åªæ»¡è¶³å…ˆè¡Œå…³ç³»çš„,è€Œä»–ä»¬ä¹‹é—´çš„æ¯”å€¼å°±æ˜¯æè´¨çš„æ¼«åå°„å’Œé«˜å…‰åå°„å±æ€§ Â§ ç€è‰² ç€è‰²(shading)æ˜¯æŒ‡,æ ¹æ®æè´¨å±æ€§(å¦‚æ¼«åå°„å±æ€§ç­‰),å…‰æºä¿¡æ¯(å¦‚å…‰æºæ–¹å‘,è¾ç…§åº¦ç­‰),ä½¿ç”¨ä¸€ä¸ªç­‰å¼å»è®¡ç®—æ²¿æŸä¸ªè§‚å¯Ÿæ–¹å‘çš„å‡ºå°„åº¦çš„è¿‡ç¨‹.æˆ‘ä»¬ä¹ŸæŠŠè¿™ä¸ªç­‰å¼ç§°ä¸ºå…‰ç…§æ¨¡å‹(Lighting Model). ä¸åŒå…‰ç…§æ¨¡å‹æœ‰ä¸åŒçš„ç›®çš„.ä¾‹å¦‚ä¸€äº›ç”¨äºæè¿°ç²—ç³™çš„ç‰©ä½“è¡¨é¢,ä¸€äº›ç”¨äºæè¿°é‡‘å±è¡¨é¢ç­‰. Â§ BRDFå…‰ç…§æ¨¡å‹ æˆ‘ä»¬å·²ç»äº†è§£äº†å…‰çº¿åœ¨å’Œç‰©ä½“è¡¨é¢ç›¸äº¤æ—¶ä¼šå‘ç”Ÿé‚£äº›ç°è±¡. å½“å·²çŸ¥å…‰æºä½ç½®å’Œæ–¹å‘,è§†è§’æ–¹å‘æ—¶,æˆ‘ä»¬å°±éœ€è¦çŸ¥é“ä¸€ä¸ªè¡¨é¢æ˜¯å¦‚ä½•å’Œå…‰ç…§è¿›è¡Œäº¤äº’çš„. è€ŒBRDF(Bidirectional Reflection Distribution Function)å°±æ˜¯ç”¨æ¥å›ç­”è¿™äº›é—®é¢˜çš„. å½“ç»™å®šæ¨¡å‹çš„ä¸€ä¸ªç‚¹æ—¶,BRDFåŒ…å«äº†å¯¹è¯¥ç‚¹å¤–è§‚çš„å®Œæ•´çš„æè¿°.åœ¨å›¾å½¢å­¦ä¸­,BRDFå¤§å¤šä½¿ç”¨åŒä¸€ä¸ªæ•°å­¦å…¬å¼æ¥è¡¨ç¤º,å¹¶ä¸”æä¾›äº†ä¸€äº›å‚æ•°æ¥è°ƒæ•´æè´¨å±æ€§. é€šä¿—æ¥è®²,å½“ç»™å®šå…¥å°„å…‰çº¿å’Œè¾ç…§åº¦å,BRDFå¯ä»¥ç»™å‡ºåœ¨æŸä¸ªæ–¹å‘ä¸Šçš„å…‰ç…§èƒ½é‡åˆ†å¸ƒ. æœ¬ç« è®¾è®¡BRDFéƒ½æ˜¯å¯¹çœŸå®åœºæ™¯è¿›è¡Œç†æƒ³åŒ–å’Œç®€åŒ–åçš„æ¨¡å‹.å®ƒä»¬å¹¶ä¸èƒ½çœŸå®åœ°åæ˜ ç‰©ä½“å’Œå…‰ç…§ä¹‹é—´çš„äº¤äº’,è¿™äº›å…‰ç…§æ¨¡å‹è¢«ç§°ä¸ºæ˜¯ç»éªŒæ¨¡å‹. Â§ æ ‡å‡†å…‰ç…§æ¨¡å‹ æ ‡å‡†å…‰ç…§æ¨¡å‹åªå…³å¿ƒç›´æ¥å…‰ç…§(direct light),ä¹Ÿå°±æ˜¯é‚£äº›ä»å…‰æºå‘å°„å‡ºæ¥ç…§å°„åˆ°ç‰©ä½“è¡¨é¢å,ç»è¿‡ç‰©ä½“è¡¨é¢çš„ä¸€æ¬¡åå°„ç›´æ¥è¿›å…¥æ‘„åƒæœºå…‰çº¿. å®ƒçš„åŸºæœ¬æ–¹æ³•æ˜¯,æŠŠè¿›å…¥æ‘„åƒæœºå†…çš„å…‰çº¿åˆ†ä¸º4éƒ¨åˆ†,æ¯ä¸ªéƒ¨åˆ†ä½¿ç”¨ä¸€ç§æ–¹æ³•æ¥è®¡ç®—å®ƒçš„è´¡çŒ®åº¦. è‡ªå‘å…‰(emissive) è¿™ä¸ªéƒ¨åˆ†ç”¨äºæè¿°å½“ç»™å®šä¸€ä¸ªæ–¹å‘æ—¶,ä¸€ä¸ªè¡¨é¢æœ¬èº«ä¼šå‘è¯¥æ–¹å‘å‘å°„å¤šå°‘è¾å°„é‡.å¦‚æœæ²¡æœ‰å…¨å±€å…‰ç…§(global illuminiation)æŠ€æœ¯,è¿™äº›è‡ªå‘å…‰çš„è¡¨é¢å¹¶ä¸ä¼šçœŸçš„ç…§äº®ç‰©ä½“,åªæ˜¯å®ƒæœ¬èº«çœ‹èµ·æ¥æ›´äº®äº†è€Œå·². é«˜å…‰åå°„(specular) è¿™ä¸ªéƒ¨åˆ†ç”¨äºæè¿°å½“å…‰çº¿ä»å…‰æºç…§å°„åˆ°æ¨¡å‹è¡¨é¢æ—¶,è¯¥è¡¨é¢ä¼šåœ¨å®Œå…¨é•œé¢åå°„æ–¹å‘æ•£å°„å‡ºå¤šå°‘è¾å°„é‡. æ¼«åå°„(diffuse) è¿™ä¸ªéƒ¨åˆ†ç”¨äºæè¿°,å½“å…‰çº¿ä»å…‰æºç…§å°„åˆ°ç‰©ä½“è¡¨é¢æ—¶,è¯¥è¡¨é¢ä¼šå‘æ¯ä¸ªæ–¹å‘æ•£å°„å¤šå°‘è¾å°„é‡. ç¯å¢ƒå…‰(ambient) ç”¨äºæè¿°å…¶ä»–æ‰€æœ‰é—´æ¥å…‰ç…§ Â§ ç¯å¢ƒå…‰ è™½ç„¶æ ‡å‡†å…‰ç…§æ¨¡å‹çš„é‡ç‚¹åœ¨äºç›´æ¥å…‰ç…§,ä½†åœ¨çœŸå®ä¸–ç•Œä¸­,ç‰©ä½“ä¹Ÿå¯ä»¥è¢«é—´æ¥å…‰ç…§(indirect light)æ‰€ç…§äº®. é—´æ¥å…‰ç…§æ˜¯æŒ‡,å…‰çº¿é€šå¸¸ä¼šåœ¨å¤šä¸ªç‰©ä½“ä¹‹é—´åå°„,æœ€åè¿›å…¥æ‘„åƒæœº. åœ¨æ ‡å‡†å…‰ç…§æ¨¡å‹ä¸­,æˆ‘ä»¬ä½¿ç”¨ç¯å¢ƒå…‰æ¥è¿‘ä¼¼æ¨¡æ‹Ÿé—´æ¥å…‰ç…§. ç¯å¢ƒå…‰çš„è®¡ç®—éå¸¸ç®€å•,å®ƒé€šå¸¸æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡,åœºæ™¯ä¸­çš„æ‰€æœ‰ç‰©ä½“éƒ½ä½¿ç”¨è¿™ä¸ªç¯å¢ƒå…‰ Â§ è‡ªå‘å…‰ å…‰çº¿å¯ä»¥ç›´æ¥ç”±å…‰æºå‘å°„è¿›å…¥æ‘„åƒæœº,è€Œä¸éœ€è¦ç»è¿‡å…¶ä»–ç‰©ä½“çš„åå°„.æ ‡å‡†å…‰ç…§æ¨¡å‹ä½¿ç”¨è‡ªå‘å…‰æ¥è®¡ç®—è¿™ä¸ªéƒ¨åˆ†çš„è´¡çŒ®åº¦. å®ƒçš„è®¡ç®—ä¹Ÿå¾ˆç®€å•,å°±æ˜¯ç›´æ¥ä½¿ç”¨äº†æè´¨çš„è‡ªå‘å…‰é¢œè‰². é€šå¸¸åœ¨å®æ—¶æ¸²æŸ“ä¸­,è‡ªå‘å…‰çš„è¡¨é¢å¾€å¾€å¹¶ä¸ä¼šç…§äº®å‘¨å›´çš„è¡¨é¢,ä¹Ÿå°±æ˜¯è¯´,è¿™ä¸ªç‰©ä½“å¹¶ä¸ä¼šè¢«å½“åšæ˜¯ä¸€ä¸ªå…‰æº. Unity 5å¼•å…¥çš„å…¨å±€å…‰ç…§åˆ™å¯ä»¥æ¨¡æ‹Ÿè¿™ç±»è‡ªå‘å…‰ç‰©ä½“å¯¹å‘¨å›´ç‰©ä½“çš„å½±å“(è¯¦è§18ç« ) Â§ æ¼«åå°„ æ¼«åå°„å…‰ç…§æ˜¯ç”¨äºå¯¹é‚£äº›è¢«ç‰©ä½“è¡¨é¢å®Œå…¨éšæœºæ•£å°„åˆ°å„ä¸ªæ–¹å‘çš„è¾å°„åº¦è¿›è¡Œå»ºæ¨¡çš„. åœ¨æ¼«åå°„ä¸­,è§†è§’çš„ä½ç½®æ˜¯ä¸é‡è¦çš„,å› ä¸ºåå°„æ˜¯å®Œå…¨éšæœºçš„,å› æ­¤å¯ä»¥è®¤ä¸ºåœ¨ä»»ä½•åå°„æ–¹å‘ä¸Šçš„åˆ†å¸ƒéƒ½æ˜¯ä¸€æ ·çš„. ä½†æ˜¯å…¥å°„å…‰çº¿çš„è§’åº¦å¾ˆé‡è¦. æ¼«åå°„å…‰ç…§ç¬¦åˆå…°ä¼¯ç‰¹å®šå¾‹(Lambertâ€™s law): åå°„å…‰çº¿çš„å¼ºåº¦ä¸è¡¨é¢æ³•çº¿å’Œå…‰æºæ–¹å‘ä¹‹é—´çš„å¤¹è§’çš„ä½™å¼¦å€¼æˆæ­£æ¯” Â§ é«˜å…‰åå°„ è¿™é‡Œçš„é«˜å…‰åå°„æ˜¯ä¸€ç§ç»éªŒæ¨¡å‹,ä¹Ÿå°±æ˜¯è¯´,å®ƒå¹¶ä¸å®Œå…¨ç¬¦åˆçœŸå®ä¸–ç•Œä¸­çš„é«˜å…‰åå°„ç°è±¡.ä»–å¯ä»¥ç”¨äºè®¡ç®—é‚£äº›æ²¿ç€å®Œå…¨é•œé¢åå°„æ–¹å‘è¢«åå°„çš„å…‰çº¿,è¿™å¯ä»¥è®©ç‰©ä½“çœ‹ä¸Šå»æ˜¯æœ‰å…‰æ³½çš„,ä¾‹å¦‚é‡‘å±æè´¨ è®¡ç®—é«˜å…‰åå°„éœ€è¦çŸ¥é“çš„ä¿¡æ¯æ¯”è¾ƒå¤š,å¦‚è¡¨é¢æ³•çº¿,è§†è§’æ–¹å‘,å…‰æºæ–¹å‘,åå°„æ–¹å‘ç­‰. é«˜å…‰åå°„çš„æ•°å­¦è¡¨è¾¾å¼å¤ªå¤šäº†,è¿˜æ˜¯çœ‹ä¹¦å§,ä¹¦ä¸Šp124 Â§ é€åƒç´ è¿˜æ˜¯é€é¡¶ç‚¹ åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­è®¡ç®—å…‰ç…§æ¨¡å‹,è¢«ç§°ä½œé€åƒç´ å…‰ç…§(per-pixel lighting) åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­è®¡ç®—å…‰ç…§æ¨¡å‹,è¢«ç§°ä½œé€é¡¶ç‚¹å…‰ç…§(per-vertex lighting) Â§ é€åƒç´ å…‰ç…§ åœ¨é€åƒç´ å…‰ç…§ä¸­,æˆ‘ä»¬ä¼šä»¥æ¯ä¸ªåƒç´ ä¸ºåŸºç¡€,å¾—åˆ°å®ƒçš„æ³•çº¿(å¯ä»¥é€šè¿‡å¯¹é¡¶ç‚¹æ³•çº¿çš„æ’å€¼å¾—åˆ°,ä¹Ÿå¯ä»¥ä»æ³•çº¿çº¹ç†ä¸­é‡‡æ ·å¾—åˆ°),ç„¶åè¿›è¡Œå…‰ç…§æ¨¡æ‹Ÿçš„è®¡ç®—. è¿™ç§åœ¨é¢ç‰‡ä¹‹é—´å¯¹é¡¶ç‚¹æ³•çº¿è¿›è¡Œæ’å€¼çš„æŠ€æœ¯è¢«ç§°ä¸ºPhone ç€è‰²(Phone Shader),ä¹Ÿè¢«ç§°ä¸ºPhoneæ’å€¼æˆ–æ³•çº¿æ’å€¼ç€è‰²æŠ€æœ¯,è¿™ä¸åŒäºä¹‹å‰çš„Phoneæ¨¡å‹. Â§ é€é¡¶ç‚¹å…‰ç…§ ä¹Ÿè¢«ç§°ä¸ºé«˜æ´›å¾·ç€è‰²(Gouraud Shading). åœ¨é€é¡¶ç‚¹å…‰ç…§ä¸­,æˆ‘ä»¬åœ¨æ¯ä¸ªé¡¶ç‚¹ä¸Šè®¡ç®—å…‰ç…§,ç„¶ååœ¨æ¸²æŸ“å›¾å…ƒå†…éƒ¨è¿›è¡Œçº¿æ€§æ’å€¼,æœ€åè¾“å‡ºæˆé¢œè‰². å› ä¸ºé¡¶ç‚¹æ•°ç›®å¾€å¾€è¿œå°äºåƒç´ æ•°ç›®,å› æ­¤é€é¡¶ç‚¹å…‰ç…§çš„è®¡ç®—é‡å¾€å¾€è¦å°äºé€åƒç´ å…‰ç…§. ä½†æ˜¯,ç”±äºé€é¡¶ç‚¹å…‰ç…§ä¾èµ–äºçº¿æ€§æ’å€¼æ¥å¾—åˆ°åƒç´ å…‰ç…§,å› æ­¤,å½“å…‰ç…§æ¨¡å‹ä¸­æœ‰éçº¿æ€§è®¡ç®—(å…¥è®¡ç®—é«˜å…‰åå°„)æ—¶,é€é¡¶ç‚¹å…‰ç…§å°±ä¼šå‡ºé—®é¢˜. è€Œä¸”,ç”±äºé€é¡¶ç‚¹å…‰ç…§ä¼šåœ¨æ¸²æŸ“å›¾å…ƒå†…éƒ¨å¯¹é¡¶ç‚¹é¢œè‰²è¿›è¡Œæ’å€¼,è¿™ä¼šå¯¼è‡´æ¸²æŸ“å›¾å…ƒå†…éƒ¨çš„é¢œè‰²æ€»æ˜¯æš—äºé¡¶ç‚¹å¤„çš„æœ€é«˜é¢œè‰²å€¼.è¿™åœ¨æŸäº›æƒ…å†µä¸‹ä¼šäº§ç”Ÿæ˜æ˜¾çš„æ£±è§’, Â§ æ€»ç»“ æ ‡å‡†å…‰ç…§æ¨¡å‹å¹¶ä¸å®Œå…¨ç¬¦åˆçœŸå®ä¸–ç•Œä¸­çš„å…‰ç…§ç°è±¡,ä½†ç”±äºå®ƒçš„æ˜“ç”¨æ€§,è®¡ç®—é€Ÿåº¦å’Œå¾—åˆ°çš„æ•ˆæœéƒ½æ¯”è¾ƒå¥½,å› æ­¤ä»åœ¨è¢«å¹¿æ³›ä½¿ç”¨. æ ‡å‡†å…‰ç…§æ¨¡å‹ä¹Ÿè¢«ç§°ä¸ºPhoneå…‰ç…§æ¨¡å‹æˆ–Blinn-Phongå…‰ç…§æ¨¡å‹. ä½†è¿™ç§æ¨¡å‹ä¹Ÿæœ‰å¾ˆå¤šå±€é™æ€§. é¦–å…ˆ,å¾ˆå¤šé‡è¦çš„ç‰©ç†ç°è±¡æ— æ³•ç”¨è¯¥å…‰ç…§æ¨¡å‹è¡¨ç°å‡ºæ¥,ä¾‹å¦‚è²æ¶…å°”åå°„(Fresenel reflection). å…¶æ¬¡,è¯¥æ¨¡å‹æ˜¯å„é¡¹åŒæ€§(isotropic)çš„,ä¹Ÿå°±æ˜¯è¯´,å½“æˆ‘ä»¬å›ºå®šè§†è§’å’Œå…‰æºæ–¹å‘,æ—‹è½¬è¿™ä¸ªè¡¨é¢æ—¶,åå°„ä¸ä¼šå‘ç”Ÿä»»ä½•æ”¹å˜.ä½†æœ‰äº›è¡¨é¢æ˜¯å„å‘å¼‚æ€§(anisotropic)çš„,å¦‚æ‹‰ä¸é‡‘å±,æ¯›å‘ç­‰. Â§ Unityä¸­çš„ç¯å¢ƒå…‰å’Œè‡ªå‘å…‰ åœ¨Shaderä¸­,æˆ‘ä»¬åªéœ€é€šè¿‡UNITY_LIGHTMODEL_AMBIENTå°±å¯ä»¥å¾—åˆ°ç¯å¢ƒå…‰çš„é¢œè‰²å’Œå¼ºåº¦ä¿¡æ¯. è®¡ç®—è‡ªå‘å…‰åªéœ€è¦åœ¨ç‰‡å…ƒç€è‰²å™¨è¾“å‡ºæœ€åçš„é¢œè‰²ä¹‹å‰,æŠŠæè´¨çš„è‡ªå‘å…‰é¢œè‰²æ·»åŠ åˆ°è¾“å‡ºé¢œè‰²ä¸Šå³å¯. Â§ æ¼«åå°„å…‰ç…§æ¨¡å‹ Â§ å®è·µ: é€é¡¶ç‚¹æ¼«åå°„å…‰ç…§ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869Shader "Custom/6.4"&#123; Properties &#123; _Diffuse("Diffuse",Color) = (1, 1, 1, 1) &#125; Subshader&#123; Pass&#123; // ä½¿ç”¨TagsæŒ‡æ˜è¯¥Passçš„å…‰ç…§æ¨¡å¼ // åªæœ‰å®šä¹‰äº†æ­£ç¡®çš„LightMode,æˆ‘ä»¬æ‰èƒ½å¾—åˆ°ä¸€äº›Unityçš„å†…ç½®å…‰ç…§å˜é‡,å¦‚åé¢çš„_LightColor0 Tags&#123;"LightMode" = "ForwardBase"&#125; CGPROGRAM #pragma vertex vert #pragma fragment frag // éœ€è¦ä½¿ç”¨UNityä¸­çš„å†…ç½®å…‰ç…§å˜é‡,å¦‚åé¢çš„_lightColor0,è¿˜éœ€åŒ…å«Unityçš„å†…ç½®æ–‡ä»¶Lighting.cginc #include "Lighting.cginc" fixed4 _Diffuse; struct a2v&#123; float4 vertex : POSITION; float3 normal : NORMAL; &#125;; struct v2f&#123; float4 pos : POSITION; float3 color : COLOR; &#125;; v2f vert(a2v v)&#123; v2f o; // å°†é¡¶ç‚¹åæ ‡ä»æ¨¡å‹ç©ºé—´å˜æ¢åˆ°å‰ªè£ç©ºé—´ä¸­ o.pos = UnityObjectToClipPos(v.vertex); // é€šè¿‡UNITY_LIGHTMODEL_AMBIENTè·å¾—ç¯å¢ƒå…‰éƒ¨åˆ† fixed3 ambient = UNITY_LIGHTMODEL_AMBIENT.xyz; // å°†æ³•çº¿å˜æ¢è‡³ä¸–ç•Œåæ ‡ç©ºé—´ä¸‹,å¹¶è¿›è¡Œå½’ä¸€åŒ– fixed3 worldNormal = normalize(mul(v.normal,(float3x3)unity_WorldToObject)); // å…‰æºæ–¹å‘ç”±_WorldSpaceLightPos0å¾—åˆ°,å¹¶è¿›è¡Œå½’ä¸€åŒ– float3 worldLight = normalize(_WorldSpaceLightPos0.xyz); // é€šè¿‡_LightColor0è®¿é—®å…‰æºçš„é¢œè‰²å’Œå¼ºåº¦ä¿¡æ¯ // saturateæ˜¯Cgæä¾›çš„ä¸€ç§å‡½æ•°,å®ƒçš„ä½œç”¨æ˜¯æŠŠå‚æ•°æˆªå–åˆ°[0, 1]çš„èŒƒå›´å†…. // å°† æ³•çº¿ ä¸ å…‰æºæ–¹å‘ çš„ ç‚¹ç§¯ ä¸ å…‰æºçš„é¢œè‰² å’Œ å¼ºåº¦ ä»¥åŠ æè´¨çš„æ¼«åå°„é¢œè‰² ç›¸ä¹˜ å¾—åˆ° æœ€ç»ˆçš„æ¼«åå°„å…‰ç…§éƒ¨åˆ† fixed3 diffuse = _LightColor0.rgb * _Diffuse.rgb * saturate(dot(worldNormal,worldLight)); // å°†ç¯å¢ƒå…‰ä¸æ¼«åå°„å…‰éƒ¨åˆ†ç›¸åŠ ,å¾—åˆ°æœ€ç»ˆçš„å…‰ç…§ç»“æœ o.color = ambient + diffuse; return o; &#125; fixed4 frag(v2f i) : SV_TARGET&#123; return fixed4(i.color, 1.0); &#125; ENDCG &#125; &#125; FallBack "Diffuse"&#125; é¡¶ç‚¹ç€è‰²å™¨éƒ¨åˆ†è§£é‡Š: åœ¨ç¬¬ä¸€è¡Œ,æˆ‘ä»¬é¦–å…ˆå®šä¹‰äº†è¿”å›å€¼o.æˆ‘ä»¬å·²ç»é‡å¤è¿‡å¾ˆå¤šæ¬¡,é¡¶ç‚¹ç€è‰²å™¨æœ€åŸºæœ¬çš„ä»»åŠ¡å°±æ˜¯æŠŠé¡¶ç‚¹ä½ç½®ä»æ¨¡å‹ç©ºé—´è½¬æ¢åˆ°å‰ªè£ç©ºé—´ä¸­. ä¹¦ä¸Šæ¯”è¾ƒè¿‡æ—¶çš„æ–¹æ³•æ˜¯ ä½¿ç”¨Unityå†…ç½®çš„ æ¨¡å‹ä¸–ç•ŒæŠ•å½±çŸ©é˜µ UNITY_MATRIX_MVP æ¥å®Œæˆè¿™æ ·çš„åæ ‡å˜æ¢.å®é™…æ‰“ä»£ç çš„æ—¶å€™,ç¼–è¾‘å™¨é¡¶éƒ¨å‡ºç°äº†ä¸€è¡Œ 1// Upgrade NOTE: replaced 'mul(UNITY_MATRIX_MVP,*)' with 'UnityObjectToClipPos(*)' ,ç„¶åå¯¹åº”éƒ¨åˆ†çš„ä»£ç ä¹Ÿè¢«æ”¹äº†. æ¥ä¸‹æ¥æ˜¯çœŸæ­£è®¡ç®—æ¼«åå°„å…‰ç…§çš„éƒ¨åˆ†.å›å¿†ä¸€ä¸‹,ä¸ºäº†è®¡ç®—æ¼«åå°„æˆ‘ä»¬éœ€è¦çŸ¥é“4ä¸ªå‚æ•°. åœ¨å‰é¢çš„æ­¥éª¤ä¸­,æˆ‘ä»¬å·²ç»çŸ¥é“äº†æè´¨çš„æ¼«åå°„é¢œè‰²_Diffuseä»¥åŠé¡¶ç‚¹æ³•çº¿v.normal.è¿˜éœ€è¦çŸ¥é“å…‰æºçš„é¢œè‰²å’Œå¼ºåº¦ä¿¡æ¯ä»¥åŠå…‰æºæ–¹å‘. é€šè¿‡Unityæä¾›çš„å†…ç½®å˜é‡ _LightColor0 æ¥è®¿é—®è¯¥Passå¤„ç†å…‰æºçš„é¢œè‰²å’Œå¼ºåº¦ä¿¡æ¯ é€šè¿‡Unityæä¾›çš„å†…ç½®å˜é‡ _WorldSpaceLightPos0 å¾—åˆ°å…‰æºæ–¹å‘ éœ€è¦æ³¨æ„çš„æ˜¯,è¿™é‡Œå¯¹å…‰æºæ–¹å‘çš„è®¡ç®—ä¸å…·æœ‰é€šç”¨æ€§.å½“å‰åœºæ™¯ä¸‹,æˆ‘ä»¬å‡è®¾åªæœ‰ä¸€ä¸ªå…‰æºä¸”å…¶ç±»å‹æ˜¯å¹³è¡Œå…‰. å¦‚æœåœºæ™¯ä¸‹æœ‰å¤šä¸ªå…‰æºå¹¶ä¸”ç±»å‹æ˜¯ç‚¹å…‰æºç­‰å…¶ä»–ç±»å‹,ç›´æ¥ä½¿ç”¨_WorldSpaceLightPos0å°±ä¸èƒ½å¾—åˆ°æ­£ç¡®çš„ç»“æœ. è®¡ç®—å…‰æºæ–¹å‘ä¸æ³•çº¿çš„ç‚¹ç§¯æ—¶,åªæœ‰ä¸¤è€…å¤„äºç»Ÿä¸€åæ ‡ç©ºé—´ä¸‹,ä»–ä»¬çš„ç‚¹ç§¯æ‰æœ‰æ„ä¹‰. äºæ˜¯åœ¨è¿™é‡Œæˆ‘ä»¬é€‰ç”¨ä¸–ç•Œç©ºé—´. åœ¨å¾—åˆ°ä¸–ç•Œç©ºé—´ä¸‹çš„æ³•çº¿å’Œå…‰æºæ–¹å‘å,æˆ‘ä»¬éœ€è¦å¯¹å®ƒä»¬è¿›è¡Œå½’ä¸€åŒ–æ“ä½œ; åœ¨å¾—åˆ°å®ƒä»¬çš„ç‚¹ç§¯çš„ç»“æœå,æˆ‘ä»¬éœ€è¦é˜²æ­¢è¿™ä¸ªç»“æœä¸ºè´Ÿå€¼.ä¸ºæ­¤,æˆ‘ä»¬é€‰ç”¨saturateå‡½æ•°. saturateå‡½æ•°æ˜¯Cgæä¾›çš„ä¸€ç§å‡½æ•°,å®ƒçš„ä½œç”¨æ˜¯å¯ä»¥æŠŠå‚æ•°æˆªå–åˆ°[0, 1]èŒƒå›´å†…. å†å°† æ³•çº¿ ä¸ å…‰æºæ–¹å‘ çš„ ç‚¹ç§¯ ä¸ å…‰æºçš„é¢œè‰² å’Œ å¼ºåº¦ ä»¥åŠ æè´¨çš„æ¼«åå°„é¢œè‰² ç›¸ä¹˜ å¾—åˆ° æœ€ç»ˆçš„æ¼«åå°„å…‰ç…§éƒ¨åˆ† æœ€å,å°†ç¯å¢ƒå…‰ä¸æ¼«åå°„å…‰éƒ¨åˆ†ç›¸åŠ ,å¾—åˆ°æœ€ç»ˆçš„å…‰ç…§ç»“æœ æ€è€ƒ:æ³•çº¿ ä¸ å…‰æºæ–¹å‘ çš„ ç‚¹ç§¯ ä¸ å…‰æºçš„é¢œè‰² å’Œ å¼ºåº¦ ä»¥åŠ æè´¨çš„æ¼«åå°„é¢œè‰² ç›¸ä¹˜ çš„æ„ä¹‰ æˆ‘çš„ç†è§£: æ³•çº¿ ä¸ å…‰æºæ–¹å‘ çš„ ç‚¹ç§¯ çš„ç»“æœ,åº”è¯¥å°±æ˜¯å…‰æºæ–¹å‘åœ¨æ³•çº¿æ–¹å‘ä¸Šçš„æŠ•å½±å€¼. è¿™ä¸ªæŠ•å½±å€¼çš„æ„ä¹‰æ˜¯æ¼«åå°„çš„å¼ºåº¦.é¡¶ç‚¹æ³•çº¿æ­£å¯¹å…¥å°„å…‰çº¿,æ¼«åå°„æ•ˆæœæœ€å¼º.é¡¶ç‚¹æ³•çº¿ä¸å…¥å°„å…‰çº¿çš„å¤¹è§’å¤§äº90åº¦,åˆ™å®Œå…¨æ²¡æœ‰æ¼«åå°„æ•ˆæœ.ä¹‹åå†ä»¥å¼ºåº¦ä¸å…‰æºé¢œè‰²å’Œæè´¨é¢œè‰²ç›¸ä¹˜,å¾—åˆ°æ¼«åå°„é¢œè‰². å¯¹äºç»†åˆ†åº¦è¾ƒé«˜çš„æ¨¡å‹,é€é¡¶ç‚¹å…‰ç…§å·²ç»å¯ä»¥å¾—åˆ°æ¯”è¾ƒå¥½çš„å…‰ç…§æ•ˆæœäº†.ä½†å¯¹äºä¸€äº›ç»†åˆ†ç¨‹åº¦è¾ƒä½çš„æ¨¡å‹,é€é¡¶ç‚¹å…‰ç…§å°±ä¼šå‡ºç°ä¸€äº›è§†è§‰é—®é¢˜. ä¾‹å¦‚è¿™é‡Œå°±æœ‰ç‚¹é”¯é½¿ Â§ å®è·µ: é€åƒç´ æ¼«åå°„å…‰ç…§ ç›¸è¾ƒäºä¸Šä¸ªäººé€é¡¶ç‚¹å…‰ç…§,æŠŠå¯¹å…‰ç…§çš„è®¡ç®—ä»vertå‡½æ•°è½¬åˆ°äº†fragå‡½æ•°. 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152Shader "Custom/6.4"&#123; Properties &#123; _Diffuse("Diffuse",Color) = (1, 1, 1, 1) &#125; Subshader&#123; Pass&#123; Tags&#123;"LightMode" = "ForwardBase"&#125; CGPROGRAM #pragma vertex vert #pragma fragment frag #include "Lighting.cginc" fixed4 _Diffuse; struct a2v&#123; float4 vertex : POSITION; float3 normal : NORMAL; &#125;; struct v2f&#123; float4 pos : SV_POSITION; float3 worldNormal : TEXCOORD0; &#125;; v2f vert(a2v v)&#123; // vertå‡½æ•°ä¸­ä»…ä¼ é€’å…‰ç…§æ–¹å‘åŠæ³•çº¿æ–¹å‘ v2f o; o.pos = UnityObjectToClipPos(v.vertex); o.worldNormal = mul(v.normal,(float3x3)unity_WorldToObject); return o; &#125; fixed4 frag(v2f i) : SV_TARGET&#123; // è®¡ç®—åœ¨fragå‡½æ•°ä¸­è¿›è¡Œ fixed3 ambient = UNITY_LIGHTMODEL_AMBIENT.xyz; fixed3 worldNormal = normalize(i.worldNormal); fixed3 worldLightDir = normalize(_WorldSpaceLightPos0.xyz); fixed3 diffuse = _LightColor0.rgb * _Diffuse.rgb * saturate(dot(worldNormal,worldLightDir)); fixed3 color = ambient + diffuse; return fixed4(color, 1); &#125; ENDCG &#125; &#125; FallBack "Diffuse"&#125; é€åƒç´ å…‰ç…§æ›´ä½³å¹³æ»‘ ä½†æ˜¯,å³ä½¿ç”¨äº†é€åƒç´ æ¼«åå°„å…‰ç…§,æœ‰ä¸€ä¸ªé—®é¢˜ä»ç„¶å­˜åœ¨:åœ¨å…‰ç…§æ— æ³•åˆ°è¾¾çš„åŒºåŸŸ,æ¨¡å‹å¤–è§‚é€šå¸¸æ˜¯é»‘çš„,æ²¡æœ‰ä»»ä½•æ˜æš—å˜åŒ–,è¿™ä¼šä½¿æ¨¡å‹çš„èƒŒå…‰åŒºåŸŸçœ‹èµ·æ¥å°±åƒä¸€ä¸ªå¹³é¢ä¸€æ ·,å¤±å»æ¨¡å‹ç»†èŠ‚è¡¨ç°. å®é™…ä¸Šæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ç¯å¢ƒå…‰æ¥å¾—åˆ°éå…¨é»‘çš„æ•ˆæœ,ä½†å³ä¾¿è¿™æ ·ä¹Ÿæ— æ³•è§£å†³èƒŒå…‰é¢æ˜æš—ä¸€æ ·çš„ç¼ºç‚¹.ä¸ºæ­¤,æœ‰ä¸€ç§æ”¹å–„æŠ€æœ¯è¢«æå‡ºæ¥,è¿™å°±æ˜¯åŠå…°ä¼¯ç‰¹(Half Lambert)å…‰ç…§æ¨¡å‹ Â§ åŠå…°ä¼¯ç‰¹å…‰ç…§æ¨¡å‹ åœ¨ä¸Šé¢çš„å…‰ç…§å®ä¾‹ä¸­ä½¿ç”¨çš„å…‰ç…§æ¨¡å‹ä¹Ÿè¢«ç§°ä¸ºå…°ä¼¯ç‰¹å…‰ç…§æ¨¡å‹,å› ä¸ºå®ƒç¬¦åˆå…°ä¼¯ç‰¹å®šäº----åœ¨å¹³é¢æŸç‚¹æ¼«åå°„å…‰å¼ºä¸è¯¥åå°„ç‚¹çš„æ³•å‘é‡å’Œå…¥å°„è§’çš„ä½™å¼¦å€¼æˆæ­£æ¯”. åŠå…°ä¼¯ç‰¹å…‰ç…§æ¨¡å‹æ˜¯åœ¨åŸå…°ä¼¯ç‰¹å…‰ç…§æ¨¡å‹ä¸Šä¿®æ”¹çš„. ä¸åŸå…°ä¼¯ç‰¹æ¨¡å‹ç›¸æ¯”,ç‰ˆå…°ä¼¯ç‰¹å…‰ç…§æ¨¡å‹æ²¡æœ‰ä½¿ç”¨saturateå‡½æ•°æˆªå–æ³•å‘é‡å’Œå…‰ç…§æ–¹å‘çš„ç‚¹ç§¯,è€Œæ˜¯ä½¿ç‚¹ç§¯ç»“æœä¹˜ä»¥ä¸€ä¸ªå€¼å†åŠ ä¸Šä¸€ä¸ªå€¼.é€šå¸¸æƒ…å†µä¸‹.è¿™ä¸¤ä¸ªå€¼éƒ½ä¸º0.5,é€šè¿‡è¿™ç§æ–¹å¼å°±èƒ½æŠŠæ³•å‘é‡å’Œå…‰ç…§æ–¹å‘çš„ç‚¹ç§¯çš„ç»“æœèŒƒå›´ä»[-1, 1]æ˜ å°„åˆ°[0, 1]èŒƒå›´å†…. å¯¹äºæ¨¡å‹çš„èƒŒå…‰é¢,åŸå…°ä¼¯ç‰¹æ¨¡å‹ä¸­ç‚¹ç§¯ç»“æœå°†æ˜ å°„åˆ°åŒä¸€ä¸ªå€¼,å³0å¤„;è€ŒåŠå…°ä¼¯ç‰¹æ¨¡å‹ä¸­,èƒŒå…‰é¢ä¹Ÿä¼šæœ‰æ˜æš—å˜åŒ–. éœ€è¦æ³¨æ„çš„æ˜¯,åŠå…°ä¼¯ç‰¹å…‰ç…§æ¨¡å‹æ˜¯æ²¡æœ‰ä»»ä½•ç‰©ç†ä¾æ®çš„,ä»…ä»…æ˜¯ä¸€ä¸ªè§†è§‰åŠ å¼º. çƒçš„èƒŒå…‰é¢åœ¨ä¸¤ç§å…‰ç…§æ¨¡å‹ä¸‹çš„è¡¨ç°: åŸå…°ä¼¯ç‰¹å…‰ç…§æ¨¡å‹ åŠå…°ä¼¯ç‰¹å…‰ç…§æ¨¡å‹ Â§ é«˜å…‰åå°„å…‰ç…§æ¨¡å‹ åŸºæœ¬å…‰ç…§æ¨¡å‹ä¸­é«˜å…‰åå°„éƒ¨åˆ†çš„è®¡ç®—å…¬å¼: è®¡ç®—é«˜å…‰åå°„éœ€è¦å››ä¸ªå‚æ•°:å…¥å°„å…‰çº¿çš„é¢œè‰²å’Œå¼ºåº¦,æè´¨çš„é«˜å…‰åå°„ç³»æ•°,è§†è§’æ–¹å‘ä»¥åŠåå°„æ–¹å‘.å…¶ä¸­,åå°„æ–¹å‘å¯ä»¥ç”±è¡¨é¢æ³•çº¿å’Œå…‰æºæ–¹å‘è®¡ç®—è€Œå¾—. ä¸Šè¿°è®¡ç®—å¾ˆç®€å•,æ›´å¹¸è¿çš„æ˜¯,Cgæä¾›äº†è®¡ç®—åå°„æ–¹å‘çš„å‡½æ•°:reflect. å‡½æ•°: reflect(i,n) å‚æ•°: i: å…¥å°„æ–¹å‘;n:æ³•çº¿.å¯ä»¥æ˜¯float,float2,float3ç­‰. Â§ å®è·µ: é€é¡¶ç‚¹é«˜å…‰åå°„å…‰ç…§ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374Shader "Custom/6.4"&#123; Properties &#123; _Diffuse("Diffuse", Color) = (1, 1, 1, 1) // æè´¨çš„é«˜å…‰åå°„é¢œè‰² _Specular("Specular", Color) = (1, 1, 1, 1) // é«˜å…‰åŒºåŸŸçš„å¤§å° _Gloss("Gloss",range(8.0,256)) = 20 &#125; Subshader&#123; Pass&#123; Tags&#123;"LightMode" = "ForwardBase"&#125; CGPROGRAM #pragma vertex vert #pragma fragment frag #include "Lighting.cginc" fixed4 _Diffuse; fixed4 _Specular; float _Gloss; struct a2v&#123; float4 vertex : POSITION; float3 normal : NORMAL; &#125;; struct v2f&#123; float4 pos : SV_POSITION; fixed3 color : COLOR; &#125;; v2f vert(a2v v)&#123; v2f o; // æ¼«åå°„éƒ¨åˆ† o.pos = UnityObjectToClipPos(v.vertex); fixed3 ambient = UNITY_LIGHTMODEL_AMBIENT.xyz; fixed3 worldNormal = normalize(mul(v.normal, (float3x3)unity_WorldToObject)); fixed3 worldLightDir = normalize(_WorldSpaceLightPos0.xyz); fixed3 diffuse = _LightColor0.rgb * _Diffuse.rgb * saturate(dot(worldNormal,worldLightDir)); // å…¥å°„å…‰çº¿å…³äºæ³•çº¿çš„åå°„æ–¹å‘. // ç”±äºCgçš„reflectå‡½æ•°çš„å…¥å°„æ–¹å‘è¦æ±‚æ˜¯ç”±å…‰æºæŒ‡å‘äº¤ç‚¹å¤„çš„,å› æ­¤æˆ‘ä»¬è¦æŠŠworldLightDirå–ååå†ä¼ ç»™reflectå‡½æ•° fixed3 reflectDir = normalize(reflect(-worldLightDir,worldNormal)); // ä¸–ç•Œç©ºé—´ä¸‹çš„ æ‘„åƒæœºåæ ‡ä¸é¡¶ç‚¹åæ ‡ç›¸å‡,å¾—åˆ°è§†è§’æ–¹å‘ fixed3 viewDir = normalize(_WorldSpaceCameraPos.xyz - mul(unity_ObjectToWorld,v.vertex).xyz); // æ ¹æ®å…¬å¼å’Œæ‰€æœ‰çš„å››ä¸ªå‚æ•°,å¸¦å…¥å…¬å¼å¾—åˆ°é«˜å…‰åå°„çš„å…‰ç…§éƒ¨åˆ†. fixed3 specular = _LightColor0.rgb * _Specular.rgb * pow(saturate(dot(reflectDir,viewDir)),_Gloss); o.color = ambient + diffuse + specular; return o; &#125;; fixed4 frag(v2f i) : SV_TARGET&#123; return fixed4(i.color,1.0); &#125;; ENDCG &#125; &#125; // fallbackè°ƒæˆSpecular FallBack "Specular"&#125; ä½¿ç”¨é€é¡¶ç‚¹çš„æ–¹æ³•å¾—åˆ°çš„é«˜å…‰æ•ˆæœ,é«˜å…‰éƒ¨åˆ†åŠå…¶ä¸å¹³æ»‘:å› ä¸ºé«˜å…‰éƒ¨åˆ†çš„è®¡ç®—æ˜¯éçº¿æ€§çš„,è€Œåœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­åœ¨è¿›è¡Œæ’å€¼çš„è¿‡ç¨‹æ˜¯çº¿æ€§çš„,ç ´åäº†åŸè®¡ç®—çš„éçº¿æ€§å…³ç³». Â§ å®è·µ: é€ç‰‡å…ƒé«˜å…‰åå°„å…‰ç…§ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970Shader "Custom/6.4"&#123; Properties &#123; _Diffuse("Diffuse", Color) = (1, 1, 1, 1) // æè´¨çš„é«˜å…‰åå°„é¢œè‰² _Specular("Specular", Color) = (1, 1, 1, 1) // é«˜å…‰åŒºåŸŸçš„å¤§å° _Gloss("Gloss",range(8.0,256)) = 20 &#125; Subshader&#123; Pass&#123; Tags&#123;"LightMode" = "ForwardBase"&#125; CGPROGRAM #pragma vertex vert #pragma fragment frag #include "Lighting.cginc" fixed4 _Diffuse; fixed4 _Specular; float _Gloss; struct a2v&#123; float4 vertex : POSITION; float3 normal : NORMAL; &#125;; struct v2f&#123; float4 pos : SV_POSITION; float3 worldNormal : TEXCOORD0; float3 worldPos : TEXCOORD1; &#125;; v2f vert(a2v v)&#123; v2f o; o.pos = UnityObjectToClipPos(v.vertex); o.worldNormal = mul(v.normal, (float3x3)unity_WorldToObject); o.worldPos = mul(unity_ObjectToWorld,v.vertex).xyz; return o; &#125;; fixed4 frag(v2f i) : SV_TARGET&#123; fixed3 ambient = UNITY_LIGHTMODEL_AMBIENT.xyz; fixed3 worldNormal = normalize(i.worldNormal); fixed3 worldLightDir = normalize(_WorldSpaceLightPos0.xyz); fixed3 diffuse = _LightColor0.rgb * _Diffuse.rgb * saturate(dot(worldNormal,worldLightDir)); fixed3 reflectDir = normalize(reflect(-worldLightDir,worldNormal)); fixed3 specular = _LightColor0.rgb * _Specular.rgb * pow(saturate(dot(reflectDir,viewDir)),_Gloss); return fixed4((ambient + diffuse + specular),1.0); &#125;; ENDCG &#125; &#125; // fallbackè°ƒæˆSpecular FallBack "Specular"&#125; å°†è®¡ç®—è½¬ç§»åˆ°äº†fragå‡½æ•°ä¸­. Â§ Blinn-Phongå…‰ç…§æ¨¡å‹ ä¸Šé¢æ˜¯Phongå…‰ç…§æ¨¡å‹çš„å®ç°. è€ŒBlinnæ¨¡å‹æ²¡æœ‰ä½¿ç”¨åå°„æ–¹å‘,è€Œæ˜¯å¼•å…¥äº†ä¸€ä¸ªæ–°çš„çŸ¢é‡ è€ŒBlinnæ¨¡å‹è®¡ç®—é«˜å…‰åå°„çš„å…¬å¼æ˜¯ ç†è§£:ç†è§£ä¸ªå°–å„¿,è²Œä¼¼ä¹Ÿæ˜¯ä¸ªæ²¡æœ‰ç‰©ç†æ ¹æ®çš„ç»éªŒæ¨¡å‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768Shader "Custom/6.4"&#123; Properties &#123; _Diffuse("Diffuse", Color) = (1, 1, 1, 1) _Specular("Specular", Color) = (1, 1, 1, 1) _Gloss("Gloss",range(8.0,256)) = 20 &#125; Subshader&#123; Pass&#123; Tags&#123;"LightMode" = "ForwardBase"&#125; CGPROGRAM #pragma vertex vert #pragma fragment frag #include "Lighting.cginc" fixed4 _Diffuse; fixed4 _Specular; float _Gloss; struct a2v&#123; float4 vertex : POSITION; float3 normal : NORMAL; &#125;; struct v2f&#123; float4 pos : SV_POSITION; float3 worldNormal : TEXCOORD0; float3 worldPos : TEXCOORD1; &#125;; v2f vert(a2v v)&#123; v2f o; o.pos = UnityObjectToClipPos(v.vertex); o.worldNormal = mul(v.normal, (float3x3)unity_WorldToObject); o.worldPos = mul(unity_ObjectToWorld,v.vertex).xyz; return o; &#125;; fixed4 frag(v2f i) : SV_TARGET&#123; fixed3 ambient = UNITY_LIGHTMODEL_AMBIENT.xyz; fixed3 worldNormal = normalize(i.worldNormal); fixed3 worldLightDir = normalize(_WorldSpaceLightPos0.xyz); fixed3 diffuse = _LightColor0.rgb * _Diffuse.rgb * saturate(dot(worldNormal,worldLightDir)); // æ–°å¢ fixed3 viewDir = normalize(_WorldSpaceCameraPos.xyz - i.worldPos.xyz); // æ–°å¢ fixed3 halfDir = normalize(worldLightDir + viewDir); // å…¬å¼ fixed3 specular = _LightColor0.rgb * _Specular.rgb * pow(max(0,dot(worldNormal,halfDir)),_Gloss); return fixed4((ambient + diffuse + specular),1.0); &#125;; ENDCG &#125; &#125; FallBack "Specular"&#125; æ•ˆæœ: è°”è°”,æ€»æ„Ÿè§‰åŒºåˆ«ä¸å¤§â€¦é«˜å…‰èŒƒå›´æ¯”ä¸Šé¢å¤§äº†ç‚¹â€¦]]></content>
      <categories>
        <category>shader</category>
      </categories>
      <tags>
        <tag>unity</tag>
        <tag>shader</tag>
        <tag>ã€Šshaderå…¥é—¨ç²¾è¦ã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Šshaderå…¥é—¨ç²¾è¦ã€‹ç¬”è®°-ç¬¬5ç« -å¼€å§‹Unity Shaderå­¦ä¹ ä¹‹æ—…]]></title>
    <url>%2Fshader-r-start%2F</url>
    <content type="text"><![CDATA[Â§ æœ€ç®€å•çš„é¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨ Â§ é¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨çš„åŸºæœ¬ç»“æ„ 12345678910111213141516171819202122232425262728293031323334Shader "MyShaderName"&#123; Properties&#123; // å±æ€§ &#125; SubShader&#123; // é’ˆå¯¹æ˜¾å¡Açš„SubShader Pass&#123; // è®¾ç½®æ¸²æŸ“çŠ¶æ€å’Œæ ‡ç­¾ // å¼€å§‹Cgä»£ç ç‰‡æ®µ CGPROGRAM // è¯¥ä»£ç ç‰‡æ®µçš„ç¼–è¯‘æŒ‡ä»¤ #pragma vertex vert #pragma fragment frag // Cgä»£ç å†™åœ¨è¿™é‡Œ // ç»“æŸCgä»£ç æ®µ ENDCG // å…¶ä»–è®¾ç½® &#125; // å…¶ä»–éœ€è¦çš„Pass &#125; SubShader&#123; // é’ˆå¯¹æ˜¾å¡Bçš„SubShader &#125; // ä¸Šé¢çš„SubShaderéƒ½å¤±è´¥åç”¨äºå›è°ƒçš„Unity Shader Fallback "VertexLit"&#125; å…¶ä¸­æœ€é‡è¦çš„æ˜¯Passè¯­ä¹‰å—.æˆ‘ä»¬ç»å¤§å¤šæ•°çš„ä»£ç éƒ½æ˜¯å†™åœ¨Passè¯­ä¹‰å—ä¸­çš„. ä¸‹é¢æ˜¯ä¸€ä¸ªå®é™…çš„æœ€ç®€å•çš„é¡¶ç‚¹/ç‰‡æ®µç€è‰²å™¨ 12345678910111213141516171819202122Shader "Custom/myShader"&#123; SubShader&#123; Pass&#123; CGPROGRAM // å‘Šè¯‰unity,vertå‡½æ•°åŒ…å«äº†é¡¶ç‚¹ç€è‰²å™¨ä»£ç ,fragå‡½æ•°åŒ…å«äº†ç‰‡æ®µç€è‰²å™¨ä»£ç . #pragma vertex vert #pragma fragment frag float4 vert(float4 v : POSITION) : SV_POSITION &#123; return mul(UNITY_MATRIX_MVP, v); // MVPçŸ©é˜µæ˜¯: å½“å‰çš„æ¨¡å‹çŸ©é˜µÂ·è§‚å¯ŸçŸ©é˜µÂ·æŠ•å½±çŸ©é˜µ,ç”¨äºå°†é¡¶ç‚¹/æ–¹å‘çŸ¢é‡ä»æ¨¡å‹ç©ºé—´å˜æ¢åˆ°å‰ªè£ç©ºé—´ &#125; fixed4 frag() : SV_Target&#123; return fixed4(1.0, 1.0, 1.0, 1.0); &#125; ENDCG &#125; &#125;&#125; vertå‡½æ•°é‡Œçš„POSITIONå’ŒSV_POSITIONéƒ½æ˜¯Cg/HLSLä¸­çš„è¯­ä¹‰(semantics),æ˜¯ä¸å¯çœç•¥çš„,å®ƒä»¬å‘Šè¯‰ç³»ç»Ÿç”¨æˆ·éœ€è¦å“ªäº›è¾“å…¥å€¼,ä»¥åŠç”¨æˆ·çš„è¾“å‡ºæ˜¯ä»€ä¹ˆ.ä¾‹å¦‚è¿™é‡Œ: POSITIONå‘Šè¯‰Unity,æŠŠæ¨¡å‹é¡¶ç‚¹åæ ‡å¡«å……åˆ°å‚æ•°v SV_POSITIONå‘Šè¯‰Unity,é¡¶ç‚¹ç€è‰²å™¨çš„è¾“å‡ºæ˜¯å‰ªè£ç©ºé—´ä¸­çš„é¡¶ç‚¹åæ ‡ å¦‚æœæ²¡æœ‰è¿™äº›è¯­ä¹‰æ¥é™å®šè¾“å…¥å’Œè¾“å‡ºå‚æ•°çš„è¯,æ¸²æŸ“å™¨å°±å®Œå…¨ä¸çŸ¥é“ç”¨æˆ·çš„è¾“å…¥å’Œè¾“å‡ºæ˜¯ä»€ä¹ˆ,å› æ­¤ä¼šå¾—åˆ°é”™è¯¯çš„ç»“æœ. æœ¬ä¾‹ä¸­çš„fragå‡½æ•°æ²¡æœ‰ä»»ä½•è¾“å…¥,å®ƒçš„è¾“å‡ºæ˜¯ä¸€ä¸ªfixed4ç±»å‹çš„å˜é‡,å¹¶ä¸”ä½¿ç”¨äº†SV_Targetè¯­éŸ³è¿›è¡Œé™å®š. SV_Targrtä¹Ÿæ˜¯HLSLä¸­çš„ä¸€ä¸ªç³»ç»Ÿè¯­ä¹‰,å®ƒç­‰åŒäºå‘Šè¯‰æ¸²æŸ“å™¨,æŠŠç”¨æˆ·çš„è¾“å‡ºé¢œè‰²å­˜å‚¨åˆ°ä¸€ä¸ªæ¸²æŸ“ç›®æ ‡(render target)ä¸­,è¿™é‡Œå°†è¾“å‡ºåˆ°é»˜è®¤çš„å¸§ç¼“å­˜ä¸­. Â§ æ¨¡å‹æ•°æ®ä»å“ªæ¥ å¦‚æƒ³è¦å¾—åˆ°æ›´å¤šçš„æ¨¡å‹æ•°æ®(å¦‚é¡¶ç‚¹çš„çº¹ç†åæ ‡å’Œæ³•çº¿æ–¹å‘),æˆ‘ä»¬éœ€è¦ä¸ºé¡¶ç‚¹ç€è‰²å™¨å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ä½œä¸ºè¾“å…¥å‚æ•°. 1234567891011121314151617181920212223242526272829303132333435Shader "Custom/MyShader"&#123; SubShader&#123; Pass&#123; CGPROGRAM #pragma vertex vert #pragma fragment frag // ä½¿ç”¨ä¸€ä¸ªç»“æ„ä½“æ¥å®šä¹‰é¡¶ç‚¹ç€è‰²å™¨çš„è¾“å…¥ struct a2v&#123; // POSITIONè¯­ä¹‰å‘Šè¯‰Unity, ç”¨æ¨¡å‹ç©ºé—´çš„é¡¶ç‚¹åæ ‡å¡«å……vertexå˜é‡ float4 vertex : POSITION; // NORMALè¯­ä¹‰å‘Šè¯‰Unity, ç”¨æ¨¡å‹ç©ºé—´çš„æ³•çº¿æ–¹å‘å¡«å……normalå˜é‡ float3 normal : NORMAL; // TEXCOORD0è¯­ä¹‰å‘Šè¯‰Unity, ç”¨æ¨¡å‹çš„ç¬¬ä¸€å¥—çº¹ç†åæ ‡å¡«å……texcoordå˜é‡ float4 texcoord : TEXCOORD0; &#125;; float4 vert(a2v v) : SV_POSITION&#123; // ä½¿ç”¨v.vertexæ¥è®¿é—®æ¨¡å‹ç©ºé—´çš„é¡¶ç‚¹åæ ‡ return mul(UNITY_MATRIX_MVP, v.vertex); &#125; fixed4 frag() : SV_Target&#123; return fixed4(1.0, 1.0, 1.0, 1.0); &#125; ENDCG &#125; &#125;&#125; åœ¨ä¸Šé¢çš„ä»£ç ä¸­,æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªæ–°çš„ç»“æ„ä½“a2v,å®ƒåŒ…å«äº†é¡¶ç‚¹ç€è‰²å™¨éœ€è¦çš„æ¨¡å‹æ•°æ®. å¯¹äºé¡¶ç‚¹ç€è‰²å™¨çš„è¾“å…¥,Unityæ”¯æŒçš„è¯­ä¹‰æœ‰: POSITION, TANGENT, NORMAL, TEXCOORD0, TEXCOORD1, TEXCOORD2, TEXCOORD3, COLOR ç­‰. ä¸ºäº†æ–°å»ºä¸€ä¸ªç»“æ„ä½“, æˆ‘ä»¬å¿…é¡»ä½¿ç”¨å¦‚ä¸‹æ ¼å¼æ¥å®šä¹‰å®ƒ: 12345struct StructName&#123; Type Name : Semantic; Type Name : Semantic; ......&#125; ç„¶å,æˆ‘ä»¬åˆä¿®æ”¹äº†vertå‡½æ•°çš„è¾“å…¥ç±»å‹ä¸ºa2v. aè¡¨ç¤ºåº”ç”¨(application),vè¡¨ç¤ºé¡¶ç‚¹ç€è‰²å™¨(vertex shader),a2vçš„æ„æ€å°±æ˜¯æŠŠæ•°æ®ä»åº”ç”¨é˜¶æ®µä¼ é€’åˆ°é¡¶ç‚¹ç€è‰²å™¨ä¸­. Â§ é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨çš„é€šä¿¡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748Shader "Custom/Myshader"&#123; SubShader&#123; Pass&#123; CGPROGRAM #pragma vertex vert #pragma fragment frag struct a2v &#123; float4 vertex : POSITION; float3 normal : NORMAL; float4 texcoord : TEXCOORD0; &#125;; // ä½¿ç”¨ä¸€ä¸ªç»“æ„ä½“æ¥å®šä¹‰é¡¶ç‚¹ç€è‰²å™¨çš„è¾“å‡º struct v2f &#123; // SV_POSITIONè¯­ä¹‰å‘Šè¯‰Unity, posé‡ŒåŒ…å«äº†é¡¶ç‚¹åœ¨å‰ªè£ç©ºé—´ä¸­çš„ä½ç½®ä¿¡æ¯ float4 pos : SV_POSITION; // COLOR0è¯­ä¹‰å¯ä»¥ç”¨äºå­˜å‚¨é¢œè‰²ä¿¡æ¯ fixed3 color : COLOR0; &#125; v2f vert(a2v v)&#123; // å£°æ˜è¾“å‡ºçš„ç»“æ„ v2f o; o.pos = mul(UNITY_MATRIX_MVP, v.vertex); // v.normalåŒ…å«äº†é¡¶ç‚¹çš„æ³•çº¿æ–¹å‘, å…¶åˆ†é‡åœ¨[-1.0, 1.0] // ä¸‹é¢çš„ä»£ç å°†åˆ†é‡èŒƒå›´æ˜ å°„åˆ°äº†[0.0, 1.0] // å­˜å‚¨åˆ°o.colorä¸­ä¼ é€’ç»™ç‰‡å…ƒç€è‰²å™¨ o.color = v.normal * 0.5 + float3(0.5, 0.5, 0.5); return o; &#125; fixed4 frag(v2f i) : SV_Target&#123; // å°†æ’å€¼åçš„i.coloræ˜¾ç¤ºåˆ°å±å¹•ä¸Š return fixed4(i.color, 1.0); &#125; ENDCG &#125; &#125;&#125; åœ¨ä¸Šé¢ä»£ç ä¸­,æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªv2fç»“æ„ä½“åœ¨é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨ä¹‹é—´ä¼ é€’ä¿¡æ¯. é¡¶ç‚¹ç€è‰²å™¨çš„è¾“å‡ºç»“æ„ä¸­,å¿…é¡»åŒ…å«ä¸€ä¸ªè¯­ä¹‰ä¸ºSV_POSITIONçš„å˜é‡,å¦åˆ™æ¸²æŸ“å™¨ä¼šæ— æ³•å¾—åˆ°å‰ªè£ç©ºé—´ä¸­çš„é¡¶ç‚¹åæ ‡,ä¹Ÿå°±æ— æ³•å°†é¢œè‰²æ¸²æŸ“åˆ°å±å¹•ä¸Š. è‡³æ­¤,æˆ‘ä»¬å®Œæˆäº†é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨ä¹‹é—´çš„é€šä¿¡. éœ€è¦æ³¨æ„çš„æ˜¯,é¡¶ç‚¹ç€è‰²å™¨æ˜¯é€é¡¶ç‚¹è°ƒç”¨çš„,è€Œç‰‡å…ƒç€è‰²å™¨æ˜¯é€ç‰‡å…ƒè°ƒç”¨çš„,æ‰€ä»¥ç‰‡å…ƒç€è‰²å™¨çš„è¾“å…¥å®é™…ä¸Šæ˜¯æŠŠé¡¶ç‚¹ç€è‰²å™¨çš„è¾“å‡ºè¿›è¡Œæ’å€¼å¾—åˆ°çš„ç»“æœ. Â§ å¦‚ä½•ä½¿ç”¨å±æ€§ é€šè¿‡æè´¨,æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°è°ƒèŠ‚Unity Shaderä¸­çš„å‚æ•°,ä»è€Œéšæ—¶è°ƒæ•´æè´¨çš„æ•ˆæœ. è¿™äº›å‚æ•°éœ€è¦å¸è½½Propertiesè¯­ä¹‰å—ä¸­. 123456789101112131415161718192021222324252627282930313233343536373839404142Shader "Custom/Myshader"&#123; SubShader&#123; Pass&#123; CGPROGRAM #pragma vertex vert #pragma fragment frag // åœ¨Cgä»£ç ä¸­,æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªä¸å±æ€§çš„åç§°å’Œç±»å‹éƒ½åŒ¹é…çš„å˜é‡ fixed4 _Color; struct a2v &#123; float4 vertex : POSITION; float3 normal : NORMAL; float4 texcoord : TEXCOORD0; &#125;; struct v2f &#123; float4 pos : SV_POSITION; fixed3 color : COLOR0; &#125; v2f vert(a2v v)&#123; v2f o; o.pos = mul(UNITY_MATRIX_MVP, v.vertex); o.color = v.normal * 0.5 + float3(0.5, 0.5, 0.5); return o; &#125; fixed4 frag(v2f i) : SV_Target&#123; float3 c = i.color; // ä½¿ç”¨-Colorå±æ€§æ§åˆ¶è¾“å‡ºé¢œè‰² c *= _Color.rgb; return fixed4(c, 1.0); &#125; ENDCG &#125; &#125;&#125; åœ¨ä¸Šé¢çš„ä»£ç ä¸­,æˆ‘ä»¬é¦–å…ˆæ·»åŠ äº†Propertiesè¯­ä¹‰å—,å¹¶åœ¨å…¶ä¸­å£°æ˜äº†ä¸€ä¸ªå±æ€§_Color,å®ƒçš„ç±»å‹æ˜¯Color,åˆå§‹å€¼æ˜¯(1.0, 1.0, 1.0, 1.0). ä¸ºäº†åœ¨Cgä»£ç ä¸­ä½¿ç”¨,æˆ‘ä»¬è¿˜éœ€è¦åœ¨Cgä»£ç ç‰‡æ®µä¸­æå‰å®šä¹‰ä¸€ä¸ªæ–°çš„å˜é‡,è¿™ä¸ªå˜é‡çš„åç§°å’Œç±»å‹å¿…é¡»ä¸Propertiesä¸­çš„å±æ€§å®šä¹‰ç›¸åŒ¹é… ShaderLabå±æ€§ç±»å‹ Cgå˜é‡ç±»å‹ Color, Vector float4, half4, fixed4 Range, Float float, half, fixed 2D sampler2D Cube samplerCube 3D sampler3D æœ‰æ—¶ä¼šé‡åˆ°uniform 1uniform fixed4 _Color; uniformå…³é”®è¯æ˜¯Cgä¸­ä¿®é¥°å˜é‡å’Œå‚æ•°çš„ä¸€ç§ä¿®é¥°è¯,å®ƒä»…ä»…ç”¨äºæä¾›ä¸€äº›å…³äºè¯¥å˜é‡çš„åˆå§‹å€¼æ˜¯å¦‚ä½•æŒ‡å®šå’Œå­˜å‚¨çš„ç›¸å…³ä¿¡æ¯. åœ¨Unity Shaderä¸­,uniformå…³é”®è¯æ˜¯å¯ä»¥çœç•¥çš„ (æ‰€ä»¥uniformåˆ°åº•æ˜¯ä¸ªå•¥å•Šè‰) Â§ Unityå†…ç½®æ–‡ä»¶å’Œå˜é‡ ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…çš„ç¼–ç è¿‡ç¨‹,Unityæä¾›äº†å¾ˆå¤šå†…ç½®æ–‡ä»¶,è¿™äº›æ–‡ä»¶åŒ…å«äº†å¾ˆå¤šæå‰å®šä¹‰çš„å˜é‡,å‡½æ•°å’Œå®ç­‰. Â§ å†…ç½®çš„åŒ…å«æ–‡ä»¶ åŒ…å«æ–‡ä»¶(include file),æ˜¯ç±»ä¼¼äºC++å¤´æ–‡ä»¶çš„ä¸€ç§æ–‡ä»¶.åœ¨Unityä¸­,å®ƒä»¬çš„æ–‡ä»¶åç¼€æ˜¯.cginc. åœ¨ç¼–å†™shaderæ—¶,æˆ‘ä»¬å¯ä»¥ç”¨#includeæŠŠè¿™äº›æ–‡ä»¶åŒ…å«è¿›æ¥,è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨Unityä¸ºæˆ‘ä»¬æä¾›çš„ä¸€äº›éå¸¸æœ‰ç”¨çš„å˜é‡å’Œå¸®åŠ©å‡½æ•°.ä¾‹å¦‚: 1234CDPROGRAM// ...#include "UnityCG.cginc"// ... unity\Editor\Data\CGIncludesæ–‡ä»¶å¤¹åŒ…å«äº†ä¸€äº›å†…ç½®ç»„ä»¶æˆ–åŠŸèƒ½éœ€è¦çš„UnityShader. CDIncludesä¸­ä¸»è¦çš„åŒ…å«æ–‡ä»¶åŠå®ƒä»¬çš„ç”¨å¤„: æ–‡ä»¶å æè¿° UnityCG.cginc åŒ…å«äº†æœ€å¸¸ä½¿ç”¨çš„å¸®åŠ©å‡½æ•°,å®å’Œç»“æ„ä½“ç­‰ UnityShaderVriables.cginc åœ¨ç¼–è¯‘Unity Shaderæ—¶,ä¼šè¢«è‡ªåŠ¨åŒ…å«è¿›æ¥.åŒ…å«äº†è®¸å¤šå†…ç½®çš„å…¨å±€å˜é‡,å¦‚UNITY_MATRIX_MVPç­‰ Lighting.cginc åŒ…å«äº†å„ç§å†…ç½®çš„å…³ç…§æ¨¡å‹,å¦‚æœåŒ…å«çš„æ˜¯è¡¨é¢ç€è‰²å™¨çš„è¯ä¼šè‡ªåŠ¨åŒ…å«è¿›æ¥ HLSLSupport.cginc åœ¨ç¼–è¯‘Unity Shaderæ—¶,ä¼šè¢«è‡ªåŠ¨åŒ…å«è¿›æ¥.å£°æ˜äº†è®¸å¤šè·¨å¹³å°ç¼–è¯‘çš„å®å’Œå®šä¹‰ é™¤è¿™äº›ä¹‹å¤–,Unity5å¼•å…¥äº†è®¸å¤šæ–°çš„é‡è¦çš„åŒ…å«æ–‡ä»¶,å¦‚UnityShaderVariables.cginc, UnityStandardCore.cgincç­‰,è¿™äº›åŒ…å«æ–‡ä»¶ç”¨äºå®ç°åŸºäºç‰©ç†çš„æ¸²æŸ“,æˆ‘ä»¬ä¼šåœ¨18ç« å†æ¬¡é‡åˆ°å®ƒä»¬ UnityCG.cgincæ˜¯æˆ‘ä»¬æœ€å¸¸æ¥è§¦çš„ä¸€ä¸ªåŒ…å«æ–‡ä»¶.å®ƒæä¾›äº†å¾ˆå¤šç»“æ„ä½“å’Œå‡½æ•°æ–¹ä¾¿æˆ‘ä»¬ç¼–å†™Shader.ä¾‹å¦‚,æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨UnityCG.cgincä¸­é¢„å®šä¹‰çš„ç»“æ„ä½“ä½œä¸ºé¡¶ç‚¹ç€è‰²å™¨çš„è¾“å…¥å’Œè¾“å‡º. åç§° æè¿° åŒ…å«çš„å˜é‡ appdata_base å¯ç”¨äºé¡¶ç‚¹ç€è‰²å™¨çš„è¾“å…¥ é¡¶ç‚¹ä½ç½®,é¡¶ç‚¹æ³•çº¿,ç¬¬ä¸€ç»„çº¹ç†åæ ‡ appdata_tan å¯ç”¨äºé¡¶ç‚¹ç€è‰²å™¨çš„è¾“å…¥ é¡¶ç‚¹ä½ç½®,é¡¶ç‚¹åˆ‡çº¿,é¡¶ç‚¹æ³•çº¿,ç¬¬ä¸€ç»„çº¹ç†åæ ‡ appdata_full å¯ç”¨äºé¡¶ç‚¹ç€è‰²å™¨çš„è¾“å…¥ é¡¶ç‚¹ä½ç½®,é¡¶ç‚¹åˆ‡çº¿,é¡¶ç‚¹æ³•çº¿,å››ç»„(æˆ–æ›´å¤š)çº¹ç†åæ ‡ appdata_img å¯ç”¨äºé¡¶ç‚¹ç€è‰²å™¨çš„è¾“å…¥ é¡¶ç‚¹ä½ç½®,ç¬¬ä¸€ç»„çº¹ç†åæ ‡ v2f_img å¯ç”¨äºé¡¶ç‚¹ç€è‰²å™¨çš„è¾“å‡º è£å‰ªç©ºé—´ä¸­çš„ä½ç½® é™¤äº†ç»“æ„ä½“å¤–,UnityCG.cgincä¹Ÿæä¾›äº†ä¸€äº›å¸¸ç”¨çš„å¸®åŠ©å‡½æ•° å‡½æ•°å æè¿° float3 WorldSpaceViewDir(float4 v) è¾“å…¥ä¸€ä¸ªæ¨¡å‹ç©ºé—´ä¸­çš„é¡¶ç‚¹ä½ç½®,è¿”å›ä¸–ç•Œç©ºé—´ä¸­ä»è¯¥ç‚¹åˆ°æ‘„åƒæœºçš„è§‚å¯Ÿæ–¹å‘ float3 ObjSpaceViewDir(float4 v) è¾“å…¥ä¸€ä¸ªæ¨¡å‹ç©ºé—´ä¸­çš„é¡¶ç‚¹ä½ç½®,è¿”å›æ¨¡å‹ç©ºé—´ä¸­è¯¥ç‚¹åˆ°æ‘„åƒæœºçš„è§‚å¯Ÿæ–¹å‘ float3 WorldSpaceLightDir(float4 v) ä»…å¯ç”¨äºå‰å‘æ¸²æŸ“ä¸­.è¾“å…¥ä¸€ä¸ªæ¨¡å‹ç©ºé—´ä¸­çš„é¡¶ç‚¹ä½ç½®,è¿”å›ä¸–ç•Œç©ºé—´ä¸­ä»è¯¥ç‚¹åˆ°å…‰æºçš„å…‰ç…§æ–¹å‘.æ²¡æœ‰è¢«å½’ä¸€åŒ– float3 ObjSpaceLightDir(float4 v) ä»…å¯ç”¨äºå‰å‘æ¸²æŸ“ä¸­.è¾“å…¥ä¸€ä¸ªæ¨¡å‹ç©ºé—´ä¸­çš„é¡¶ç‚¹ä½ç½®,è¿”å›æ¨¡å‹ç©ºé—´ä¸­ä»è¯¥ç‚¹åˆ°å…‰æºçš„å…‰ç…§æ–¹å‘.æ²¡æœ‰è¢«å½’ä¸€åŒ– float3 UnityObjectToWorldNormal(float3 norm) æŠŠæ³•çº¿æ–¹å‘ä»æ¨¡å‹ç©ºé—´å˜æ¢åˆ°ä¸–ç•Œç©ºé—´ä¸­ float3 UnityObjectToWorldDir(float3 dir) æŠŠæ–¹å‘çŸ¢é‡ä»æ¨¡å‹ç©ºé—´å˜æ¢åˆ°ä¸–ç•Œç©ºé—´ä¸­ float3 UnityWordToObjectDir(float3 dir) æŠŠæ–¹å‘çŸ¢é‡ä»ä¸–ç•Œç©ºé—´å˜æ¢åˆ°æ¨¡å‹ç©ºé—´ä¸­ Â§ å†…ç½®çš„å˜é‡ Unityè¿˜æä¾›äº†ç”¨äºè®¿é—®æ—¶é—´,å…‰ç…§,é›¾æ•ˆå’Œç¯å¢ƒå…‰ç­‰ç›®çš„çš„å˜é‡. è¿™äº›å†…ç½®å˜é‡å¤§å¤šä½äºUnityShaderVariables.cgincä¸­,ä¸å…‰ç…§æœ‰å…³çš„å†…ç½®å˜é‡è¿˜ä¼šä½äºLighting.cginc, AutoLighting.cgincç­‰æ–‡ä»¶ä¸­. åé¢é‡åˆ°å†è¯¦ç»†è®²è§£ Â§ Unityæä¾›çš„Cg/HLSLè¯­ä¹‰ Â§ è¯­ä¹‰ è¯­ä¹‰å°±æ˜¯ä¸€ä¸ªèµ‹ç»™Shaderçš„è¾“å…¥å’Œè¾“å‡ºçš„å­—ç¬¦ä¸²,è¿™ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾äº†è¿™ä¸ªå‚æ•°çš„å«ä¹‰.é€šä¿—åœ°è®²,è¿™äº›è¯­ä¹‰å¯ä»¥è®©ShaderçŸ¥é“ä»å“ªé‡Œè¯»å–æ•°æ®,å¹¶æŠŠæ•°æ®è¾“å‡ºåˆ°å“ªé‡Œ. è¯­ä¹‰åœ¨Cg/HLSLçš„Shaderæµæ°´çº¿ä¸­æ˜¯ä¸å¯æˆ–ç¼ºçš„.éœ€è¦æ³¨æ„çš„æ˜¯,Unityå¹¶æ²¡æœ‰æ”¯æŒæ‰€æœ‰è¯­ä¹‰. é€šå¸¸æƒ…å†µä¸‹,è¿™äº›è¾“å…¥è¾“å‡ºå˜é‡å¹¶ä¸éœ€è¦æœ‰ç‰¹åˆ«çš„æ„ä¹‰.ä¹Ÿå°±æ˜¯è¯´,æˆ‘ä»¬å¯ä»¥è‡ªè¡Œå†³å®šè¿™äº›å˜é‡çš„ç”¨é€”. åœ¨DX 10ä¹‹å,æœ‰ä¸€ç§æ–°çš„è¯­ä¹‰ç±»å‹,å°±æ˜¯ç³»ç»Ÿæ•°å€¼è¯­ä¹‰(system-value semantics).è¿™ç±»è¯­ä¹‰æ˜¯ä»¥SVå¼€å¤´çš„,SVä»£è¡¨çš„å«ä¹‰å°±æ˜¯ç³»ç»Ÿæ•°å€¼(system-value).è¿™äº›è¯­ä¹‰åœ¨æ¸²æŸ“æµæ°´çº¿ä¸­æœ‰ç‰¹æ®Šçš„å«ä¹‰.ä¾‹å¦‚æˆ‘ä»¬ç”¨SV_POSITIONè¯­ä¹‰å»ä¿®é¥°é¡¶ç‚¹ç€è‰²å™¨çš„è¾“å‡ºå˜é‡pos,é‚£ä¹ˆå°±è¡¨ç¤ºposåŒ…å«äº†å¯ç”¨äºå…‰æ …åŒ–çš„å˜æ¢åçš„é¡¶ç‚¹åæ ‡. è¿™äº›è¯­ä¹‰ä¿®é¥°çš„å˜é‡æ—¶ä¸å¯ä»¥éšæ„èµ‹å€¼çš„,å› ä¸ºæµæ°´çº¿éœ€è¦ä½¿ç”¨å®ƒä»¬æ¥å®Œæˆç‰¹å®šçš„ç›®çš„.ä¾‹å¦‚æ¸²æŸ“å¼•æ“ä¼šæŠŠç”¨SV_POSITIONä¿®é¥°çš„å˜é‡ç»è¿‡å…‰æ …åŒ–åæ˜¾ç¤ºåœ¨å±å¹•ä¸Š. æœ‰æ—¶ä¼šçœ‹åˆ°åŒä¸€ä¸ªå˜é‡åœ¨ä¸åŒçš„Shaderé‡Œé¢ä½¿ç”¨äº†ä¸åŒçš„è¯­ä¹‰ä¿®é¥°.ä¾‹å¦‚,ä¸€äº›Shaderä¼šä½¿ç”¨POSITIONè€ŒéSV_POSITIONæ¥ä¿®é¥°é¡¶ç‚¹ç€è‰²å™¨çš„è¾“å‡º.SV_POSITIONæ˜¯DirectX 10ä¸­æ–°å¼•å…¥çš„ç³»ç»Ÿæ•°å€¼è¯­ä¹‰,åœ¨ç»å¤§å¤šæ•°å¹³å°ä¸Š,å®ƒå’ŒPOSITIONæ˜¯ç­‰ä»·çš„,ä½†åœ¨æŸäº›å¹³å°(ä¾‹å¦‚ç´¢å°¼PS4)ä¸Šå¿…é¡»ä½¿ç”¨SV_POSITIONæ¥ä¿®é¥°é¡¶ç‚¹ç€è‰²å™¨çš„è¾“å‡º.å¦åˆ™æ— æ³•è®©Shaderæ­£å¸¸å·¥ä½œ. å› æ­¤,å¯¹äºè¿™äº›æœ‰ç‰¹æ®Šå«ä¹‰çš„å˜é‡æˆ‘ä»¬æœ€å¥½ä½¿ç”¨SVå¼€å¤´çš„è¯­ä¹‰è¿›è¡Œä¿®é¥°. Â§ Unityæ”¯æŒçš„è¯­ä¹‰ Â§ ä»åº”ç”¨é˜¶æ®µä¼ é€’æ¨¡å‹æ•°æ®ç»™é¡¶ç‚¹ç€è‰²å™¨æ—¶Unityæ”¯æŒçš„å¸¸ç”¨è¯­ä¹‰ è¯­ä¹‰ æè¿° POSITION æ¨¡å‹ç©ºé—´ä¸­çš„é¡¶ç‚¹ä½ç½®,é€šå¸¸æ˜¯float4ç±»å‹ NORMAL é¡¶ç‚¹æ³•çº¿,é€šå¸¸æ˜¯float3ç±»å‹ TANGENT é¡¶ç‚¹åˆ‡çº¿,é€šå¸¸æ˜¯float4ç±»å‹ TEXCOORDn è¯¥é¡¶ç‚¹çš„çº¹ç†åæ ‡.é€šå¸¸æ˜¯float2æˆ–float4ç±»å‹ COLOR é¡¶ç‚¹é¢œè‰²,é€šå¸¸æ˜¯fixed4æˆ–è€…float4ç±»å‹ å…¶ä¸­TEXCOORDnæ˜¯æŒ‡TEXCOORD0,TEXCOORD1â€¦å…¶ä¸­nçš„æ•°ç›®æ˜¯å’ŒShader Modelæœ‰å…³çš„,ä¾‹å¦‚ä¸€èˆ¬åœ¨Shader Model2(å³Unityé»˜è®¤ç¼–è¯‘åˆ°çš„Shader Modelç‰ˆæœ¬)å’ŒShader Model3ä¸­,nç­‰äº8,è€Œåœ¨Shader Model5ä¸­,nç­‰äº16. é€šå¸¸æƒ…å†µä¸‹,ä¸€ä¸ªæ¨¡å‹çš„çº¹ç†åæ ‡æ•°ä¸€èˆ¬ä¸è¶…è¿‡2,æˆ‘ä»¬å¾€å¾€åªä½¿ç”¨TEXCOORD0å’ŒTEXCOORD1. åœ¨Unityä¸­å†…ç½®çš„æ•°æ®ç»“æ„ä½“appdata_fullä¸­,å®ƒæœ€å¤šä½¿ç”¨äº†6ä¸ªçº¹ç†åæ ‡ Â§ ä»é¡¶ç‚¹ç€è‰²å™¨ä¼ é€’æ•°æ®ç»™ç‰‡å…ƒç€è‰²å™¨æ—¶Unityä½¿ç”¨çš„å¸¸ç”¨è¯­ä¹‰ è¯­ä¹‰ æè¿° SV_POSITION è£å‰ªç©ºé—´ä¸­çš„é¡¶ç‚¹åæ ‡,ç»“æ„ä½“ä¸­å¿…é¡»åŒ…å«ä¸€ä¸ªç”¨è¯¥è¯­ä¹‰ä¿®é¥°çš„å˜é‡. COLOR0 é€šå¸¸ç”¨äºè¾“å‡ºç¬¬ä¸€ç»„é¢œè‰²ä¿¡æ¯,ä½†ä¸æ˜¯å¿…é¡»çš„ COLOR1 é€šå¸¸ç”¨äºè¾“å‡ºç¬¬äºŒç»„é¢œè‰²ä¿¡æ¯,ä½†ä¸æ˜¯å¿…é¡»çš„ TEXCOORD0~TEXCOORD7 é€šå¸¸ç”¨äºè¾“å‡ºçº¹ç†åæ ‡,ä½†ä¸æ˜¯å¿…é¡»çš„ ä¸Šé¢çš„è¯­ä¹‰ä¸­,é™¤äº†SV_POSITIONæ˜¯æœ‰ç‰¹æ®Šçš„å«ä¹‰å¤–,å…¶ä»–è¯­ä¹‰å¯¹å˜é‡çš„å«ä¹‰æ²¡æœ‰æ˜ç¡®çš„è¦æ±‚.ä¹Ÿå°±æ˜¯è¯´,æˆ‘ä»¬å¯ä»¥å­˜å‚¨ä»»æ„å€¼åˆ°è¿™äº›è¯­ä¹‰æè¿°å˜é‡ä¸­. é€šå¸¸,å¦‚æœæˆ‘ä»¬éœ€è¦æŠŠä¸€äº›è‡ªå®šä¹‰çš„æ•°æ®ä»é¡¶ç‚¹ç€è‰²å™¨ä¼ é€’ç»™ç‰‡å…ƒç€è‰²å™¨,ä¸€èˆ¬é€‰ç”¨TEXTURE0ç­‰ Â§ ç‰‡å…ƒç€è‰²å™¨è¾“å‡ºæ—¶Unityæ”¯æŒçš„å¸¸ç”¨è¯­ä¹‰ è¯­ä¹‰ æè¿° SV_Target è¾“å‡ºå€¼å°†ä¼šå­˜å‚¨åˆ°æ¸²æŸ“ç›®æ ‡(render target)ä¸­ Â§ å¦‚ä½•å®šä¹‰å¤æ‚çš„å˜é‡ç±»å‹ ä¸Šé¢æåˆ°çš„è¯­ä¹‰ç»å¤§éƒ¨åˆ†ç”¨äºæè¿°æ ‡é‡æˆ–çŸ¢é‡ç±»å‹çš„å˜é‡ ä¸‹é¢çš„ä»£ç ç»™å‡ºäº†ä¸€ä¸ªä½¿ç”¨è¯­ä¹‰æ¥ä¿®é¥°ä¸åŒç±»å‹çš„å˜é‡çš„ä¾‹å­: 1234567struct v2f&#123; float4 pos : SV_POSITION; fixed3 color0 : COLOR0; fixed4 color1 : COLOR1; half value0 : TEXCOORD0; float2 value1 : TEXCOORD1;&#125;; å…³äºä½•æ—¶ä½¿ç”¨å“ªäº›å˜é‡ç±»å‹,æˆ‘ä»¬ä¼šåœ¨5.7.1èŠ‚ç»™å‡ºä¸€äº›å»ºè®®.ä½†éœ€è¦æ³¨æ„çš„æ˜¯,ä¸€ä¸ªè¯­ä¹‰å¯ä»¥ä½¿ç”¨çš„å¯„å­˜å™¨åªèƒ½å¤„ç†4ä¸ªæµ®ç‚¹å€¼. å› æ­¤,å¦‚æœæˆ‘ä»¬æƒ³è¦å®šä¹‰çŸ©é˜µç±»å‹,å¦‚float3X4ç­‰å˜é‡å°±éœ€è¦ä½¿ç”¨æ›´å¤šçš„ç©ºé—´.ä¸€ç§æ–¹æ³•æ˜¯,å°†è¿™äº›å˜é‡æ‹†åˆ†æˆå¤šä¸ªå˜é‡,ä¾‹å¦‚å¯¹äºfloat4X4çš„çŸ©é˜µç±»å‹,æˆ‘ä»¬å¯ä»¥æ‹†åˆ†æˆ4ä¸ªfloatç±»å‹çš„å˜é‡,æ¯ä¸ªå˜é‡å­˜å‚¨äº†çŸ©é˜µä¸­çš„ä¸€è¡Œæ•°æ®. Â§ Debug ä¹¦ä¸ŠP111 Â§ æ¸²æŸ“å¹³å°çš„å·®å¼‚ ä¹¦ä¸Šp115 Â§ Shaderæ•´æ´ Â§ float, halfè¿˜æ˜¯fixed ç±»å‹ ç²¾åº¦ float æœ€é«˜ç²¾åº¦æµ®ç‚¹å€¼,é€šå¸¸ä½¿ç”¨32ä½æ¥å­˜å‚¨ half ä¸­ç­‰ç²¾åº¦æµ®ç‚¹å€¼,é€šå¸¸ä½¿ç”¨16ä½æ¥å­˜å‚¨,ç²¾åº¦æ˜¯-60,000 ~ 60,000 fixed æœ€ä½ç²¾åº¦æµ®ç‚¹å€¼,é€šå¸¸ä½¿ç”¨11ä½æ¥å­˜å‚¨,ç²¾åº¦æ˜¯-2.0~2.0 ä¸Šé¢çš„ç²¾åº¦èŒƒå›´å¹¶ä¸æ˜¯ç»å¯¹æ­£ç¡®çš„,å°¤å…¶æ˜¯åœ¨ä¸åŒå¹³å°å’ŒGPUä¸Š,ä»–ä»¬çš„å®é™…ç²¾åº¦å¯èƒ½å’Œä¸Šé¢ç»™å‡ºçš„èŒƒå›´ä¸ä¸€è‡´.é€šå¸¸æ¥è®². å¤§å¤šæ•°ç°ä»£çš„æ¡Œé¢GPUä¼šæŠŠæ‰€æœ‰è®¡ç®—éƒ½æŒ‰æœ€é«˜çš„æµ®ç‚¹ç²¾åº¦è¿›è¡Œè®¡ç®—.ä¹Ÿå°±æ˜¯è¯´,float,half,fixedåœ¨è¿™äº›å¹³å°ä¸Šå®é™…æ˜¯ç­‰ä»·çš„.è¿™æ„å‘³ç€æˆ‘ä»¬åœ¨PCä¸Šå¾ˆéš¾çœ‹å‡ºå› ä¸ºhalfå’Œfixedç²¾åº¦ä¸åŒè€Œå¸¦æ¥çš„ä¸åŒ. ä½†åœ¨ç§»åŠ¨å¹³å°çš„GPUä¸Š,å®ƒä»¬çš„ç¡®ä¼šæœ‰ä¸åŒçš„ç²¾åº¦èŒƒå›´.è€Œä¸”ä¸ç”¨ç²¾åº¦çš„æµ®ç‚¹å€¼çš„è¿ç®—é€Ÿåº¦ä¹Ÿä¼šæœ‰å·®å¼‚.å› æ­¤,æˆ‘ä»¬åº”è¯¥ç¡®ä¿åœ¨çœŸæ­£çš„ç§»åŠ¨å¹³å°ä¸Šè¯•éªŒæˆ‘ä»¬çš„Shader fixedç²¾åº¦å®é™…ä¸Šåªåœ¨ä¸€äº›è¾ƒæ—§çš„ç§»åŠ¨å¹³å°ä¸Šæœ‰ç”¨,å¤§å¤šæ•°ç°ä»£GPUä¸Š,å®ƒä»¬å†…éƒ¨æŠŠfixedå’Œhalfå½“æˆåŒæ ·ç²¾åº¦æ¥å¯¹å¾…. å°½ç®¡æœ‰ä¸Šé¢çš„ä¸åŒ,å•ä¸€ä¸ªåŸºæœ¬å»ºè®®æ˜¯,å°½å¯èƒ½ä½¿ç”¨ç²¾åº¦è¾ƒä½çš„ç±»å‹,å› ä¸ºè¿™å¯ä»¥ä¼˜åŒ–Shaderçš„æ€§èƒ½,è¿™ä¸€ç‚¹åœ¨ç§»åŠ¨å¹³å°ä¸Šå°¤å…¶é‡è¦.ä»å®ƒä»¬çš„å¤§ä½“çš„å€¼åŸŸèŒƒå›´æ¥çœ‹,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ fixedç±»å‹æ¥å­˜å‚¨é¢œè‰²å’Œå•ä½çŸ¢é‡ halfå­˜å‚¨æ›´å¤§çš„æ•°æ® æœ€å·®çš„æƒ…å†µå†ä½¿ç”¨float å¦‚æœæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç§»åŠ¨å¹³å°,ä¸€å®šè¦ç¡®ä¿åœ¨çœŸå®çš„æ‰‹æœºä¸Šæµ‹è¯•æˆ‘ä»¬çš„Shader. å…³äºç§»åŠ¨å¹³å°çš„ä¼˜åŒ–æŠ€æœ¯,æ›´å¤šå†…å®¹è§16ç«  Â§ è§„èŒƒè¯­æ³• åœ¨5.6.2èŠ‚,æˆ‘ä»¬æåˆ°äº†DirectXå¹³å°å¯¹Shaderçš„è¯­ä¹‰æœ‰æ›´åŠ ä¸¥æ ¼çš„è¦æ±‚.è¿™æ„å‘³ç€,å¦‚æœæˆ‘ä»¬è¦å‘å¸ƒåˆ°DirectXå¹³å°ä¸Šå°±éœ€è¦ä½¿ç”¨æ›´ä¸¥æ ¼çš„è¯­æ³•. ä¾‹å¦‚,ä½¿ç”¨å’Œå˜é‡ç±»å‹ç›¸åŒ¹é…çš„å‚æ•°æ•°ç›®æ¥å¯¹å˜é‡è¿›è¡Œåˆå§‹åŒ–. Â§ é¿å…ä¸å¿…è¦çš„è®¡ç®— å¦‚æœæˆ‘ä»¬æ¯«æ— èŠ‚åˆ¶åœ°åœ¨Shader(å°¤å…¶æ˜¯ç‰‡å…ƒç€è‰²å™¨)ä¸­è¿›è¡Œäº†å¤§é‡è®¡ç®—,é‚£ä¹ˆæˆ‘ä»¬å¯èƒ½å¾ˆå¿«å°±ä¼šæ”¶åˆ°Unityçš„é”™è¯¯æç¤º: temporary register limit of 8 exceeded æˆ– Arithmetic instruction limit of 64 exceeded; 65 arithmetic instructions needed to compileprogram è¿™æ ·çš„é”™è¯¯å¤ªå¤šæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨Shaderä¸­è¿›è¡Œäº†å¤§é‡çš„è¿ç®—,ä½¿å¾—éœ€è¦çš„ä¸´æ—¶å¯„å­˜å™¨æ•°ç›®æˆ–æŒ‡ä»¤æ•°ç›®è¶…è¿‡äº†å½“å‰å¯æ”¯æŒçš„æ•°ç›®. ä¸åŒçš„Shader Target,ä¸åŒçš„ç€è‰²å™¨é˜¶æ®µ,æˆ‘ä»¬å¯ä½¿ç”¨çš„ä¸´æ—¶å¯„å­˜å™¨å’ŒæŒ‡ä»¤æ•°ç›®éƒ½æ˜¯ä¸åŒçš„. é€šå¸¸,æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡å®šæ›´é«˜çº§çš„Shader Targetæ¥æ¶ˆé™¤è¿™äº›é”™è¯¯. æŒ‡ä»¤ æè¿° #pragma target2.0 é»˜è®¤çš„Shader Targetç­‰çº§,ç›¸å½“äºDirect3Dä¸Šçš„Shader Model2.0,ä¸æ”¯æŒå¯¹é¡¶ç‚¹çº¹ç†çš„é‡‡æ ·,ä¸æ”¯æŒæ˜¾å¼çš„LODçº¹ç†é‡‡æ ·ç­‰ #pragma target3.0 ç›¸å½“äºDirect3D 9 ä¸Šçš„Shader Model 3.0, æ”¯æŒå¯¹é¡¶ç‚¹çº¹ç†çš„é‡‡æ ·ç­‰ #pragma target4.0 ç›¸å½“äºDirect3D 10 ä¸Šçš„Shader Model 4.0,æ”¯æŒå‡ ä½•ç€è‰²å™¨ç­‰ #pragma target5.0 ç›¸å½“äºDirect3D11ä¸Šçš„Shader Model 5.0 Shader Modelæ˜¯ç”±å¾®è½¯æå‡ºçš„ä¸€å¥—è§„èŒƒ,é€šä¿—åœ°ç†è§£å°±æ˜¯å®ƒä»¬å†³å®šäº†Shaderä¸­å„ä¸ªç‰¹æ€§å’Œèƒ½åŠ›.è¿™äº›ç‰¹æ€§å’Œèƒ½åŠ›ä½“ç°åœ¨Shaderèƒ½ä½¿ç”¨çš„è¿ç®—æŒ‡ä»¤æ•°ç›®,å¯„å­˜å™¨ä¸ªæ•°ç­‰å„ä¸ªæ–¹é¢.Shaderç­‰çº§è¶Šé«˜,Shaderçš„èƒ½åŠ›å°±è¶Šå¤§. è™½ç„¶æ›´é«˜çº§çš„Shader Targetå¯ä»¥è®©æˆ‘ä»¬ä½¿ç”¨æ›´å¤šçš„ä¸´æ—¶å¯„å­˜å™¨å’Œè¿ç®—æŒ‡ä»¤,ä½†ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•æ˜¯å°½å¯èƒ½å‡å°‘Shaderä¸­çš„è¿ç®—,æˆ–è€…é€šè¿‡é¢„è®¡ç®—çš„æ–¹å¼æ¥æä¾›æ›´å¤šçš„æ•°æ®. Â§ æ…ç”¨åˆ†æ”¯å’Œå¾ªç¯è¯­å¥ if-else,for,whileè¿™äº›æµç¨‹æ§åˆ¶æŒ‡ä»¤åœ¨GPUä¸Šçš„å®ç°å’Œåœ¨CPUä¸Šå¤§ä¸ç›¸åŒ.åœ¨æœ€åçš„æƒ…å†µä¸‹,æˆ‘ä»¬èŠ±åœ¨ä¸€ä¸ªåˆ†æ”¯è¯­å¥çš„æ—¶é—´ç›¸å½“äºè¿è¡Œæ‰€æœ‰åˆ†æ”¯è¯­å¥çš„æ—¶é—´.å› æ­¤ä¸æå€¡åœ¨Shaderä¸­ä½¿ç”¨æµç¨‹æ§åˆ¶è¯­å¥. å¦‚æœæˆ‘ä»¬çš„Shaderä¸­ä½¿ç”¨äº†å¤§é‡çš„æµç¨‹æ§åˆ¶è¯­å¥,é‚£ä¹ˆè¿™ä¸ªShaderçš„æ€§èƒ½å¯èƒ½ä¼šæˆå€ä¸‹é™. ä¸€ä¸ªè§£å†³æ–¹æ³•æ˜¯,æˆ‘ä»¬åº”å°½é‡æŠŠè®¡ç®—å‘æµæ°´çº¿ä¸Šç«¯ç§»åŠ¨.ä¾‹å¦‚æŠŠç‰‡æ®µç€è‰²å™¨ä¸­çš„è®¡ç®—æ”¾åˆ°é¡¶ç‚¹ç€è‰²å™¨ä¸­,æˆ–è€…ç›´æ¥åœ¨CPUä¸­è¿›è¡Œé¢„è®¡ç®—,å†æŠŠç»“æœä¼ é€’ç»™Shader. å®åœ¨è¦ç”¨åˆ°åˆ†æ”¯è¯­å¥æ—¶: åˆ†æ”¯åˆ¤æ–­è¯­å¥ä¸­ä½¿ç”¨çš„æ¡ä»¶å˜é‡æœ€å¥½æ˜¯å¸¸æ•°,å³åœ¨Shaderè¿è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šå‘ç”Ÿå˜åŒ–. æ¯ä¸ªåˆ†æ”¯ä¸­åŒ…å«çš„æ“ä½œæŒ‡ä»¤å°½å¯èƒ½å°‘ åˆ†æ”¯åµŒå¥—å±‚æ•°å°½å¯èƒ½å°‘ Â§ ä¸è¦é™¤ä»¥0 Shaderä¸­,é™¤ä»¥0ä¸ä¼šæŠ¥é”™.æ³¨æ„.]]></content>
      <categories>
        <category>shader</category>
      </categories>
      <tags>
        <tag>unity</tag>
        <tag>shader</tag>
        <tag>ã€Šshaderå…¥é—¨ç²¾è¦ã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Šshaderå…¥é—¨ç²¾è¦ã€‹ç¬”è®°-ç¬¬3ç« -Unity Shader åŸºç¡€]]></title>
    <url>%2Fshader-r-unity-shader%2F</url>
    <content type="text"><![CDATA[Â§ UnityShaderæ¦‚è¿° Â§ unityä¸­çš„shader Â§ Standard Surface Shader ä¼šäº§ç”Ÿä¸€ä¸ªåŒ…å«äº†æ ‡å‡†å…‰ç…§æ¨¡å‹(ä½¿ç”¨äº†Unity5ä¸­æ–°æ·»åŠ çš„åŸºäºç‰©ç†çš„æ¸²æŸ“æ–¹æ³•,è¯¦è§ç¬¬18ç« )çš„è¡¨é¢ç€è‰²å™¨æ¨¡æ¿ Â§ Unlit Shader ä¼šäº§ç”Ÿä¸€ä¸ªä¸å«å…‰ç…§(å•åŒ…å«é›¾åŒ–æ•ˆæœ)çš„åŸºæœ¬é¡¶ç‚¹/ç‰‡æ®µç€è‰²å™¨ Â§ ImageEffect Shader ä¸ºæˆ‘ä»¬å®ç°å„ç§å±å¹•æ–‡ä»¶.è¿™ç±»Shaderæ—¨åœ¨åˆ©ç”¨GPUçš„å¹¶è¡Œæ€§æ¥è¿›è¡Œä¸€äº›ä¸å¸¸è§„æ¸²æŸ“æµæ°´çº¿æ— å…³çš„è®¡ç®—,è€Œä¸åœ¨è¿™æœ¬ä¹¦çš„è®¨è®ºèŒƒå›´å†…(è‰) Â§ UnityShaderçš„ç»“æ„ Â§ SubShader Subshaderä¸­å®šä¹‰äº†ä¸€ç³»åˆ—çš„Passä¸€çº§å¯é€‰çš„çŠ¶æ€å’Œæ ‡ç­¾çš„è®¾ç½®. æ¯ä¸ªPasså®šä¹‰äº†ä¸€æ¬¡å®Œæ•´çš„æ¸²æŸ“æµç¨‹,ä½†å¦‚æœpassçš„æ•°ç›®è¿‡å¤š,å¾€å¾€ä¼šé€ æˆæ¸²æŸ“æ€§èƒ½çš„ä¸‹é™.å› æ­¤,æˆ‘ä»¬åº”å°½é‡ä½¿ç”¨å°æ•°ç›®çš„Pass. çŠ¶æ€å’Œæ ‡ç­¾åŒæ ·å¯ä»¥åœ¨Passå£°æ˜.ä¸åŒçš„æ˜¯,SubShaderä¸­çš„ä¸€äº›æ ‡ç­¾è®¾å®šæ˜¯ç‰¹å®šçš„.ä¹Ÿå°±æ˜¯è¯´,è¿™äº›æ ‡ç­¾è®¾ç½®å’ŒPassä¸­ä½¿ç”¨çš„æ ‡ç­¾æ˜¯ä¸ä¸€æ ·çš„.è€Œå¯¹äºçŠ¶æ€è®¾ç½®æ¥è¯´,å…¶ä½¿ç”¨çš„è¯­æ³•æ˜¯ç›¸åŒçš„.ä½†æ˜¯,å¦‚æœæˆ‘ä»¬åœ¨SubShaderä¸­è¿›è¡Œäº†è¿™äº›è®¾ç½®,é‚£ä¹ˆå°†ä¼šç”¨äºæ‰€æœ‰Pass Â§ çŠ¶æ€è®¾ç½® ShaderLabæä¾›äº†ä¸€ç³»åˆ—æ¸²æŸ“çŠ¶æ€çš„è®¾ç½®æŒ‡ä»¤,è¿™äº›æŒ‡ä»¤å¯ä»¥è®¾ç½®æ˜¾å¡çš„å„ç§çŠ¶æ€.ä¾‹å¦‚æ˜¯å¦å¼€å¯æ··åˆ/æ·±åº¦æµ‹è¯•ç­‰. çŠ¶æ€åç§° è®¾ç½®æŒ‡ä»¤ è§£é‡Š Cull Cull Back/Front/Off è®¾ç½®å‰”é™¤æ¨¡å¼.å‰”é™¤èƒŒé¢/æ­£é¢/å…³é—­å‰”é™¤ ZTest ZTest Less Greater/LEqual/GEqual/NotEqual/Always è®¾ç½®æ·±åº¦æµ‹è¯•æ—¶ä½¿ç”¨çš„å‡½æ•° Zwrite ZWrite On/Off å¼€å¯/å…³é—­æ·±åº¦æµ‹è¯• Blend Blend SrcFactor DstFactor å¼€å¯å¹¶è®¾ç½®æ··åˆæ¨¡å¼ å½“åœ¨SubShaderå—ä¸­è®¾ç½®äº†è¿™äº›æ¸²æŸ“çŠ¶æ€æ—¶,å°†ä¼šåº”ç”¨åˆ°æ‰€æœ‰Pass,å¦‚æœæˆ‘ä»¬ä¸æƒ³è¿™æ ·,å¯ä»¥åœ¨Passè¯­ä¹‰å—ä¸­å•ç‹¬è¿›è¡Œä¸Šé¢çš„è®¾ç½®. Â§ SubShaderæ ‡ç­¾ SubShaderçš„æ ‡ç­¾æ˜¯ä¸€ä¸ªé”®å€¼å¯¹,ä»–çš„é”®å’Œå€¼éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹. æ ‡ç­¾ç»“æ„å¦‚ä¸‹: 1Tags &#123; &quot;TagName1&quot; = &quot;Value1&quot; &quot;TagName2&quot; = &quot;Value2&quot; &#125; æ ‡ç­¾ç±»å‹ è¯´æ˜ ä¾‹å­ Queue æ§åˆ¶æ¸²æŸ“é¡ºåº,æŒ‡å®šè¯¥ç‰©ä½“å±äºå“ªä¸€ä¸ªæ¸²æŸ“é˜Ÿåˆ—,é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥ä¿è¯æ‰€æœ‰çš„é€æ˜ç‰©ä½“å¯ä»¥åœ¨æ‰€æœ‰ä¸é€æ˜ç‰©ä½“åé¢è¢«æ¸²æŸ“(è¯¦è§ç¬¬8ç« ).æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä½¿ç”¨çš„æ¸²æŸ“é˜Ÿåˆ—æ¥æ§åˆ¶ç‰©ä½“çš„æ¸²æŸ“é¡ºåº Tags { â€œQueueâ€ = â€œTransparentâ€ } RenderType å¯¹ç€è‰²å™¨è¿›è¡Œåˆ†ç±»,ä¾‹å¦‚è¿™æ˜¯ä¸€ä¸ªä¸é€æ˜çš„ç€è‰²å™¨,æˆ–æ˜¯ä¸€ä¸ªé€æ˜çš„ç€è‰²å™¨.è¿™å¯ä»¥ç”¨äºç€è‰²å™¨æ›¿æ¢åŠŸèƒ½(å•¥ç©æ„) Tags { â€œRenderTypeâ€ = â€œOpaqueâ€ } DisableBatching ä¸€äº›SubShaderåœ¨ä½¿ç”¨Unityæ‰¹å¤„ç†åŠŸèƒ½æ—¶ä¼šå‡ºç°é—®é¢˜,ä¾‹å¦‚ä½¿ç”¨äº†æ¨¡å‹ç©ºé—´ä¸‹çš„åæ ‡è¿›è¡Œé¡¶ç‚¹åŠ¨ç”»(è¯¦è§ç¬¬11.3èŠ‚).è¿™æ—¶å¯ä»¥é€šè¿‡è¯¥æ ‡ç­¾æ¥æŒ‡æ˜æ˜¯å¦å¯¹è¯¥SubShaderä½¿ç”¨æ‰¹å¤„ç†. Tags { â€œDisableBatchingâ€ = â€œTrueâ€ } ForceNoShadowCasting æ§åˆ¶ä½¿ç”¨è¯¥SubShaderçš„ç‰©ä½“æ˜¯å¦ä¼šæŠ•å°„é˜´å½±(è¯¦è§8.4)èŠ‚ Tags { â€œForceNoShadowCastingâ€ = â€œTrueâ€ } IgnoreProjector å¦‚æœè¯¥æ ‡ç­¾è®¾ç½®ä¸ºTrue,é‚£ä¹ˆä½¿ç”¨è¯¥SubShaderçš„ç‰©ä½“ä¸ä¼šå—åˆ°projectorçš„å½±å“.é€šå¸¸ç”¨äºåŠé€æ˜ç‰©ä½“. Tags { â€œIgnoreProjectorâ€ = â€œTrueâ€ } CanUseSpriteAtlas å½“è¯¥SubShaderæ˜¯ç”¨äºç²¾çµæ—¶,å°†è¯¥æ ‡ç­¾è®¾ä¸ºFalse Tags { â€œCanUseSpriteAtlasâ€ = â€œFalseâ€ } PreviewType æŒ‡åæè´¨é¢æ¿å°†å¦‚ä½•é¢„è§ˆè¯¥æè´¨.é»˜è®¤æƒ…å†µä¸‹,æè´¨å°†æ˜¾ç¤ºä¸ºä¸€ä¸ªçƒå½¢.æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†è¯¥æ ‡ç­¾çš„å€¼è®¾ä¸º&quot;Plane&quot; &quot;SkyBox&quot;æ¥æ”¹å˜é¢„è§ˆç±»å‹. Tags { â€œPreviewTypeâ€ = â€œPlaneâ€ } Â§ Passè¯­ä¹‰å— Passè¯­ä¹‰å—åŒ…å«çš„è¯­ä¹‰å¦‚ä¸‹ 12345Pass &#123; [Name] [Tags] // Other Code&#125; é¦–å…ˆ,æˆ‘ä»¬å¯ä»¥åœ¨Passä¸­å®šä¹‰è¯¥Passçš„åç§°,ä¾‹å¦‚ 1Name &quot;MyPassName&quot; é€šè¿‡è¿™ä¸ªåç§°,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Shaderçš„UsePasså‘½ä»¤æ¥ç›´æ¥ä½¿ç”¨å…¶ä»–UnityShaderä¸­çš„Pass.ä¾‹å¦‚: 1UsePass &quot;MyShader/MYPASSNAME&quot; è¿™æ ·å¯ä»¥æé«˜ä»£ç çš„å¤ç”¨æ€§.éœ€è¦æ³¨æ„çš„æ˜¯,ç”±äºUnityå†…éƒ¨ä¼šæŠŠæ‰€æœ‰Passçš„åå­—è½¬æ¢æˆå¤§å†™å­—æ¯çš„è¡¨ç¤º,å› æ­¤åœ¨ä½¿ç”¨UsePasså‘½ä»¤æ—¶å¿…é¡»ä½¿ç”¨å¤§å†™çš„åå­—. PassåŒæ ·å¯ä»¥è®¾ç½®æ ‡ç­¾,ä½†å®ƒçš„æ ‡ç­¾ä¸åŒäºSubShaderæ ‡ç­¾.è¿™äº›æ ‡ç­¾ä¹Ÿæ˜¯å‘Šè¯‰æ¸²æŸ“å¼•æ“æˆ‘ä»¬å¸Œæœ›æ€ä¹ˆæ¥æ¸²æŸ“è¯¥ç‰©ä½“. æ ‡ç­¾ç±»å‹ è¯´æ˜ ä¾‹å­ LightMode å®šä¹‰è¯¥Passåœ¨Unityçš„æ¸²æŸ“ç®¡çº¿ä¸­çš„è§’è‰² Tags { â€œLightModeâ€ = â€œForwardBaseâ€ } RequiresOptions ç”¨äºæŒ‡å®šå½“æ»¡è¶³æŸäº›æ¡ä»¶æ—¶æ‰æ¸²æŸ“è¯¥Pass,å®ƒçš„å€¼æ˜¯ä¸€ä¸ªç”±ç©ºæ ¼åˆ†éš”çš„å­—ç¬¦ä¸².ç›®å‰,Unityæ”¯æŒçš„é€‰é¡¹æœ‰: SoftVegetation. åœ¨åé¢çš„ç‰ˆæœ¬ä¸­,å¯èƒ½ä¼šå¢åŠ æ›´å¤šçš„é€‰é¡¹. Tags{ â€œRequireOptionâ€ = â€œSoftVegetationâ€ } é™¤äº†ä¸Šé¢çš„æ™®é€šPasså®šä¹‰å¤–,Unity Shaderè¿˜æ”¯æŒä¸€äº›ç‰¹æ®Šçš„Pass, ä»¥ä¾¿è¿›è¡Œä»£ç å¤ç”¨æˆ–å®ç°æ›´å¤æ‚çš„æ•ˆæœ. UsePass å¦‚ä¹‹å‰æ‰€è¯´,å¯ä»¥å¼•å…¥å…¶ä»–Unity Shaderä¸­çš„Pass. GrabPass è´Ÿè´£æŠ“å–å±å¹•å¹¶å°†ç»“æœå­˜å‚¨åœ¨ä¸€å¼ çº¹ç†ä¸­,ä»¥ç”¨äºåç»­çš„Passå¤„ç†(è¯¦è§10.2.2èŠ‚) Â§ FallBack 1234FallBack &quot;name&quot;FallBack OffFallBack &quot;VertexLit&quot; äº‹å®ä¸Š,FallBackè¿˜ä¼šå½±å“é˜´å½±çš„æŠ•å°„.åœ¨æ¸²æŸ“é˜´å½±çº¹ç†æ—¶,Unityä¼šåœ¨æ¯ä¸ªUnityShaderä¸­å¯»æ‰¾ä¸€ä¸ªé˜´å½±æŠ•å°„çš„Pass.é€šå¸¸æƒ…å†µä¸‹,æˆ‘ä»¬ä¸ç”¨è‡ªå·±ä¸“é—¨å®ç°ä¸€ä¸ªé˜´å½±æŠ•å°„çš„Pass,è¿™æ˜¯å› ä¸ºFallBackä½¿ç”¨å†…ç½®Shaderä¸­åŒ…å«äº†è¿™æ ·ä¸€ä¸ªé€šç”¨Pass. å› æ­¤,ä¸ºæ¯ä¸ªUnityShaderè®¾ç½®æ­£ç¡®çš„FallBackæ˜¯éå¸¸é‡è¦çš„. Â§ UnityShaderçš„å½¢å¼ å°½ç®¡UnityShaderå¯ä»¥åšçš„äº‹æƒ…éå¸¸å¤š(å¦‚è®¾ç½®æ¸²æŸ“çŠ¶æ€ç­‰),ä½†å…¶æœ€é‡è¦çš„ä»»åŠ¡è¿˜æ˜¯æŒ‡å®šå„ç§ç€è‰²å™¨æ‰€éœ€çš„ä»£ç .è¿™äº›ç€è‰²å™¨ä»£ç å¯ä»¥å†™åœ¨Shaderè¯­ä¹‰å—ä¸­(è¡¨é¢ç€è‰²å™¨çš„åšæ³•),ä¹Ÿå¯ä»¥å†™åœ¨Passè¯­ä¹‰å—ä¸­(é¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨å’Œå›ºå®šå‡½æ•°ç€è‰²å™¨çš„åšæ³•). Â§ è¡¨é¢ç€è‰²å™¨ Surface Shader æ˜¯Unityè‡ªå·±åˆ›é€ çš„ä¸€ç§ç€è‰²å™¨ä»£ç ç±»å‹.å®ƒéœ€è¦çš„ä»£ç é‡å¾ˆå°‘,Unityåœ¨èƒŒååšäº†å¾ˆå¤šå·¥ä½œ,å•æ¸²æŸ“ä»£ä»·æ¯”è¾ƒå¤§.å½“ç»™Unityæä¾›ä¸€ä¸ªè¡¨é¢ç€è‰²å™¨çš„æ—¶å€™,å®ƒåœ¨èƒŒåä»æ—§ä¼šå°†å®ƒè½¬æ¢æˆå¯¹åº”é£é¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨. å®ƒå­˜åœ¨çš„ä»·å€¼åœ¨äº,Unityä¸ºæˆ‘ä»¬å¤„ç†äº†å¾ˆå¤šå…‰ç…§ç»†èŠ‚,ä½¿å¾—æˆ‘ä»¬ä¸éœ€è¦å†æ“å¿ƒè¿™äº›çƒ¦äººçš„äº‹æƒ…. ä¸€ä¸ªéå¸¸ç®€å•çš„è¡¨é¢ç€è‰²å™¨ç¤ºä¾‹ä»£ç : 12345678910111213141516Shader &quot;Custom/sur&quot;&#123; SubShader&#123; Tags &#123;&quot;RenderType&quot; = &quot;Opaque&quot;&#125; CGPROGRAM #pragma surface surf Lambert struct Input &#123; float4 color:COLOR; &#125;; void surf(Input In, inout SurfaceOutput o) &#123; o.Albedo = 1; &#125; ENDCG &#125; Fallback &quot;Diffuse&quot;&#125; ä¸Šè¿°ç¨‹åºå¯ä»¥çœ‹å‡º,è¡¨é¢ç€è‰²å™¨è¢«å®šä¹‰åœ¨SubShaderè¯­ä¹‰å—(è€ŒéPassè¯­ä¹‰å—)ä¸­çš„CGPROGRAMå’ŒENDCGä¹‹é—´.åŸå› æ˜¯,è¡¨é¢ç€è‰²å™¨ä¸éœ€è¦å…³å¿ƒå¼€å‘è€…ä½¿ç”¨å¤šå°‘ä¸ªPass,æ¯ä¸ªPasså¦‚ä½•æ¸²æŸ“ç­‰é—®é¢˜,Unityä¼šåœ¨èƒŒåå»å¸®æˆ‘ä»¬åšå¥½è¿™äº›äº‹æƒ….æˆ‘ä»¬è¦åšçš„åªæ˜¯å‘Šè¯‰å®ƒ,â€œç”¨è¿™äº›çº¹ç†å»å¡«å……é¢œè‰²,ç”¨è¿™ä¸ªæ³•çº¿çº¹ç†å»å¡«å……æ³•çº¿,ä½¿ç”¨Lambertå…‰ç…§æ¨¡å‹â€ CGPROGRAMå’ŒENDCGä¹‹é—´çš„ä»£ç æ˜¯ä½¿ç”¨Cg/HLSLç¼–å†™çš„,ä¹Ÿå°±æ˜¯è¯´,æˆ‘ä»¬éœ€è¦æŠŠCg/HLSLè¯­è¨€åµŒå¥—åœ¨ShaderLabä¸­.å€¼å¾—æ³¨æ„çš„æ˜¯,è¿™é‡Œçš„Cg/HLSLæ˜¯Unityç»è¿‡å°è£…åæä¾›çš„,å®ƒçš„æ ‡å‡†è¯­æ³•å’Œæ ‡å‡†çš„Cg/HLSLå‡ ä¹ä¸€æ ·,ä½†è¿˜æ˜¯æœ‰ç»†å¾®ä¸åŒ.ä¾‹å¦‚æœ‰äº›åŸç”Ÿçš„å‡½æ•°å’Œç”¨æ³•Unityå¹¶æ²¡æœ‰æä¾›æ”¯æŒ. Â§ é¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨ Vertex/Fragment Shader æ›´åŠ å¤æ‚,ä½†çµæ´»æ€§æ›´é«˜. 123456789101112131415161718192021Shader &quot;Custom/vertexfragment&quot;&#123; SubShader&#123; Pass &#123; CGPROGRAM #pragma vertex vert #pragma fragment frag float4 vert(float4 v : position) : SV_POSITION&#123; return mul(UNITY_MATRIX_MVP, v); &#125; float4 frag() : SV_Target&#123; return fixed4(1.0,0.0,0.0,1.0); &#125; ENDCG &#125; &#125;&#125; å’Œè¡¨é¢ç€è‰²å™¨ç±»ä¼¼,é¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨çš„ä»£ç ä¹Ÿéœ€è¦å®šä¹‰åœ¨CGPROGRAMå’ŒENDCGä¸­é—´.ä½†ä¸åŒçš„æ˜¯,é¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨æ˜¯å†™åœ¨Passè¯­ä¹‰å—ä¸­çš„,è€ŒéSubShaderè¯­ä¹‰å—å†….åŸå› æ˜¯æˆ‘ä»¬éœ€è¦è‡ªå·±å®šä¹‰æ¯ä¸ªPasséœ€è¦ä½¿ç”¨çš„Shaderä»£ç .è™½ç„¶æˆ‘ä»¬å¯èƒ½éœ€è¦ç¼–å†™æ›´å¤šçš„ä»£ç ,ä½†å¸¦æ¥çš„å¥½å¤„æ˜¯çµæ´»æ€§å¾ˆé«˜.æ›´é‡è¦çš„æ˜¯,æˆ‘ä»¬å¯ä»¥æ§åˆ¶æ¸²æŸ“çš„å®ç°ç»†èŠ‚. Â§ å›ºå®šå‡½æ•°ç€è‰²å™¨ Fixed Function Shader å¼ƒå­,ç°åœ¨ä¸æ€ä¹ˆç”¨çš„ç€è‰²å™¨ ä¸Šé¢ä¸¤ç§ç€è‰²å™¨éƒ½æ˜¯ç”¨äº†å¯ç¼–ç¨‹ç®¡çº¿.è€Œå¯¹äºä¸€äº›è¾ƒæ—§çš„è®¾å¤‡,å®ƒä»¬ä¸æ”¯æŒå¯ç¼–ç¨‹ç®¡çº¿ç€è‰²å™¨,å› æ­¤,æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨å›ºå®šå‡½æ•°ç€è‰²å™¨. è¿™äº›ç€è‰²å™¨å¾€å¾€åªèƒ½å®Œæˆä¸€äº›éå¸¸ç®€å•çš„æ•ˆæœ]]></content>
      <categories>
        <category>shader</category>
      </categories>
      <tags>
        <tag>unity</tag>
        <tag>shader</tag>
        <tag>ã€Šshaderå…¥é—¨ç²¾è¦ã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Šshaderå…¥é—¨ç²¾è¦ã€‹ç¬”è®°-ç¬¬2ç« -æ¸²æŸ“æµæ°´çº¿]]></title>
    <url>%2Fshader-r-lsx%2F</url>
    <content type="text"><![CDATA[çœ‹å®Œæ•°å­¦éƒ¨åˆ†åå†æ¥å†™çš„ Â§ CPUæµæ°´çº¿ Â§ å°†æ•°æ®åŠ è½½åˆ°æ˜¾å­˜ä¸­ æŠŠæ¸²æŸ“æ‰€éœ€æ‰€æœ‰æ•°æ®ä»ç¡¬ç›˜åŠ è½½åˆ°ç³»ç»Ÿå†…å­˜ä¸­ ç½‘æ ¼å’Œçº¹ç†ç­‰æ•°æ®åˆè¢«åŠ è½½åˆ°æ˜¾å­˜ä¸­ Â§ è®¾ç½®æ¸²æŸ“çŠ¶æ€ è¿™äº›çŠ¶æ€å®šä¹‰äº†åœºæ™¯ä¸­çš„ç½‘æ ¼æ˜¯æ€ä¹ˆè¢«æ¸²æŸ“çš„ ä¾‹å¦‚,ä½¿ç”¨å“ªä¸ªé¡¶ç‚¹ç€è‰²å™¨/ç‰‡å…ƒç€è‰²å™¨,å…‰æºå±æ€§,æè´¨ç­‰. å¦‚æœæˆ‘ä»¬æ²¡æœ‰è®¾ç½®æ¸²æŸ“çŠ¶æ€,é‚£ä¹ˆæ‰€æœ‰ç½‘æ ¼éƒ½å°†ä½¿ç”¨åŒä¸€ç§æ¸²æŸ“çŠ¶æ€ Â§ è°ƒç”¨DrawCall Draw Callæ˜¯ä¸€ä¸ªå‘½ä»¤,å‘èµ·æ–¹æ˜¯CPU,æ¥æ”¶æ–¹æ˜¯GPU. è¿™ä¸ªå‘½ä»¤ä»…ä»…ä¼šæŒ‡å‘ä¸€ä¸ªéœ€è¦è¢«æ¸²æŸ“çš„å›¾å…ƒçš„åˆ—è¡¨,è€Œä¸å†åŒ…å«ä»»ä½•æè´¨ä¿¡æ¯â€“å› ä¸ºå·²ç»åœ¨ä¸Šä¸ªé˜¶æ®µå®Œæˆäº†. å½“ç»™å®šä¸€ä¸ªDraw Callæ—¶,GPUä¼šæ ¹æ®æ¸²æŸ“çŠ¶æ€(æè´¨,çº¹ç†,ç€è‰²å™¨ç­‰)å’Œæ‰€æœ‰è¾“å…¥çš„é¡¶ç‚¹æ•°æ®æ¥è¿›è¡Œè®¡ç®—,æœ€ç»ˆè¾“å‡ºåˆ°å±å¹• Â§ GPUæµæ°´çº¿ é¡¶ç‚¹æ•°æ® -&gt; é¡¶ç‚¹ç€è‰²å™¨ -&gt; æ›²é¢ç»†åˆ†ç€è‰²å™¨ -&gt; å‡ ä½•ç€è‰²å™¨ -&gt; è£å‰ª -&gt; å±å¹•æ˜ å°„ -&gt; ä¸‰è§’å½¢è®¾ç½® -&gt; ä¸‰è§’å½¢éå† -&gt; ç‰‡å…ƒç€è‰²å™¨ -&gt; é€ç‰‡å…ƒæ“ä½œ -&gt; å±å¹•å›¾åƒ Â§ é¡¶ç‚¹ç€è‰²å™¨ é¡¶ç‚¹æ— æ³•é”€æ¯æˆ–åˆ›å»ºé¡¶ç‚¹,ä¹Ÿä¸å¯ä»¥è·å¾—é¡¶ç‚¹ä¹‹é—´çš„è”ç³».ä¾‹å¦‚,æˆ‘ä»¬æ— æ³•åˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦å¤„äºåŒä¸€ä¸ªç½‘æ ¼.æ­£æ˜¯å› ä¸ºè¿™æ ·çš„ç›¸äº’ç‹¬ç«‹æ€§,GPUå¯ä»¥åˆ©ç”¨æœ¬èº«çš„ç‰¹æ€§å¹¶è¡ŒåŒ–å¤„ç†æ¯ä¸€ä¸ªé¡¶ç‚¹,è¿™æ„å‘³ç€è¿™ä¸€é˜¶æ®µçš„å¤„ç†é€Ÿåº¦ä¼šæ›´å¿«. é¡¶ç‚¹ç€è‰²å™¨éœ€è¦å®Œæˆçš„ä¸»è¦å·¥ä½œæœ‰:åæ ‡å˜æ¢å’Œé€é¡¶ç‚¹å…‰ç…§ å½“ç„¶é™¤äº†è¿™ä¸¤ä¸ªä¸»è¦ä»»åŠ¡å¤–,é¡¶ç‚¹ç€è‰²å™¨è¿˜å¯ä»¥è¾“å‡ºåç»­é˜¶æ®µæ‰€éœ€çš„æ•°æ®. Â§ åæ ‡å˜æ¢ æŠŠé¡¶ç‚¹åæ ‡ä»æ¨¡å‹ç©ºé—´å˜æ¢åˆ°é½æ¬¡å‰ªè£ç©ºé—´ Â§ å‰ªè£ æ‘„åƒæœºçš„è§†é‡èŒƒå›´å†…å¾ˆæœ‰å¯èƒ½ä¸ä¼šè¦†ç›–åœºæ™¯ä¸­çš„æ‰€æœ‰ç‰©ä½“.ä¸åœ¨æ‘„åƒæœºè§†é‡èŒƒå›´å†…çš„ç‰©ä½“ä¸éœ€è¦å¤„ç†.å‰ªè£å°±æ˜¯ä¸ºäº†å®Œæˆè¿™ä¸ªç›®æ ‡è€Œè¢«æå‡ºæ¥çš„. æˆ‘ä»¬æ— æ³•é€šè¿‡ç¼–ç¨‹æ¥æ§åˆ¶å‰ªè£çš„è¿‡ç¨‹,è€Œæ˜¯ç¡¬ä»¶ä¸Šçš„å›ºå®šæ“ä½œ,ä½†æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªå‰ªè£æ“ä½œæ¥å¯¹è¿™ä¸€æ­¥è¿›è¡Œé…ç½®. Â§ å±å¹•æ˜ å°„ å±å¹•æ˜ å°„çš„ä»»åŠ¡æ˜¯æŠŠæ¯ä¸ªå›¾å…ƒçš„x,yåæ ‡è½¬æ¢åˆ°å±å¹•åæ ‡ç³». Â§ ä¸‰è§’å½¢è®¾ç½® ä»è¿™ä¸€æ­¥å¼€å§‹è¿›å…¥å…‰æ …åŒ–é˜¶æ®µ. ä»ä¸Šä¸€ä¸ªé˜¶æ®µè¾“å‡ºçš„ä¿¡æ¯æ˜¯å±å¹•åæ ‡ç³»ä¸‹çš„é¡¶ç‚¹ä½ç½®ä»¥åŠå®ƒä»¬çš„é¢å¤–ä¿¡æ¯,å¦‚æ·±åº¦å€¼(zåæ ‡),æ³•çº¿æ–¹å‘,è§†è§’æ–¹å‘ç­‰. å…‰æ …åŒ–é˜¶æ®µæœ‰ä¸¤ä¸ªæœ€é‡è¦çš„ç›®æ ‡:è®¡ç®—æ¯ä¸ªå›¾å…ƒè¦†ç›–äº†å“ªäº›åƒç´ ,ä»¥åŠä¸ºè¿™äº›åƒç´ è®¡ç®—å®ƒä»¬çš„é¢œè‰². ä¸‰è§’å½¢è®¾ç½®é˜¶æ®µä¼šè®¡ç®—å…‰æ …åŒ–ä¸€ä¸ªä¸‰è§’ç½‘æ ¼æ‰€éœ€çš„ä¿¡æ¯.å…·ä½“æ¥è¯´,ä¸Šä¸ªé˜¶æ®µè¾“å‡ºçš„éƒ½æ˜¯ä¸‰è§’ç½‘æ ¼é¡¶ç‚¹.ä½†å¦‚æœè¦å¾—åˆ°æ•´ä¸ªä¸‰è§’ç½‘æ ¼å¯¹åƒç´ è¦†ç›–çš„æƒ…å†µ,æˆ‘ä»¬å°±å¿…é¡»è®¡ç®—æ¯æ¡è¾¹ä¸Šçš„åƒç´ åæ ‡. ä¸ºäº†èƒ½å¤Ÿè®¡ç®—è¾¹ç•Œåƒç´ çš„åæ ‡ä¿¡æ¯,æˆ‘ä»¬å°±éœ€è¦å¾—åˆ°ä¸‰è§’å½¢è¾¹ç•Œçš„è¡¨è¾¾æ–¹å¼.è¿™æ ·ä¸€ä¸ªè®¡ç®—ä¸‰è§’å½¢ç½‘æ ¼è¡¨ç¤ºæ•°æ®çš„è¿‡ç¨‹å°±å«åšä¸‰è§’å½¢è®¾ç½®.å®ƒçš„è¾“å‡ºæ˜¯ä¸ºäº†ç»™ä¸‹ä¸€æ­¥åšå‡†å¤‡. Â§ ä¸‰è§’å½¢éå† ä¸‰è§’å½¢éå†é˜¶æ®µä¼šæ£€æŸ¥æ¯ä¸ªåƒç´ æ˜¯å¦è¢«ä¸€ä¸ªä¸‰è§’ç½‘æ ¼æ‰€è¦†ç›–. å¦‚æœè¢«è¦†ç›–çš„è¯,å°±ç”Ÿæˆä¸€ä¸ªç‰‡å…ƒ è€Œè¿™ä¸ªæ‰¾åˆ°å“ªäº›åƒç´ è¢«ä¸‰è§’ç½‘æ ¼è¦†ç›–çš„è¿‡ç¨‹å°±æ˜¯ä¸‰è§’å½¢éå†,è¿™ä¸ªé˜¶æ®µä¹Ÿè¢«ç§°ä¸ºæ‰«æå˜æ¢. ä¸‰è§’å½¢éå†ä¼šæ ¹æ®ä¸Šä¸€ä¸ªé˜¶æ®µçš„è®¡ç®—ç»“æœæ¥åˆ¤æ–­ä¸€ä¸ªä¸‰è§’ç½‘æ ¼è¦†ç›–äº†å“ªäº›åƒç´ ,å¹¶ä½¿ç”¨ä¸‰è§’ç½‘æ ¼ä¸‰ä¸ªé¡¶ç‚¹çš„é¡¶ç‚¹ä¿¡æ¯å¯¹æ•´ä¸ªè¦†ç›–åŒºåŸŸçš„åƒç´ è¿›è¡Œæ’å€¼. è¿™ä¸€æ­¥çš„è¾“å‡ºå°±æ˜¯å¾—åˆ°ä¸€ä¸ªç‰‡å…ƒåºåˆ—. éœ€è¦æ³¨æ„çš„æ˜¯,ä¸€ä¸ªç‰‡å…ƒå¹¶ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„åƒç´ ,è€Œæ˜¯åŒ…å«äº†å¾ˆå¤šçŠ¶æ€çš„é›†åˆ,è¿™äº›çŠ¶æ€ç”¨äºè®¡ç®—æ¯ä¸ªåƒç´ çš„æœ€ç»ˆé¢œè‰² è¿™äº›çŠ¶æ€åŒ…æ‹¬äº†(ä½†ä¸é™äº)å®ƒçš„å±å¹•åæ ‡,æ·±åº¦ä¿¡æ¯,ä»¥åŠå…¶ä»–ä»å‡ ä½•é˜¶æ®µè¾“å‡ºçš„é¡¶ç‚¹ä¿¡æ¯,å¦‚æ³•çº¿,çº¹ç†åæ ‡ç­‰. Â§ ç‰‡å…ƒç€è‰²å™¨ å‰é¢çš„å…‰æ …åŒ–æ“ä½œå¹¶ä¸ä¼šå½±å“å±å¹•ä¸Šæ¯ä¸ªåƒç´ çš„é¢œè‰²å€¼,è€Œæ˜¯ä¼šäº§ç”Ÿä¸€ç³»åˆ—çš„æ•°æ®ä¿¡æ¯,æ¥æè¿°ä¸€ä¸ªä¸‰è§’ç½‘æ ¼æ˜¯æ€æ ·è¦†ç›–æ¯ä¸ªåƒç´ çš„.è€Œç‰‡å…ƒå°±æ˜¯è´Ÿè´£å­˜å‚¨è¿™æ ·ä¸€ç³»åˆ—æ•°æ®. çœŸæ­£ä¼šå¯¹åƒç´ äº§ç”Ÿå½±å“çš„æ˜¯ä¸‹ä¸€ä¸ªé˜¶æ®µâ€“é€ç‰‡å…ƒæ“ä½œ ç‰‡å…ƒç€è‰²å™¨çš„è¾“å…¥æ˜¯ä¸Šä¸€ä¸ªé˜¶æ®µå¯¹é¡¶ç‚¹ä¿¡æ¯æ’å€¼å¾—åˆ°çš„ç»“æœ. æ›´å…·ä½“æ¥è¯´,æ˜¯æ ¹æ®é‚£äº›ä»é¡¶ç‚¹ç€è‰²å™¨ä¸­è¾“å‡ºçš„æ•°æ®å·®å€¼å¾—åˆ°çš„. å®ƒçš„è¾“å‡ºæ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªé¢œè‰²å€¼. è¿™ä¸€é˜¶æ®µå¯ä»¥å®Œæˆå¾ˆå¤šé‡è¦çš„æ¸²æŸ“æŠ€æœ¯,å…¶ä¸­æœ€é‡è¦çš„æŠ€æœ¯ä¹‹ä¸€æ˜¯çº¹ç†é‡‡æ ·. ä¸ºäº†åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­è¿›è¡Œçº¹ç†é‡‡æ ·,æˆ‘ä»¬é€šå¸¸ä¼šåœ¨é¡¶ç‚¹ç€è‰²å™¨é˜¶æ®µè¾“å‡ºæ¯ä¸ªé¡¶ç‚¹å¯¹åº”çš„çº¹ç†åæ ‡ ç„¶åç»è¿‡å…‰æ …åŒ–é˜¶æ®µå¯¹ä¸‰è§’å½¢ç½‘æ ¼çš„ä¸‰ä¸ªé¡¶ç‚¹å¯¹åº”çš„çº¹ç†åæ ‡è¿›è¡Œæ’å€¼å,å°±å¯ä»¥å¾—åˆ°å…¶è¦†ç›–ç‰‡å…ƒçš„çº¹ç†åæ ‡äº†. ç‰‡å…ƒç€è‰²å™¨çš„å±€é™åœ¨äº,å®ƒä»…å¯å½±å“å•ä¸ªç‰‡å…ƒ. ä¹Ÿå°±æ˜¯è¯´,åœ¨æ‰§è¡Œç‰‡å…ƒç€è‰²å™¨æ—¶,å®ƒä¸å¯ä»¥å°†è‡ªå·±çš„ä»»ä½•ç»“æœå‘é€ç»™å®ƒçš„é‚»å±…ä»¬. æœ‰ä¸€ä¸ªæƒ…å†µä¾‹å¤–,å°±æ˜¯ç‰‡å…ƒç€è‰²å™¨å¯ä»¥è®¿é—®åˆ°å¯¼æ•°ä¿¡æ¯(æ‰©å±•é˜…è¯»)(smjb) Â§ é€ç‰‡å…ƒæ“ä½œ ä¹Ÿè¢«ç§°ä¸ºè¾“å‡ºåˆå¹¶é˜¶æ®µ è¿™ä¸€é˜¶æ®µçš„å‡ ä¸ªé‡è¦ä»»åŠ¡: å†³å®šæ¯ä¸ªç‰‡å…ƒçš„å¯è§æ€§. è¿™æ¶‰åŠå¾ˆå¤šæµ‹è¯•å·¥ä½œ,å¦‚æ·±åº¦æµ‹è¯•,æ¨¡æ¿æµ‹è¯•ç­‰ åˆå¹¶ å¦‚æœä¸€ä¸ªç‰‡å…ƒé€šè¿‡äº†æ‰€ä»¥æµ‹è¯•,å°±éœ€è¦æŠŠè¿™ä¸ªç‰‡å…ƒçš„é¢œè‰²å€¼å’Œå·²ç»å­˜å‚¨åœ¨é¢œè‰²ç¼“å†²åŒºä¸­çš„é¢œè‰²è¿›è¡Œæ··åˆ é€ç‰‡å…ƒæ“ä½œæ˜¯é«˜åº¦å¯é…ç½®çš„.å³æˆ‘ä»¬å¯ä»¥è®¾ç½®æ¯ä¸€æ­¥çš„æ“ä½œç»†èŠ‚.]]></content>
      <categories>
        <category>shader</category>
      </categories>
      <tags>
        <tag>unity</tag>
        <tag>shader</tag>
        <tag>ã€Šshaderå…¥é—¨ç²¾è¦ã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[bili-api]]></title>
    <url>%2Fbili-api%2F</url>
    <content type="text"><![CDATA[url æè¿° https://api.bilibili.com/x/relation/stat?vmid={uid} upç²‰ä¸æ•° https://api.bilibili.com/x/space/upstat?mid={uid} è§‚çœ‹é‡ https://api.bilibili.com/x/space/navnum?mid={uid} æŠ•ç¨¿æ•°é‡ https://api.bilibili.com/x/space/acc/info?mid={uid} åŸºæœ¬ä¿¡æ¯ https://api.bilibili.com/x/space/masterpiece?vmid={uid} ä»£è¡¨ä½œ]]></content>
  </entry>
  <entry>
    <title><![CDATA[ã€Šshaderå…¥é—¨ç²¾è¦ã€‹ç¬”è®°-ç¬¬4ç« -æ•°å­¦åŸºç¡€]]></title>
    <url>%2Fshader-r-math%2F</url>
    <content type="text"><![CDATA[ã€Šshaderå…¥é—¨ç²¾è¦ã€‹å…è´¹çš„ç¬¬å››ç« pdf Â§ ç‚¹å’ŒçŸ¢é‡ Â§ ç‚¹ç§¯(å†…ç§¯)å’Œå‰ç§¯(å¤–ç§¯) Â§ å†…ç§¯ Shaderä»£ç ä¸­ä½¿ç”¨dot(a,b)æ¥è¿›è¡ŒçŸ¢é‡çš„ç‚¹ç§¯è¿ç®—. 1aÂ·b = (a x , a y , a z ) Â·(b x , b y , b z ) = a x b x + a y b y + a z b z æ»¡è¶³äº¤æ¢å¾‹å’Œç»“åˆå¾‹. ä½¿ç”¨: æŠ•å½± å•ä½çŸ¢é‡a,å’Œä¸€ä¸ªé•¿åº¦ä¸é™åˆ¶çš„çŸ¢é‡b,dot(a,b)å¾—åˆ°båœ¨aæ–¹å‘ä¸Šå¸¦æœ‰ç¬¦å·çš„æŠ•å½± Â§ å¤–ç§¯ å¤–ç§¯çš„ç»“æœæ—¶çŸ¢é‡,å¹¶éæ ‡é‡. 1a X b = (a x , a y , a z ) X (b x , b y , b z ) = (a y b z - a z b y , a z b x - a x b z , a x b y - a y b x ) ä¾‹å¦‚: (1, 2, 3) X (âˆ’2, âˆ’1, 4) = ((2)(4) âˆ’ (3)(âˆ’1), (3)(âˆ’2) âˆ’ (1)(4), (1)(âˆ’1) âˆ’ (2)(âˆ’2)) = (8 âˆ’ (âˆ’3), (âˆ’6) âˆ’ 4, (âˆ’1) âˆ’ (âˆ’4)) = (11, âˆ’10, 3) å¤–ç§¯ä¸æ»¡è¶³äº¤æ¢å¾‹,å³a X bä¸ç­‰äºb X a. ç„¶è€Œå¤–ç§¯æ»¡è¶³åäº¤æ¢å¾‹,å³a X b = -(b X a) å¤–ç§¯ä¸æ»¡è¶³ç»“åˆå¾‹. Â§ çŸ©é˜µ(matrix) Â§ çŸ©é˜µè¿ç®— Â§ çŸ©é˜µä¹˜æ³• çŸ©é˜µä¹˜æ³•ä¸æ»¡è¶³äº¤æ¢å¾‹ ABä¸ç­‰äºBA çŸ©é˜µä¹˜æ³•æ»¡è¶³ç»“åˆå¾‹ (AB)C = A(BC) shaderä¸­ä¸»è¦ä½¿ç”¨4x4çŸ©é˜µæ¥è¿ç®—. Â§ ç‰¹æ®ŠçŸ©é˜µ Â§ æ–¹å—çŸ©é˜µ(æ–¹é˜µ) è¡Œå’Œåˆ—æ•°ç›®ç›¸ç­‰çš„çŸ©é˜µ. ä¸‰ç»´æ¸²æŸ“é‡Œ,ç”¨çš„æœ€å¤šçš„æ˜¯3x3å’Œ4x4çš„æ–¹é˜µ Â§ å•ä½çŸ©é˜µ ç”¨Inæ¥è¡¨ç¤º.æ¯”å¦‚I3æ˜¯3x3çš„å•ä½çŸ©é˜µ. Â§ è½¬ç½®çŸ©é˜µ transposed matrix è½¬ç½®çŸ©é˜µå®é™…æ˜¯å¯¹åŸçŸ©é˜µçš„ä¸€ç§è¿ç®—,å³è½¬ç½®è¿ç®—.ç»™å®šä¸€ä¸ªrXcçš„çŸ©é˜µM,ä»–çš„è½¬ç½®å¯ä»¥è¡¨ç¤ºä¸ºMT(Tä¸ºä¸Šæ ‡)(è¾£é¸¡MD).æ•°å­¦å…¬å¼æ˜¯: ä¾‹å¦‚: Â§ è½¬ç½®çŸ©é˜µæ€§è´¨: è½¬ç½®çŸ©é˜µçš„è½¬ç½®ç­‰äºåŸçŸ©é˜µ(åºŸè¯) çŸ©é˜µçš„ä¸²æ¥è½¬ç½®ç­‰äºåå‘ä¸²æ¥å„ä¸ªçŸ©é˜µçš„è½¬ç½® å³: Â§ é€†çŸ©é˜µ ç»™å®šä¸€ä¸ªçŸ©é˜µM,ç”¨M-1(-1ä¸ºä¸Šæ ‡)è¡¨ç¤ºMçš„é€†çŸ©é˜µ. MM-1ä¸ºå•ä½çŸ©é˜µ Â§ çŸ©é˜µå¯é€†çš„æ¡ä»¶: çŸ©é˜µä¸ºæ–¹å—çŸ©é˜µ çŸ©é˜µçš„è¡Œåˆ—å¼ä¸ä¸ºé›¶ è™½è¯´åœ¨å­¦æ•°å­¦â€¦ä½†æ˜¯ä¹Ÿæ˜¯shaderå¼€å‘é‡Œçš„æ•°å­¦â€¦è¿˜æ˜¯ä¸å»å›å¿†å…·ä½“æ€ä¹ˆæ±‚é€†çŸ©é˜µäº†,äº¤ç»™ç¨‹åºå»åš=v= Â§ é€†çŸ©é˜µçš„æ€§è´¨ é€†çŸ©é˜µçš„é€†çŸ©é˜µç­‰äºåŸçŸ©é˜µ å•ä½çŸ©é˜µçš„é€†çŸ©é˜µæ˜¯å…¶æœ¬èº« è½¬ç½®çŸ©é˜µçš„é€†çŸ©é˜µç­‰äºé€†çŸ©é˜µçš„è½¬ç½® å³: çŸ©é˜µä¸²æ¥ç›¸ä¹˜åçš„é€†çŸ©é˜µç­‰äºåå‘ä¸²æ¥å„ä¸ªçŸ©é˜µçš„é€†çŸ©é˜µ å³: Â§ æ­£äº¤çŸ©é˜µ è’¸é¥ºæ­£äº¤æ˜¯çŸ©é˜µçš„ä¸€ç§å±æ€§.å¦‚æœä¸€ä¸ªæ–¹é˜µMå’Œå®ƒçš„è½¬ç½®çŸ©é˜µçš„ä¹˜ç§¯æ˜¯å•ä½çŸ©é˜µçš„è¯,æˆ‘ä»¬è¯´è¿™ä¸ªçŸ©é˜µæ˜¯æ­£äº¤çš„ å³: Â§ è¡ŒçŸ©é˜µoråˆ—çŸ©é˜µ? ä¹¦ä¸Šp64 è¿™é‡Œä¸è¯´è¿‡ç¨‹äº†. ç»“è®ºæ˜¯,unityä¸­ä¹ æƒ¯æŠŠçŸ¢é‡è½¬æ¢æˆåˆ—çŸ©é˜µ,å¹¶æ”¾åœ¨çŸ©é˜µçš„å³ä¾§è¿›è¡Œè®¡ç®—. Â§ çŸ©é˜µçš„å‡ ä½•æ„ä¹‰: å˜æ¢ Â§ å˜æ¢çš„ç±»å‹ Â§ çº¿æ€§å˜æ¢ å¯ä»¥ä¿ç•™çŸ¢é‡åŠ å’Œæ ‡é‡ä¹˜çš„å˜æ¢.ç”¨æ•°å­¦å…¬å¼è¡¨è¾¾å³æ˜¯: ä¸Šé¢çš„å¼å­å¾ˆæŠ½è±¡. ç¼©æ”¾å°±æ˜¯ä¸€ç§çº¿æ€§å˜æ¢.å¦‚f(x) = 2x,å¯ä»¥è¡¨ç¤ºä¸€ä¸ªå¤§å°ä¸º2çš„ç»Ÿä¸€ç¼©æ”¾. æ—‹è½¬ä¹Ÿæ˜¯ä¸€ç§çº¿æ€§å˜æ¢ å¯¹äºçº¿æ€§å˜æ¢æ¥è¯´,ä»…ä»…ä½¿ç”¨3X3çŸ©é˜µå¯ä»¥è¡¨ç¤ºä¸‰ç»´åæ ‡ä¸‹çš„æ‰€æœ‰çº¿æ€§å˜æ¢. çº¿æ€§å˜æ¢é™¤äº†åŒ…æ‹¬æ—‹è½¬å’Œç¼©æ”¾å¤–,è¿˜åŒ…æ‹¬é”™åˆ‡,é•œåƒ,æ­£äº¤æŠ•å½±ç­‰. Â§ ä»¿å°„å˜æ¢ ä»…æœ‰çº¿æ€§å˜æ¢æ˜¯ä¸å¤Ÿçš„,è¦è€ƒè™‘å¹³ç§»äº¤æ¢.å¦‚,f(x) = x + (1,0,0)è¿™ä¸ªå˜æ¢å°±ä¸æ˜¯ä¸€ä¸ªçº¿æ€§å˜æ¢. ä¸‰ç»´åæ ‡ä¸‹,æˆ‘ä»¬ä¸èƒ½ç”¨ä¸€ä¸ª3x3çš„çŸ©é˜µæ¥è¡¨ç¤ºä¸€ä¸ªå¹³ç§»å˜æ¢. è¿™æ ·,å°±æœ‰äº†ä»¿å°„å˜æ¢. ä»¿å°„å˜æ¢æ˜¯åˆå¹¶äº†çº¿æ€§å˜æ¢å’Œå¹³ç§»å˜æ¢çš„å˜æ¢ç±»å‹.ä¸‰ç»´ç©ºé—´ä¸‹çš„ä»¿å°„å˜æ¢å¯ä»¥ç”¨ä¸€ä¸ª4x4çš„çŸ©é˜µæ¥è¡¨ç¤º.ä¸ºæ­¤,æˆ‘ä»¬éœ€è¦æŠŠçŸ¢é‡æ‰©å±•åˆ°å››ç»´ç©ºé—´ä¸‹,è¿™å°±æ˜¯é½ æ¬¡ å æ ‡ ç©º é—´(homogeneous space). ä¸çŸ¥é“æ˜¯ä»€ä¹ˆé¸¡å„¿ç©æ„å•å¥½åƒä»¥åæœ‰ç”¨çš„è¡¨ Â§ é½æ¬¡åæ ‡ å› ä¸º3X3çŸ©é˜µä¸èƒ½è¡¨ç¤ºå¹³ç§»,æ‰€ä»¥æˆ‘ä»¬ç”¨4x4çŸ©é˜µ.ä¸ºæ­¤,æˆ‘ä»¬è¿˜éœ€è¦æŠŠåŸæ¥çš„ä¸‰ç»´çŸ¢é‡è½¬æ¢æˆå››ç»´çŸ¢é‡,ä¹Ÿå°±æ˜¯é½æ¬¡åæ ‡(homogeneous coordinate). å¯¹äºä¸€ä¸ªç‚¹,ä»ä¸‰ç»´åæ ‡è½¬æ¢ä¸ºé½æ¬¡åæ ‡æ˜¯å°†å…¶wåˆ†é‡è®¾ä¸º1,è€Œå¯¹äºæ–¹å‘çŸ¢é‡è€Œè¨€,éœ€è¦æŠŠå…¶wåˆ†é‡è®¾ä¸º0. è¿™æ ·çš„è®¾ç½®ä¼šå¯¼è‡´,ç”¨ä¸€ä¸ª4x4çŸ©é˜µå¯¹ä¸€ä¸ªç‚¹è¿›è¡Œå˜æ¢çš„æ—¶å€™,å¹³ç§»,ç¼©æ”¾,æ—‹è½¬éƒ½ä¼šè¢«æ–½åŠ äºè¯¥ç‚¹.ä½†æ˜¯å¦‚æœç”¨äºå˜æ¢ä¸€ä¸ªæ–¹å‘çŸ¢é‡,å¹³ç§»çš„æ•ˆæœå°±ä¼šè¢«å¿½ç•¥. Â§ åˆ†è§£åŸºç¡€å˜æ¢çŸ©é˜µ æˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªåŸºç¡€å˜æ¢çŸ©é˜µåˆ†è§£æˆ4ä¸ªç»„æˆéƒ¨åˆ†. å…¶ä¸­,å·¦ä¸Šè§’çš„Mæ˜¯ä¸€ä¸ªç”¨äºæ—‹è½¬å’Œç¼©æ”¾çš„ä¸‰ç»´çŸ©é˜µ. tè¡¨ç¤ºå¹³ç§». æœ€åä¸€è¡Œæ˜¯å›ºå®šçš„[0 0 0 1] Â§ å¹³ç§»çŸ©é˜µ Mä¸ºå•ä½çŸ©é˜µæ—¶,æ•´ä¸ª4x4çŸ©é˜µåªä»£è¡¨å¹³ç§». å¹³ç§»çŸ©é˜µçš„é€†çŸ©é˜µå°±æ˜¯åå‘å¹³ç§»çš„çŸ©é˜µ. Â§ ç¼©æ”¾çŸ©é˜µ å¦‚æœç¼©æ”¾ç³»æ•°kx = ky = kz,æˆ‘ä»¬æŠŠè¿™æ ·çš„ç¼©æ”¾ç§°ä¸ºç»Ÿä¸€ç¼©æ”¾å¦åˆ™ç§°ä¸ºéç»Ÿä¸€ç¼©æ”¾. ç›´è§‚ä¸Šçœ‹,ç»Ÿä¸€ç¼©æ”¾å°±æ˜¯ç­‰æ¯”ç¼©æ”¾æ¨¡å‹,è€Œéç»Ÿä¸€ç¼©æ”¾ä¼šæ‹‰ä¼¸æˆ–æŒ¤å‹æ¨¡å‹. ç»Ÿä¸€ç¼©æ”¾ä¸ä¼šæ”¹å˜è§’åº¦å’Œæ¯”ä¾‹ä¿¡æ¯,éç»Ÿä¸€ç¼©æ”¾ä¼šæ”¹å˜æ¨¡å‹ç›¸å…³çš„è§’åº¦å’Œæ¯”ä¾‹. åœ¨è¿›è¡Œæ³•çº¿å˜æ¢æ—¶,å¦‚æœå­˜åœ¨éç»Ÿä¸€ç¼©æ”¾,ç›´æ¥ç”¨äºå˜æ¢é¡¶ç‚¹çš„å˜æ¢çŸ©é˜µçš„è¯,å°±ä¼šå¾—åˆ°é”™è¯¯çš„ç»“æœ.(æ­£ç¡®çš„æ–¹æ³•è§4.7èŠ‚(è¿˜æ²¡å‘è´§å“¦è‰)) Â§ æ—‹è½¬çŸ©é˜µ Â§ æŒ‰xè½´æ—‹è½¬: Â§ æŒ‰yè½´æ—‹è½¬ Â§ æŒ‰zè½´æ—‹è½¬ Â§ å¤åˆå˜æ¢ æˆ‘ä»¬å¯ä»¥æŠŠå¹³ç§»,æ—‹è½¬,ç¼©æ”¾ç»“åˆèµ·æ¥,ç»„æˆä¸€ä¸ªå¤æ‚çš„å˜æ¢è¿‡ç¨‹. ä¾‹å¦‚,å¯ä»¥å¯¹ä¸€ä¸ªæ¨¡å‹å…ˆè¿›è¡Œå¤§å°ä¸º(2, 2, 2)çš„ç¼©æ”¾,å†ç»•yè½´æ—‹è½¬30åº¦,æœ€åå‘zè½´å¹³ç§»4ä¸ªå•ä½. å¤åˆçŸ©é˜µå¯ä»¥é€šè¿‡çŸ©é˜µçš„ä¸²è”æ¥å®ç°. å¦‚: éœ€è¦æ³¨æ„çš„æ˜¯,å› ä¸ºçŸ©é˜µçš„ä¹˜æ³•ä¸æ»¡è¶³äº¤æ¢å¾‹,å˜æ¢çš„ç»“æœæ˜¯ä¾èµ–äºå˜æ¢é¡ºåºçš„. ç»å¤§å¤šæ•°æƒ…å†µä¸‹,æˆ‘ä»¬çº¦å®šå˜æ¢çš„é¡ºåºæ˜¯,å…ˆç¼©æ”¾,å†æ—‹è½¬,æœ€åå¹³ç§». Â§ åæ ‡ç©ºé—´ Â§ æ¨¡å‹ç©ºé—´ ä¹Ÿç§°å¯¹è±¡ç©ºé—´æˆ–å±€éƒ¨ç©ºé—´. Â§ ä¸–ç•Œç©ºé—´ æœ€å¤–å±‚çš„åæ ‡ç©ºé—´ Â§ è§‚å¯Ÿç©ºé—´ ä¹Ÿç§°ä¸ºæ‘„åƒæœºç©ºé—´ Unityä¸­è§‚å¯Ÿç©ºé—´çš„+xè½´æŒ‡å³æ–¹,+yè½´æŒ‡å‘ä¸Šæ–¹,+zè½´æŒ‡å‘æ‘„åƒæœºçš„åæ–¹----Unityåœ¨æ¨¡å‹ç©ºé—´å’Œä¸–ç•Œç©ºé—´é€‰ç”¨çš„æ˜¯å·¦æ‰‹åæ ‡ç³»,è€Œè§‚å¯Ÿè€…ç©ºé—´é€‰ç”¨å³æ‰‹åæ ‡ç³». è§‚å¯Ÿç©ºé—´å’Œå±å¹•ç©ºé—´æ˜¯ä¸åŒçš„.è§‚å¯Ÿç©ºé—´æ˜¯ä¸€ä¸ªä¸‰ç»´ç©ºé—´,è€Œå±å¹•ç©ºé—´æ˜¯ä¸€ä¸ªäºŒç»´ç©ºé—´.ä»è§‚å¯Ÿç©ºé—´åˆ°å±å¹•ç©ºé—´éœ€è¦ä¸€ä¸ªæŠ•å½±(projection)è½¬æ¢. é¡¶ç‚¹å˜æ¢çš„ç¬¬äºŒæ­¥,å°±æ˜¯å°†é¡¶ç‚¹åæ ‡ä»ä¸–ç•Œç©ºé—´å˜æ¢åˆ°è§‚å¯Ÿç©ºé—´.è¿™ä¸ªå˜æ¢é€šå¸¸å«åšè§‚å¯Ÿå˜æ¢. Â§ å‰ªè£ç©ºé—´ é¡¶ç‚¹æ¥ä¸‹æ¥è¦ä»è§‚å¯Ÿè€…ç©ºé—´è½¬æ¢åˆ°å‰ªè£ç©ºé—´(clip space,ä¹Ÿè¢«ç§°ä¸ºé½æ¬¡è£å‰ªç©ºé—´)ä¸­,è¿™ä¸ªç”¨äºå˜æ¢çš„ä¸¾è¯å«åšè£å‰ªçŸ©é˜µ(clip matrix),ä¹Ÿè¢«ç§°ä¸ºæŠ•å½±çŸ©é˜µ(projection matrix). å‰ªè£ç©ºé—´çš„ç›®æ ‡æ˜¯èƒ½å¤Ÿæ–¹ä¾¿åœ°å¯¹æ¸²æŸ“å›¾å…ƒè¿›è¡Œè£å‰ª.å®Œå…¨ä½äºè¿™å—ç©ºé—´å†…éƒ¨çš„å›¾å…ƒå°†ä¼šè¢«ä¿ç•™,å®Œå…¨å¤„äºè¿™å—ç©ºé—´å¤–éƒ¨çš„å›¾å…ƒå°†ä¼šè¢«å‰”é™¤,è€Œä¸è¿™å—ç©ºé—´è¾¹ç•Œç›¸äº¤çš„å›¾å…ƒå°±ä¼šè¢«è£å‰ª.è¿™å—ç©ºé—´æ˜¯ç”±è§†é”¥ä½“(view frustum)å†³å®šçš„. è§†é”¥ä½“æŒ‡çš„æ˜¯ç©ºé—´ä¸­çš„ä¸€å—åŒºåŸŸ,è¿™å—åŒºåŸŸå†³å®šäº†æ‘„åƒæœºå¯ä»¥çœ‹åˆ°çš„ç©ºé—´.è§†é”¥ä½“ç”±ç•™ä¸ªå¹³é¢åŒ…å›´è€Œæˆ,è¿™äº›å¹³é¢è¢«ç§°ä¸ºè£å‰ªå¹³é¢(clip planes). è§†é”¥ä½“æœ‰ä¸¤ç§ç±»å‹,è¿™æ¶‰åŠä¸¤ç§æŠ•å½±ç±»å‹----ä¸€ç§æ˜¯æ­£äº¤æŠ•å½±(orthographic projection),ä¸€ç§æ˜¯é€è§†æŠ•å½±(perspective projection) é€è§†æŠ•å½±ä¼šæœ‰è¿œå°è¿‘å¤§. åœ¨è§†é”¥ä½“çš„6å—è£å‰ªå¹³é¢ä¸­,æœ‰ä¸¤å—è£å‰ªå¹³é¢æ¯”è¾ƒç‰¹æ®Š,åˆ†åˆ«æ˜¯è¿‘å‰ªè£å¹³é¢(near clip plane)å’Œè¿œå‰ªè£å¹³é¢(far clip plane).å®ƒä»¬å†³å®šäº†æ‘„åƒæœºå¯ä»¥çœ‹åˆ°çš„æ·±åº¦èŒƒå›´. æˆ‘ä»¬é€šè¿‡ä¸€ç§é€šç”¨,ç®€æ´çš„æ–¹å¼è¿›è¡Œå‰ªè£å·¥ä½œ,è¿™ç§æ–¹å¼æ˜¯é€šè¿‡ä¸€ä¸ªæŠ•å½±çŸ©é˜µæŠŠé¡¶ç‚¹è½¬æ¢åˆ°ä¸€ä¸ªå‰ªè£ç©ºé—´ä¸­. æŠ•å½±çŸ©é˜µæœ‰ä¸¤ä¸ªç›®çš„: é¦–å…ˆæ˜¯ä¸ºæŠ•å½±åšå‡†å¤‡.è¿™æ˜¯ä¸ªè¿·æƒ‘ç‚¹,è™½ç„¶æŠ•å½±çŸ©é˜µåŒ…å«äº†æŠ•å½±äºŒå­—,ä½†æ˜¯å®ƒå¹¶æ²¡æœ‰è¿›è¡ŒçœŸæ­£çš„æŠ•å½±å·¥ä½œ,è€Œæ˜¯åœ¨ä¸ºæŠ•å½±åšå‡†å¤‡.çœŸæ­£çš„æŠ•å½±å‘ç”Ÿåœ¨åé¢çš„é½æ¬¡æ’é™¤æ³•(homogeneous division)è¿‡ç¨‹ä¸­.è€Œç»è¿‡æŠ•å½±çŸ©é˜µå˜æ¢å,é¡¶ç‚¹çš„wåˆ†é‡å°†ä¼šå…·æœ‰ç‰¹æ®Šæ„ä¹‰. å…¶æ¬¡æ˜¯å¯¹x,y,zåˆ†é‡è¿›è¡Œç¼©æ”¾.ç»è¿‡æŠ•å½±çŸ©é˜µçš„ç¼©æ”¾ä»¥å,æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨wåˆ†é‡ä½œä¸ºä¸€ä¸ªèŒƒå›´å€¼,å¦‚x,y,zéƒ½åœ¨è¿™ä¸ªèŒƒå›´å†…,å°±è¯´æ˜è¯¥é¡¶ç‚¹ä½äºå‰ªè£ç©ºé—´å†…. Â§ 1.é€è§†æŠ•å½± è§†é”¥ä½“çš„å…­ä¸ªå‰ªè£å¹³é¢æ˜¯ç”±Cameraç»„ä»¶ä¸­çš„å‚æ•°å’ŒGameè§†å›¾çš„æ¨ªçºµæ¯”å…±åŒå†³å®šçš„. å¦‚å›¾æ‰€ç¤º,æˆ‘ä»¬å¯ä»¥é€šè¿‡Cameraç»„ä»¶çš„Field of View(ç®€ç§°FOV)å±æ€§æ¥æ”¹å˜è§†é”¥ä½“ç«–ç›´å¼ å¼€çš„è§’åº¦,è€ŒCliping Planesä¸­çš„Nearå’ŒFarå±æ€§å¯ä»¥æ§åˆ¶è§†é”¥ä½“çš„è¿‘å‰ªè£å¹³é¢å’Œè¿œå‰ªè£å¹³é¢è·ç¦»æ‘„åƒæœºçš„è¿œè¿‘.è¿™æ ·,æˆ‘ä»¬å¯ä»¥æ±‚å‡ºè§†é”¥ä½“è¿‘å‰ªè£å¹³é¢å’Œè¿œå‰ªè£å¹³é¢çš„é«˜åº¦. ä¸€ä¸ªæ‘„åƒæœºçš„æ¨ªçºµæ¯”ç”±Gameè§†å›¾çš„æ¨ªçºµæ¯”å’ŒViewport Rectä¸­çš„Wå’ŒHå±æ€§å…±åŒå†³å®š.å‡è®¾,å½“å‰æ‘„åƒæœºçš„æ¨ªçºµæ¯”æ˜¯Aspect: ç°åœ¨,æˆ‘ä»¬å¯ä»¥æ ¹æ®å·²çŸ¥çš„Near,Far,FOVå’ŒAspectçš„å€¼æ¥ç¡®å®šé€è§†æŠ•å½±çš„æŠ•å½±çŸ©é˜µ. æ¨å¯¼è§æœ¬ç« çš„æ‰©å±•é˜…è¯»éƒ¨åˆ† ä¸€ä¸ªé¡¶ç‚¹å’Œä¸Šé¢çš„æŠ•å½±çŸ©é˜µç›¸ä¹˜å,å¯ä»¥ç”±è§‚å¯Ÿè€…ç©ºé—´å˜æ¢åˆ°å‰ªè£ç©ºé—´. ä»ç»“æœå¯ä»¥çœ‹å‡ºæ¥,æŠ•å½±çŸ©é˜µçš„æœ¬è´¨æ˜¯å¯¹x,y,zåˆ†é‡åšäº†ä¸åŒçš„ç¼©æ”¾(zåˆ†é‡è¿˜åšäº†ä¸€ä¸ªå¹³ç§»).ç¼©æ”¾çš„ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿è£å‰ª. å¯ä»¥æ³¨æ„åˆ°,æ­¤æ—¶é¡¶ç‚¹çš„wåˆ†é‡ä¸å†æ˜¯1,è€Œæ˜¯åŸå…ˆzåˆ†é‡çš„å–å.ç°åœ¨,æˆ‘ä»¬å°±å¯ä»¥æŒ‰å¦‚ä¸‹ä¸ç­‰å¼åˆ¤æ–­ä¸€ä¸ªå˜æ¢åçš„é¡¶ç‚¹æ˜¯å¦ä½äºè§†é”¥ä½“å†….å¦‚æœä¸€ä¸ªé¡¶ç‚¹åœ¨è§†é”¥ä½“å†…,é‚£ä¹ˆå®ƒå˜æ¢åçš„åæ ‡å¿…é¡»æ»¡è¶³: -w &lt;= x &lt;= w -w &lt;= y &lt;= w -w &lt;= z &lt;= w ä»»ä½•ä¸æ»¡è¶³ä¸Šè¿°æ¡ä»¶çš„å›¾å…ƒéƒ½éœ€è¦è¢«å‰”é™¤æˆ–è€…è£å‰ª. é€šè¿‡æ­¤å›¾è¿˜å¯ä»¥æ³¨æ„åˆ°,å‰ªè£çŸ©é˜µä¼šæ”¹å˜ç©ºé—´çš„æ—‹å‘æ€§:ç©ºé—´ä»å³æ‰‹åæ ‡ç³»å˜æ¢åˆ°äº†å·¦æ‰‹åæ ‡ç³». Â§ 2. æ­£äº¤æŠ•å½± å’Œé€è§†æŠ•å½±ç±»ä¼¼,åœ¨unityä¸­,æ­£äº¤æŠ•å½±çš„å…­ä¸ªäººè£å‰ªå¹³é¢æ˜¯ç”±Cameraç»„ä»¶ä¸­çš„å‚æ•°å’ŒGameè§†å›¾çš„æ¨ªçºµæ¯”å…±åŒå†³å®šçš„. ç”±å›¾çœ‹å‡º,æˆ‘ä»¬å¯ä»¥é€šè¿‡Cameraç»„ä»¶çš„Sizeå±æ€§æ¥æ”¹å˜è§†é”¥ä½“ç«–ç›´æ–¹å‘ä¸Šçš„é«˜åº¦çš„ä¸€åŠ,è€ŒClipping Planesä¸­çš„Nearå’ŒFarå‚æ•°å¯ä»¥æ§åˆ¶è§†é”¥ä½“çš„è¿‘å‰ªè£å¹³é¢å’Œè¿œå‰ªè£å¹³é¢è·ç¦»æ‘„åƒæœºçš„è¿œè¿‘.è¿™æ ·,æˆ‘ä»¬å¯ä»¥æ±‚å‡ºè§†é”¥ä½“è¿‘å‰ªè£å¹³é¢å’Œè¿œå‰ªè£å¹³é¢çš„é«˜åº¦.å³: åŒæ ·,æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‘„åƒæœºçš„æ¨ªçºµæ¯”å¾—åˆ°æ¨ªå‘ä¿¡æ¯.å‡è®¾å½“å‰æ‘„åƒæœºçš„æ¨ªçºµæ¯”ä¸ºAspect: ç°åœ¨æˆ‘ä»¬æ ¹æ®å·²çŸ¥çš„Near,Far,Sizeå’ŒAspectçš„å€¼æ¥ç¡®å®šæ­£äº¤æŠ•å½±çš„è£å‰ªçŸ©é˜µ.å¦‚ä¸‹: æ¨å¯¼è§æœ¬ç« çš„æ‰©å±•é˜…è¯» ä¸€ä¸ªé¡¶ç‚¹å’Œä¸Šè¿°æŠ•å½±çŸ©é˜µç›¸ä¹˜åçš„ç»“æœå¦‚ä¸‹: æ³¨æ„åˆ°,å’Œé€è§†æŠ•å½±ä¸åŒ,ä½¿ç”¨æ­£äº¤æŠ•å½±çš„æŠ•å½±çŸ©é˜µå¯¹é¡¶ç‚¹å˜æ¢å,å…¶åˆ†é‡wä¾ç„¶ä¸º1.æœ¬è´¨æ˜¯å› ä¸ºæŠ•å½±çŸ©é˜µæœ€åä¸€è¡Œçš„ä¸åŒ,é€è§†æŠ•å½±çš„æŠ•å½±çŸ©é˜µçš„æœ€åä¸€è¡Œæ˜¯[0 0 -1 0],è€Œæ­£äº¤æŠ•å½±çš„æŠ•å½±çŸ©é˜µæœ€åä¸€è¡Œæ˜¯[0 0 0 1].è¿™æ ·é€‰æ‹©æ˜¯ä¸ºäº†ä¸ºé½æ¬¡é™¤æ³•åšå‡†å¤‡(å…·ä½“åœ¨ä¸‹é¢è®²åˆ°) åˆ¤æ–­ä¸€ä¸ªå˜æ¢åçš„é¡¶ç‚¹æ˜¯å¦ä½äºè§†é”¥ä½“å†…ä½¿ç”¨çš„ä¸ç­‰å¼å’Œé€è§†æŠ•å½±çš„ä¸€æ ·. åŒæ ·,è£å‰ªçŸ©é˜µæ”¹å˜äº†ç©ºé—´çš„æ—‹å‘æ€§.å¯ä»¥æ³¨æ„åˆ°,ç»è¿‡æ­£äº¤æŠ•å½±å˜æ¢åçš„é¡¶ç‚¹å®é™…å·²ç»ä½äºä¸€ä¸ªç«‹æ–¹ä½“å†…äº†. Â§ å±å¹•ç©ºé—´ ç»è¿‡äº†æŠ•å½±çŸ©é˜µçš„å˜æ¢å,æˆ‘ä»¬å¯ä»¥è¿›è¡Œå‰ªè£å·¥ä½œ.å½“å®Œæˆäº†æ‰€æœ‰çš„å‰ªè£å·¥ä½œå,å°±éœ€è¦è¿›è¡ŒçœŸæ­£çš„æŠ•å½±äº†.ä¹Ÿå°±æ˜¯è¯´,æˆ‘ä»¬éœ€è¦æŠŠè§†é”¥ä½“æŠ•å½±åˆ°å±å¹•ç©ºé—´(screen space)ä¸­.ç»è¿‡è¿™ä¸€æ­¥å˜æ¢,æˆ‘ä»¬ä¼šå¾—åˆ°çœŸæ­£çš„åƒç´ ä½ç½®,äºŒéè™šæ‹Ÿçš„ä¸‰ç»´åæ ‡. å±å¹•ç©ºé—´æ˜¯ä¸€ä¸ªäºŒç»´ç©ºé—´,å› æ­¤æˆ‘ä»¬éœ€è¦æŠŠé¡¶ç‚¹ä»å‰ªè£ç©ºé—´æŠ•å½±åˆ°å±å¹•ç©ºé—´,æ¥ç”Ÿæˆå¯¹åº”çš„2Dåæ ‡.è¿™ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ é¦–å…ˆ,æˆ‘ä»¬è¦è¿›è¡Œæ ‡å‡†é½æ¬¡é™¤æ³•(homogeneous division),ä¹Ÿè¢«ç§°ä¸ºé€è§†é™¤æ³•(perspective division).è™½ç„¶è¿™ä¸ªæ­¥éª¤å¬èµ·æ¥é™Œç”Ÿ,ä½†å®ƒå®é™…ä¸Šéå¸¸ç®€å•,å°±æ˜¯ç”¨é½æ¬¡åæ ‡ç³»çš„wåˆ†é‡å»é™¤ä»¥x,y,zåˆ†é‡.åœ¨OpenGLä¸­,æˆ‘ä»¬æŠŠè¿™ä¸€æ­¥å¾—åˆ°çš„åæ ‡å«åšå½’ä¸€åŒ–çš„è®¾å¤‡åæ ‡(Normalized Device Coordinate, NDC).ç»è¿‡è¿™ä¸€æ­¥,æˆ‘ä»¬å¯ä»¥æŠŠåæ ‡ä»é½æ¬¡å‰ªè£åæ ‡ç©ºé—´è½¬æ¢åˆ°NDCä¸­.ç»è¿‡é€è§†æŠ•å½±å˜æ¢åçš„å‰ªè£ç©ºé—´,ç»è¿‡é½æ¬¡é™¤æ³•åä¼šå˜æ¢åˆ°ä¸€ä¸ªç«‹æ–¹ä½“å†…. å¯¹äºé€è§†æŠ•å½± å¯¹äºæ­£äº¤æŠ•å½± ç»è¿‡é½æ¬¡é™¤æ³•å,é€è§†æŠ•å½±çš„å‰ªè£ç©ºé—´ä¼šå˜æ¢åˆ°ä¸€ä¸ªç«‹æ–¹ä½“ å¯¹äºæ­£äº¤æŠ•å½±æ¥è¯´,å®ƒçš„å‰ªè£ç©ºé—´å®é™…å·²ç»æ˜¯ä¸€ä¸ªç«‹æ–¹ä½“äº†,è€Œä¸”ç”±äºç»è¿‡æ­£äº¤æŠ•å½±çŸ©é˜µå˜æ¢åçš„é¡¶ç‚¹çš„wåˆ†é‡æ˜¯1,å› æ­¤é½æ¬¡é™¤æ³•å¹¶ä¸ä¼šå¯¹é¡¶ç‚¹çš„x,y,zåæ ‡äº§ç”Ÿå½±å“ ç»è¿‡é½æ¬¡é™¤æ³•å,é€è§†æŠ•å½±å’Œæ­£äº¤æŠ•å½±çš„è§†é”¥ä½“éƒ½å˜æ¢åˆ°ä¸€ä¸ªç›¸åŒçš„ç«‹æ–¹ä½“å†….ç°åœ¨,æˆ‘ä»¬å¯ä»¥æ ¹æ®å˜æ¢åçš„x,yåæ ‡æ¥æ˜ å°„è¾“å‡ºçª—å£çš„å¯¹åº”åƒç´ åæ ‡. è¿™ä¸ªæ˜ å°„çš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªç¼©æ”¾çš„è¿‡ç¨‹. é½æ¬¡é™¤æ³•å’Œå±å¹•æ˜ å°„çš„è¿‡ç¨‹å¯ä»¥ç”¨ä¸‹é¢çš„å…¬å¼æ€»ç»“: ä¸Šé¢å¼å­å¯¹xå’Œyåˆ†é‡è¿›è¡Œäº†å¤„ç†,è€Œzåˆ†é‡ä¼šè¢«ç”¨äºæ·±åº¦ç¼“å†².ä¸€ä¸ªä¼ ç»Ÿçš„æ–¹å¼æ˜¯æŠŠclip z / clip wçš„å€¼ç›´æ¥å­˜è¿›æ·±åº¦ç¼“å†²ä¸­,ä½†è¿™ä¸æ˜¯å¿…é¡»çš„.é€šå¸¸é©±åŠ¨çš„ç”Ÿäº§å•†ä¼šæ ¹æ®ç¡¬ä»¶æ¥é€‰æ‹©æœ€å¥½çš„å­˜å‚¨æ ¼å¼. æ­¤æ—¶clip wä¹Ÿå¹¶æœªæŠ›å¼ƒ,è™½ç„¶å®ƒå·²ç»å®Œæˆäº†å®ƒçš„ä¸»è¦å·¥ä½œâ€“åœ¨é½æ¬¡é™¤æ³•ä¸­ä½œä¸ºåˆ†æ¯æ¥å¾—åˆ°NDC,ä½†å®ƒä»ç„¶ä¼šåœ¨åç»­çš„ä¸€äº›å·¥ä½œä¸­èµ·åˆ°é‡è¦ä½œç”¨.ä¾‹å¦‚è¿›è¡Œé€è§†çŸ«æ­£å·®å€¼(è‰,è¿™åˆæ˜¯ä»€ä¹ˆç©æ„) åœ¨Unityä¸­,ä»å‰ªè£ç©ºé—´åˆ°å±å¹•ç©ºé—´çš„è½¬æ¢æ˜¯åº•å±‚å¸®æˆ‘ä»¬å®Œæˆçš„.æˆ‘ä»¬çš„é¡¶ç‚¹ç€è‰²å™¨åªéœ€è¦æŠŠé¡¶ç‚¹è½¬æ¢åˆ°å‰ªè£ç©ºé—´å³å¯. Â§ æ€»ç»“ ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªé¡¶ç‚¹å¦‚ä½•ä»æ¨¡å‹ç©ºé—´æœ€ç»ˆè½¬æ¢åˆ°å±å¹•ç©ºé—´çš„å…¨è¿‡ç¨‹. é¡¶ç‚¹ç€è‰²å™¨çš„æœ€åŸºæœ¬çš„ä»»åŠ¡æ˜¯æŠŠé¡¶ç‚¹åæ ‡ä»æ¨¡å‹ç©ºé—´è½¬æ¢åˆ°å‰ªè£ç©ºé—´ä¸­.è¿™å¯¹åº”äº†ä¸Šå›¾ä¸­çš„å‰ä¸‰ä¸ªé¡¶ç‚¹å˜æ¢è¿‡ç¨‹.è€Œåœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­,æˆ‘ä»¬é€šå¸¸ä¹Ÿå¯ä»¥å¾—åˆ°è¯¥ç‰‡å…ƒåœ¨å±å¹•ç©ºé—´çš„åƒç´ ä¿¡æ¯.æˆ‘ä»¬ä¼šåœ¨4.9.3èŠ‚ä¸­çœ‹åˆ°å¦‚ä½•å¾—åˆ°è¿™äº›åƒç´ ä½ç½®. åœ¨Unityä¸­,åæ ‡ç³»çš„æ—‹å‘æ€§ä¹Ÿéšç€å‘ç”Ÿäº†æ”¹å˜. åªæœ‰åœ¨è§‚å¯Ÿç©ºé—´ä½¿ç”¨äº†å³æ‰‹åæ ‡ç³». éœ€è¦æ³¨æ„çš„æ˜¯,è¿™é‡Œä»…ä»…ç»™å‡ºçš„æ˜¯ä¸€äº›æœ€é‡è¦çš„åæ ‡ç©ºé—´.è¿˜æœ‰ä¸€äº›ç©ºé—´åœ¨å®é™…å¼€å‘ä¸­ä¹Ÿä¼šé‡åˆ°,å¦‚åˆ‡çº¿ç©ºé—´(tangent space).åˆ‡çº¿ç©ºé—´é€šå¸¸ç”¨äºæ³•çº¿æ˜ å°„. Â§ æ³•çº¿å˜æ¢ æ³•çº¿(normal),ä¹Ÿè¢«ç§°ä¸ºæ³•çŸ¢é‡(normal vector). åœ¨æ¸¸æˆä¸­,æ¨¡å‹çš„ä¸€ä¸ªé¡¶ç‚¹å¾€å¾€ä¼šæºå¸¦é¢å¤–çš„ä¿¡æ¯,è€Œé¡¶ç‚¹æ³•çº¿å°±æ˜¯å…¶ä¸­çš„ä¸€ç§ä¿¡æ¯. å½“æˆ‘ä»¬å˜æ¢ä¸€ä¸ªæ¨¡å‹çš„æ—¶å€™,ä¸ä»…è¦å˜æ¢å®ƒçš„é¡¶ç‚¹,è¿˜éœ€è¦å˜æ¢å®ƒçš„æ³•çº¿,ä»¥ä¾¿åœ¨åç»­çš„å¤„ç†(å¦‚ç‰‡å…ƒç€è‰²å™¨)ä¸­è®¡ç®—å…‰ç…§ç­‰. ç›å¾·è¿™å—æ•°å­¦å…¬å¼å¤ªå¤šäº†mdä¸è¦è¡¨è¾¾,åæ­£æœ¬æ¥çš„è¿™å—å†…å®¹å°±æ²¡å¤šå°‘å»ä¹¦ä¸Šçœ‹å§. Â§ Unity Shaderçš„å†…ç½®å˜é‡(æ•°å­¦ç¯‡) Â§ å˜æ¢çŸ©é˜µ è¿™é‡Œæ˜¯Unity5.2ç‰ˆæœ¬æä¾›çš„æ‰€æœ‰å†…ç½®å˜æ¢çŸ©é˜µ.æ‰€æœ‰çŸ©é˜µéƒ½æ˜¯float4x4çš„. å˜é‡å æè¿° _Object2World å½“å‰çš„æ¨¡å‹çŸ©é˜µ,ç”¨äºå°†é¡¶ç‚¹/æ–¹å‘çŸ¢é‡ä»æ¨¡å‹ç©ºé—´å˜æ¢åˆ°ä¸–ç•Œç©ºé—´ _World2Object _Object2Worldçš„é€†çŸ©é˜µ.ç”¨äºå°†é¡¶ç‚¹/æ–¹å‘çŸ¢é‡ä»ä¸–ç•Œç©ºé—´å˜æ¢åˆ°æ¨¡å‹ç©ºé—´ UNITY_MATRIX_V å½“å‰çš„è§‚å¯ŸçŸ©é˜µ,ç”¨äºå°†é¡¶ç‚¹/æ–¹å‘çŸ¢é‡ä»ä¸–ç•Œç©ºé—´å˜æ¢åˆ°è§‚å¯Ÿç©ºé—´ UNITY_MATRIX_P å½“å‰çš„æŠ•å½±çŸ©é˜µ,ç”¨äºå°†é¡¶ç‚¹/æ–¹å‘çŸ¢é‡ä»è§‚å¯Ÿç©ºé—´å˜æ¢åˆ°å‰ªè£ç©ºé—´ UNITY_MATRIX_MV å½“å‰çš„æ¨¡å‹çŸ©é˜µÂ·è§‚å¯ŸçŸ©é˜µ,ç”¨äºå°†é¡¶ç‚¹/æ–¹å‘çŸ¢é‡ä»æ¨¡å‹ç©ºé—´å˜æ¢åˆ°è§‚å¯Ÿç©ºé—´ UNITY_MATRIX_VP å½“å‰çš„è§‚å¯ŸçŸ©é˜µÂ·æŠ•å½±çŸ©é˜µ,ç”¨äºå°†é¡¶ç‚¹/æ–¹å‘çŸ¢é‡ä»ä¸–ç•Œç©ºé—´è½¬æ¢åˆ°å‰ªè£ç©ºé—´ UNITY_MATRIX_MVP å½“å‰çš„æ¨¡å‹çŸ©é˜µÂ·è§‚å¯ŸçŸ©é˜µÂ·æŠ•å½±çŸ©é˜µ,ç”¨äºå°†é¡¶ç‚¹/æ–¹å‘çŸ¢é‡ä»æ¨¡å‹ç©ºé—´å˜æ¢åˆ°å‰ªè£ç©ºé—´ UNITY_MATRIX_T_MV UNITY_MATRIX_MVçš„è½¬ç½®çŸ©é˜µ UNITY_MATRIX_IT_MV UNITY_MATRIX_MVçš„é€†è½¬ç½®çŸ©é˜µ,ç”¨äºå°†æ³•çº¿ä»æ¨¡å‹ç©ºé—´å˜æ¢åˆ°ä¸–ç•Œè§‚å¯Ÿç©ºé—´,ä¹Ÿå¯ç”¨äºå¾—åˆ°UNITY_MATRIX_MVçš„é€†çŸ©é˜µ UNITY_MATRIX_T_MVè¿™ä¸ªçŸ©é˜µæ¯”è¾ƒç‰¹æ®Š. å¯¹äºæ­£äº¤çŸ©é˜µæ¥è¯´,å®ƒçš„é€†çŸ©é˜µå°±æ˜¯è½¬ç½®çŸ©é˜µ.å› æ­¤,å¦‚æœUNITY_MATRIX_MVæ˜¯ä¸€ä¸ªæ­£äº¤çŸ©é˜µçš„è¯,é‚£ä¹ˆUNITY_MATRIX_T_MVå°±æ˜¯å®ƒçš„é€†çŸ©é˜µ,ä¹Ÿå°±æ˜¯è¯´,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨UNITY_MATRIX_T_MVå°†é¡¶ç‚¹/æ–¹å‘çŸ¢é‡ä»è§‚å¯Ÿç©ºé—´å˜æ¢åˆ°æ¨¡å‹ç©ºé—´ UNITY_MATRIX_IT_MVè¿™ä¸ªçŸ©é˜µä¹Ÿè¦ç‰¹æ®Šè¯´æ˜ä¸€ä¸‹. æ³•çº¿çš„å˜æ¢éœ€è¦ä½¿ç”¨åŸå˜æ¢çŸ©é˜µçš„é€†è½¬çŸ©é˜µ,å› æ­¤UNITY_MATRIX_IT_MVå¯ä»¥æŠŠå‘ç°ä»æ¨¡å‹ç©ºé—´å˜æ¢åˆ°è§‚å¯Ÿè€…ç©ºé—´.è€Œä¸”,åªéœ€è¦å¯¹å®ƒè¿›è¡Œè½¬ç½®,å°±å¯ä»¥å¾—åˆ°UNITY_MATRIX_MVçš„é€†çŸ©é˜µå› æ­¤,ä¸ºäº†æŠŠé¡¶ç‚¹æˆ–æ³•çº¿çŸ¢é‡ä»è§‚å¯Ÿè€…ç©ºé—´å˜æ¢åˆ°æ¨¡å‹ç©ºé—´,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç : 12345// æ–¹æ³•ä¸€: ä½¿ç”¨transposeå‡½æ•°å¯¹UNITY_MATRIX_IT_MVè¿›è¡Œè½¬ç½®,å¾—åˆ°UNITY_MATRIX_MVçš„é€†çŸ©é˜µ,ç„¶åè¿›è¡Œåˆ—çŸ©é˜µä¹˜æ³•,æŠŠè§‚å¯Ÿç©ºé—´ä¸­çš„ç‚¹æˆ–æ–¹å‘çŸ¢é‡å˜æ¢åˆ°æ¨¡å‹ç©ºé—´ä¸­ float4 modelPos = mul(transpose(UNITY_MATRIX_IT_MV), viewPos);// æ–¹æ³•äºŒ: ä¸ç›´æ¥ä½¿ç”¨è½¬ç½®å‡½æ•°transpose, è€Œæ˜¯äº¤æ¢mulå‚æ•°çš„ä½ç½®,ä½¿ç”¨è¡ŒçŸ©é˜µä¹˜æ³•. æœ¬è´¨æ˜¯ä¸€æ ·çš„.float4 modelPos = mul(viewPos, UNITY_MATRIX_IT_MV); Â§ æ‘„åƒæœºå’Œå±å¹•å‚æ•° Unityæä¾›äº†ä¸€äº›å†…ç½®å˜é‡æ¥è®©æˆ‘ä»¬è®¿é—®å½“å‰æ­£åœ¨æ¸²æŸ“çš„æ‘„åƒæœºçš„å‚æ•°ä¿¡æ¯.è¿™äº›å‚æ•°å¯¹åº”äº†æ‘„åƒæœºä¸Šçš„Cameraç»„ä»¶ä¸­çš„å±æ€§å€¼. å˜é‡å ç±»å‹ æè¿° _WorldSpaceCameraPos float3 è¯¥æ‘„åƒæœºåœ¨ä¸–ç•Œç©ºé—´ä¸­çš„ä½ç½® _ProjectionParams float4 x = 1.0(æˆ–-1.0, å¦‚æœæ­£åœ¨ä½¿ç”¨ä¸€ä¸ªç¿»è½¬çš„æŠ•å½±çŸ©é˜µè¿›è¡Œæ¸²æŸ“), y = Near, z = Far, w = 1.0 + 1.0/Far _ScreenParams float4 x = wodth, y = height, z = 1.0 + 1.0/width, w = 1.0 + 1.0/height _ZBufferParams float4 x = 1 - Far/Near, y = Far/Near, z = x/Far, w = y/Far, è¯¥å˜é‡ç”¨äºçº¿æ€§åŒ–Zç¼“å­˜ä¸­çš„æ·±åº¦å€¼(å¯å‚è€ƒ13.1èŠ‚) unity_OrthoParams float4 x = width, y = height,zæ²¡æœ‰å®šä¹‰,w = 1.0(è¯¥æ‘„åƒæœºæ˜¯æ­£äº¤æ‘„åƒæœº),æˆ–w = 0.0(è¯¥æ‘„åƒæœºæ˜¯é€è§†æ‘„åƒæœº) unity_CameraProjectio float4x4 è¯¥æ‘„åƒæœºçš„æŠ•å½±çŸ©é˜µ unity_CameraInvProjection float4x4 è¯¥æ‘„åƒæœºçš„æŠ•å½±çŸ©é˜µçš„é€†çŸ©é˜µ unity_CameraWorldClipPlanes[6] float4 è¯¥æ‘„åƒæœºçš„6ä¸ªè£å‰ªå¹³é¢åœ¨ä¸–ç•Œç©ºé—´ä¸‹æ˜¯ç­‰å¼.æŒ‰å¦‚ä¸‹é¡ºåº:å·¦,å³,ä¸‹,ä¸Š,è¿‘,è¿œè£å‰ªå¹³é¢]]></content>
      <categories>
        <category>shader</category>
      </categories>
      <tags>
        <tag>unity</tag>
        <tag>shader</tag>
        <tag>ã€Šshaderå…¥é—¨ç²¾è¦ã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[win10-Insider-Preview]]></title>
    <url>%2Fwin10-Insider-Preview%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[åšå®¢ä¸Šæ”¾ä¸Šlive2d]]></title>
    <url>%2Fblog-live2d%2F</url>
    <content type="text"><![CDATA[å¾ˆä¹…å‰å°±çœ‹åˆ°åœ¨ç½‘ç«™ä¸ŠæŒ‚ä¸ªlive2d,ä¹Ÿæœ‰æƒ³æ³•äº†,ç„¶è€Œä»æ˜¨æ™šæ‰å¼€å§‹æŠ˜è…¾.æƒ³åœ¨åšå®¢ä¸Šæ”¾ä¸ªèˆ°bçš„live2d,ç»“æœè¯•äº†å¥½ä¹…,ç‰ˆæœ¬äºŒåˆ°ç‰ˆæœ¬ä¸‰,ä»æ°‘é—´åˆ°å®˜æ–¹çš„web sdkéƒ½è¯•äº†,å°±æ²¡æœ‰æ”¯æŒèˆ°bçš„live2dçš„T_T æœ€åå¦¥åäº†ä¸‹,é€‰äº†æœ‰å‰è½¦ä¹‹é‰´çš„è¯æ°´åˆ¶ä½œå¸ˆçš„live2d.æœ€å–œæ¬¢ä¹‹å‰æ‹¿çº¢å®çŸ³ä¹°æ¥çš„æ¨±èŠ±æ ¡æœè£…äº†. é˜¿é»‘é¢œpio å‚è€ƒ: çŒ«ä¸å‘æ—¥è‘µçš„åšå®¢ Cubism WebGL SDK]]></content>
      <tags>
        <tag>live2d</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[shaderå­¦ä¹ ]]></title>
    <url>%2Fshader-learning%2F</url>
    <content type="text"><![CDATA[Â§ èµ„æ–™ Shaderç¼–ç¨‹æ•™ç¨‹-è›®ç‰› Unity User Manual Â§ ç¬¬ä¸€è¯¾ å›¾å½¢ç¡¬ä»¶ç®€å²ä¸å¯ç¼–ç¨‹ç®¡çº¿ Â§ è¯¾æ—¶æ€»ç»“ 2003å¹´å¼€å§‹æ­£å¼è¿›å…¥å¯ç¼–ç¨‹GPUé˜¶æ®µ GPUçš„å¹¶è¡Œå¤„ç†èƒ½åŠ›å¼ºäºCPU ç›®å‰GPUæ— æ³•ä»£æ›¿CPU Â§ ç¬¬äºŒè¯¾ shaderå’Œæ¸²æŸ“ç®¡çº¿ GPUå‰æ®µæ¨¡å—-&gt;å›¾æºè£…é…: è¿‡å»åªæœ‰é›†æˆåœ¨ç¡¬ä»¶å½“ä¸­çš„é¡¶ç‚¹ç€è‰²å™¨,ç°åœ¨å¯ç¼–ç¨‹ å…‰æ …åŒ–: æŠŠè®¡ç®—æœºæ˜¾å¡å½“ä¸­è¿ç®—çš„æ•°æ®è¿›è¡Œä¸€ä¸ªç»†åˆ†ç”¨äºé€‚é…å±å¹•ä¸Šå…·ä½“çš„æ¯ä¸€ä¸ªåƒç´ çš„æ˜¾ç¤º åƒç´ è¿ç®—: å…‰æ …åŒ–ä¸ç­‰åŒäºåƒç´ è¿ç®—.åƒç´ è¿ç®—æœ€ç»ˆåæ˜ çš„æ˜¯é¢œè‰²,å…‰æ …åŒ–è¿‡åå¾—åˆ°çš„ç»“æœæ˜¯å¸§ç¼“å­˜.è¿™ä¸ªè¿‡ç¨‹ä¸­å¯ä»¥åŠ å…¥ç‰‡æ®µç€è‰²å™¨. Vertex Processor é¡¶ç‚¹å¤„ç†ç¨‹åº,è¿ç®—çš„ç»“æœå°†ä¼šäº¤ç»™åƒç´ å¤„ç†å™¨ Frame Buffer å¸§ç¼“å†²ä¸­å®¹çº³äº†æ˜¯è®¡ç®—æœºä¾æ¬¡æ˜¾ç¤ºæ‰€è¦ä½¿ç”¨çš„æ•°æ®,ä½†ä¸åªæ˜¯å±å¹•ä¸Šç”¨è¯­æ˜¾ç¤ºçš„é¢œè‰²çš„ä¿¡æ¯,å¯èƒ½è¿˜æœ‰å…¶ä»–çš„é™„åŠ ä¿¡æ¯.æ¯”å¦‚æ·±åº¦å€¼ Transform, TexGen, Lighting Transform æ¨¡å‹çš„ç©ºé—´å˜æ¢(é’ˆå¯¹é¡¶ç‚¹çš„ç©ºé—´å‡ ä½•å˜æ¢) Texture Generator çº¹ç†åæ ‡çš„ç”Ÿæˆ,ä¸»è¦ç”¨äºåœ¨é¡¶ç‚¹å½“ä¸­å–å¾—çº¹ç†åæ ‡,çº¹ç†åæ ‡è½¬åŒ–ä¸ºuvå–å€¼çš„èŒƒå›´ Lighting å…‰ç…§ Vertex Shader æ”¹å˜ä¸Šä¸ªæ¨¡å—çš„å…‰ç…§,å˜æ¢,çº¹ç†ç”Ÿæˆç­‰ Culling Depth Test Culling è£å‰ª.ç‰©ä½“åœ¨é•œå¤´é¢å‰å±•ç¤º,èƒŒå¯¹æ‘„åƒå¤´çš„é¢çœ‹ä¸åˆ°,å¯èƒ½å°±ä¼šè¢«è£å‰ª,ä¸å¤„ç†çœ‹ä¸åˆ°çš„é¢çš„é¡¶ç‚¹æ•°æ®. Depth Test æ·±åº¦æµ‹è¯•.èŒƒå›´è¶…è¿‡æ‘„åƒå¤´æœ€è¿‘æˆ–æœ€è¿œçš„æ¸²æŸ“èŒƒå›´ä¹‹å,ä¹Ÿä¼šè¢«å‰”é™¤ Texturing Fog çº¹ç†é‡‡æ ·.è¿›å…¥å…‰æ …åŒ–é˜¶æ®µ.ä»çº¹ç†å½“ä¸­æ‰¾åˆ°çº¹ç†ä¸­å¯¹åº”çš„ä¸€ä¸ªç‚¹ Fragmen Shader è¿œå¤„çš„ç‰©ä½“å¯èƒ½éœ€è¦é›¾åŒ–å¤„ç†.å¤„äºç‰‡æ®µshaderçš„å¯ç¼–ç¨‹èŒƒå›´ Alpha Test ç»˜åˆ¶åŠé€æ˜æˆ–å…¨é€æ˜ç‰©ä½“ Blending æ··åˆæœ€ç»ˆçš„å›¾åƒ å¯ç¼–ç¨‹èƒ½åŠ›æ˜¯ä¸¤ä¸ªéƒ¨åˆ†,ä¸€éƒ¨åˆ†æ˜¯å˜æ¢å’Œå…‰ç…§,ä½¿ç”¨é¡¶ç‚¹shaderç¼–å†™é¡¶ç‚¹ç€è‰²å™¨ å¦‚ä½•é‡‡æ ·,è®¡ç®—é¢œè‰²ä»¥åŠé›¾åŒ–å¤„ç†ç­‰ç­‰,è¿™éƒ¨åˆ†æ”¾åˆ°ç‰‡æ®µç€è‰²å™¨ unityå½“ä¸­,ä¼˜åŒ–ä¸»è¦éƒ¨åˆ†æ˜¯å‡å°‘æ¸¸æˆè°ƒç”¨gpuæ¸²æŸ“çš„è°ƒåº¦æ¬¡æ•°.CPUæœé›†æ•°æ®,äº§ç”ŸGPUè°ƒåº¦æ•°æ®.è¿™ä¸ªè¿‡ç¨‹æ˜¯æ˜‚è´µçš„. Â§ shaderå’Œæè´¨,è´´å›¾çš„å…³ç³» shaderå®é™…ä¸Šæ˜¯ä¸€å°æ®µç¨‹åº.è´Ÿè´£å°†è¾“å…¥çš„é¡¶ç‚¹æ•°æ®ä»¥æŒ‡å®šçš„æ–¹å¼å’Œè¾“å…¥çš„è´´å›¾æˆ–è€…é¢œè‰²ç»„åˆèµ·æ¥ç„¶åè¾“å‡º. ç»˜å›¾å•å…ƒå¯ä»¥ä¾æ®è¿™ä¸ªè¾“å‡ºå°†å›¾åƒç»˜åˆ¶åˆ°å±å¹•ä¸Š. è¾“å…¥çš„è´´å›¾æˆ–è€…é¢œè‰²ç­‰,åŠ ä¸Šå¯¹åº”çš„shader,ä»¥åŠå¯¹shader]dç‰¹å®šçš„å‚æ•°è®¾ç½®,å°†è¿™äº›å†…å®¹(shaderåŠè¾“å…¥å‚æ•°)æ‰“åŒ…å­˜å‚¨åœ¨ä¸€èµ·.å¾—åˆ°çš„å°±æ˜¯ä¸€ä¸ªMaterial(æè´¨).ä¹‹åæˆ‘ä»¬ä¾¿å¯ä»¥å°†æè´¨èµ‹äºˆä¸‰ç»´ç‰©ä½“æ¥æ¸²æŸ“(è¾“å‡º)äº†. æè´¨å¥½æ¯”å¼•æ“æœ€ç»ˆçš„å•†å“,shaderæ˜¯ç”Ÿäº§è¿™ç§å•†å“çš„åŠ å·¥æ–¹æ³•,è€Œè´´å›¾æ˜¯åŸææ–™. Â§ è¯¾æ—¶æ€»ç»“ Shaderæ˜¯å›¾å½¢å¯ç¼–ç¨‹æ–¹æ¡ˆçš„ç¨‹åºç‰‡æ®µ æ¸²æŸ“ç®¡çº¿æ˜¯ä¸€ç§è®¡ç®—æœºä»æ•°æ®åˆ°æœ€ç»ˆå›¾å½¢æˆåƒçš„å½¢è±¡æè¿° æè´¨æ˜¯å•†å“,shaderæ˜¯æ–¹æ³•,è´´å›¾æ˜¯ææ–™ Â§ ç¬¬ä¸‰è¯¾ shaderçš„ä¸‰å¤§ä¸»æµé«˜çº§ç¼–ç¨‹è¯­è¨€ HLSL åŸºäºDirectXçš„High Level Shading Language GLSL åŸºäºOpenGLçš„OpenGL Shading Language CG NVIDIAå…¬å¸çš„C for Graphic Â§ ç¬¬å››è¯¾ Unity Shaderçš„ç»„ç»‡å½¢å¼ surface shader unityæ¨èå’Œé¼“åŠ±çš„shader.å›¾å½¢ç®¡çº¿èƒ½å¤Ÿç”¨äºè¯†åˆ«çš„,å°±æ˜¯vertex and fragment shader.surface shaderæ˜¯å¯¹vertex and fragment shaderçš„ä¸€ç§åŒ…è£….unityæœ€ç»ˆä¼šæŠŠsurface shaderç¼–è¯‘æˆèƒ½è¢«ç¡¬ä»¶è¯†åˆ«å’Œè°ƒç”¨çš„vertex and fragment shader vertex and fragment shader fixed function shaders å›ºå®šç®¡çº¿çš„shader. Â§ Shaderlab è¯­æ³•åŸºæœ¬ç»“æ„ 12345678910111213141516Shader &quot;MyShader&quot; &#123; Properties &#123; _MyTexture (&quot;My Texture&quot;, 2D) = &quot;white&quot; &#123; &#125; // place other properties here, such as colors or vectors. &#125; SubShader &#123; // place the shader code here for your: // - surface shader, // - vertex and program shader, or // - fixed function shader &#125; SubShader &#123; // a simpler version of the subshader above goes here. // this version is for supporting older graphics cards. &#125;&#125; Â§ unityè‡ªå¸¦shader Unlit ä¸å‘å…‰ VertexLit é¡¶ç‚¹å…‰ç…§ Diffuse æ¼«åå°„.ä¸ä»…ä»…åœ¨é¡¶ç‚¹ä¸Šè¿›è¡Œå…‰ç…§è®¡ç®—,åœ¨ç‰‡æ®µä¸Šè¿›è¡Œå…‰ç…§è®¡ç®— Normal Mapped æ³•çº¿è´´å›¾.ç”¨çš„æ¯”è¾ƒå¤š.é€šè¿‡ä¸€å¼ è´´å›¾è¿›è¡Œé‡‡æ ·.è´´å›¾æ˜¯å…³äºæ³•å‘é‡å­˜å‚¨çš„è´´å›¾.æŠŠè¿™å¼ å›¾é‡‡æ ·å‡ºçš„æ•°æ®ä½œä¸ºæ³•å‘é‡å†è¿›è¡Œå…‰ç…§è®¡ç®—.ä¸»è¦ç›®çš„æ˜¯å½“å‡ ä½•æ¨¡å‹é¢ç‰‡æ•°é‡,é¡¶ç‚¹æ•°é‡ä¸å¤ªå¤š,ä¸ºè¡¨è¾¾ä¸°å¯Œçš„ç»†èŠ‚. Specular é«˜å…‰.ç»ç’ƒç­‰ Normal Mapped Specular é«˜å…‰æ³•çº¿è´´å›¾.è¾ƒæ˜‚è´µ Parallax Normal mapped è§†å·®æ³•çº¿è´´å›¾ Parallax Normal mapped Specular é«˜å…‰è§†å·®æ³•çº¿è´´å›¾ Â§ Fixed function shader å›ºå®šåŠŸèƒ½çš„shader.åŠŸèƒ½æœ‰é™ä½†æ˜¯æ€§èƒ½å¾ˆå¥½ Â§ Surface Shader Surface Shaderæ— éœ€ç¼–å†™passé€šé“]]></content>
      <categories>
        <category>ä½œåºŸå½’æ¡£</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¤ç›®å‹äººå¸è§‚å½±]]></title>
    <url>%2Fnazume-film%2F</url>
    <content type="text"><![CDATA[å¬è¯´åˆ°å®¹è‰æä¸ç®¡å¥½äº‹è¿˜æ˜¯åäº‹éƒ½è¦å»é‚£ä¸ªç¥ å ‚å‚æ‹œçš„æ—¶å€™,å°±å¿ƒæƒ³ç€é‚£æ˜¯ä¸ªæ ‘æ´,ç»“æœè¿˜çœŸæ˜¯ä¸ªçœŸå®æ ‘æ´233 å‰åŠé‚£ä¸ªç¬¹ç”°æ¼”è®²çš„æ—¶å€™æ”¾çš„BGMå°±æ˜¯é‚£é¦–ç†Ÿæ‚‰çš„ãµã‚‹ã•ã¨ã®åŒ‚ã„,ç›´æ¥æ‰æ³ª å®¹è‰æé˜¿å§¨åœ¨å„¿å­æ­»åçš„å…«å¹´é—´æ²¡æœ‰å¾ˆç—›è‹¦æ˜¯å¾ˆå¥½çš„,ç©—ä¹‹å½±åšå¾—å¥½.çœŸæ­£å¯æ€œçš„æ˜¯ç©—ä¹‹å½±å•Šè‰. çœ‹ä¹‹å‰çš„å‰§æƒ…ä»¥ä¸ºåå–å¯¹å¤ç›®å›¾è°‹ä¸è½¨æ¥ç€,è¿™æ¬¡çœ‹åå–çš„å¿ƒç†æ´»åŠ¨,è¿˜æ˜¯ä¸ªå¥½äºº.]]></content>
      <categories>
        <category>åŠ¨æ¼«</category>
      </categories>
      <tags>
        <tag>åŠ¨æ¼«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å­¦ä¹ unity]]></title>
    <url>%2Funity-learning%2F</url>
    <content type="text"><![CDATA[unityå®˜æ–¹æ•™ç¨‹https://unity3d.com/cn/learn/tutorials ç°åœ¨åœ¨çœ‹ä¸€ä¸ªbeaginingæ•™ç¨‹roll a ball Â§ materialåˆæ¢ æ–°å»ºmaterial,é€‰æ‹©é¢œè‰²å,å°†materialæ‹–åˆ°gameObjectä¸Š,gameObjectå°±ä¼šå˜æˆå¯¹åº”çš„é¢œè‰² Â§ Updateæ–¹æ³• Â§ Updateæ–¹æ³• Updateæ–¹æ³•åœ¨æ¸²æŸ“æ¯å¸§å‰è¢«è°ƒç”¨ Â§ FixedUpdate FixedUpdateæ–¹æ³•åªæœ‰åœ¨æ‰§è¡Œæœ‰å…³ç‰©ç†è®¡ç®—ä¹‹å‰æ‰è¢«è°ƒç”¨ Â§ LateUpdate LateUpdateæ–¹æ³•åœ¨æ‰€æœ‰Updateæ–¹æ³•æ‰§è¡Œå®Œæ‰§è¡Œå®Œä¹‹åæ‰§è¡Œ Â§ é™æ€å’ŒåŠ¨æ€GameObject Â§ é™æ€ç¢°æ’ä½“ unityä¼šè®¡ç®—åœºæ™¯å†…æ‰€æœ‰é™æ€ç¢°æ’ä½“çš„ä½“ç§¯,å¹¶å°†ä¿¡æ¯ä¿å­˜åœ¨ç¼“å­˜å†….å› ä¸ºé™æ€ç¢°æ’ä½“ä¸éœ€è¦ç§»åŠ¨,å¯ä»¥é¿å…æ¯å¸§é‡æ–°è®¡ç®—è¿™äº›ä¿¡æ¯,æ‰€ä»¥è¿™æ˜¯å¯¹çš„ æ¯å½“é™æ€ç¢°æ’ä½“ç§»åŠ¨ æ—‹è½¬æˆ–ç¼©æ”¾æ—¶,unityä¼šé‡æ–°è®¡ç®—è¿™äº›é™æ€ç¢°æ’ä½“,ç„¶åæ›´æ–°é™æ€ç¢°æ’ä½“çš„ç¼“å­˜æ•°æ® Â§ åŠ¨æ€ç¢°æ’ä½“ é‡æ–°è®¡ç®—ç¼“å­˜ä¼šè€—è´¹ç³»ç»Ÿèµ„æº,ä½†æˆ‘ä»¬å¯ä»¥éšæ„ç§»åŠ¨ç§»åŠ¨,æ—‹è½¬æˆ–ç¼©æ”¾åŠ¨æ€ç¢°æ’ä½“,è€Œä¸”unityä¸ä¼šç¼“å­˜ä»–ä»¬çš„æ•°æ®.unityä¼šé¢„æµ‹åŠ¨æ€ç¢°æ’ä½“çš„ç§»åŠ¨,æ‰€ä»¥åœ¨ç§»åŠ¨ç¢°æ’ä½“ä¹‹å‰,éœ€è¦å‘Šè¯‰unityå®ƒä»¬æ˜¯åŠ¨æ€çš„.å¯ä»¥ä½¿ç”¨åˆšä½“ç»„ä»¶æ¥å®ç°è¿™ç§æ•ˆæœ. ä»»ä½•å¸¦æœ‰ç¢°æ’ä½“å’Œåˆšä½“ç»„ä»¶çš„GameObjectéƒ½ä¼šè¢«è®¤ä¸ºæ˜¯åŠ¨æ€çš„.ä»»ä½•å¸¦æœ‰ç¢°æ’ä½“å´æ²¡æœ‰åˆšä½“ç»„ä»¶çš„GameObjectåˆ™è¢«è§†ä¸ºæ˜¯é™æ€çš„. åˆšä½“é€‰ä¸­&quot;Is Kinematic&quot;å¯ä»¥å°†åˆšä½“å˜æˆä»…å—è„šæœ¬æ§åˆ¶çš„åˆšä½“.kinematicåˆšä½“ä¸å—æ— åŠ›ä½œç”¨åŠ›çš„å½±å“,ä½†å¯ä»¥æ’­æ”¾åŠ¨ç”»æˆ–é€šè¿‡Transformç»„ä»¶ç§»åŠ¨ Â§ å‡ ä½•å›¾å…ƒç»˜åˆ¶é¡ºåº Â§ Sorting Layer Sorting Layeråºå·è¶Šå¤§çš„å±‚è¶Šåç»˜åˆ¶,å› è€Œä¼šè¦†ç›–æ‰å‰é¢åºå·å°çš„å±‚ä¸Šçš„å‡ ä½•å›¾å…ƒ è¡¨ç¤ºæŒ‡å®šå±‚åœ¨Tags and Layersè§†å›¾Sorting Layersä¸­çš„é¡ºåº å„å±‚çš„ç»˜åˆ¶é¡ºåºæ˜¯Default -&gt; Background -&gt; Character -&gt; Foreground -&gt; UI Â§ Order in layer åœ¨åŒä¸€å±‚è°ƒæ•´å‡ ä½•å›¾å…ƒçš„ç»˜åˆ¶æ·±åº¦.åŒæ ·æ˜¯åºå·å¤§çš„è¦†ç›–åºå·å°çš„ spirit Renderç»„ä»¶ä¸­SortingLayerå±æ€§æ§åˆ¶çš„æ˜¯ä¸åŒå±‚ä¹‹é—´çš„ç»˜åˆ¶é¡ºåº,è€ŒOrder in Layeræ§åˆ¶çš„æ˜¯åŒå±‚ä¸­ç‰©ä½“çš„ç»˜åˆ¶é¡ºåº Â§ spine å¯ç®—çŸ¥é“ç“œæ¸¸çš„å°äººéƒ½æ˜¯ä»€ä¹ˆäº† ä¸€å¼€å§‹ä¸‹çš„spine3.7,ç„¶å äºæ˜¯åˆä¸‹äº†3.6. å¸è½½æ—§ç‰ˆæœ¬æ’ä»¶å¥½åƒæ˜¯ç›´æ¥åœ¨projecté‡ŒæŠŠå¯¹åº”çš„åˆ æ‰ ç›®åŠ›ä¿¾æ–¯éº¦ è›®å¥½ç©çš„ Â§ U!P!D!A!T!E! å†™unityç¨‹åºè·Ÿå¹³å¸¸å†™å…¶ä»–ç¨‹åºä¸€ä¸ªå¾ˆä¸ä¸€æ ·çš„æ€æƒ³å°±æ˜¯unityçš„æ¯å¸§éƒ½ä¼šæ‰§è¡Œçš„update. å¹³æ—¶å†™ç¨‹åºå¦‚æœé‡åˆ°æ—¶é—´ç›¸å…³çš„,å°±è¦è€ƒè™‘sleep,ç„¶åå°±è¦è€ƒè™‘é˜»å¡,è€ƒè™‘åç¨‹æˆ–å¤šçº¿ç¨‹. è€Œunityä¸ä¸€æ ·.åˆ©ç”¨unityçš„updateæœºåˆ¶å¯ä»¥å¾ˆè½»æ˜“çš„ç®¡ç†æ—¶é—´.]]></content>
      <categories>
        <category>ä½œåºŸå½’æ¡£</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[é¢è¯•ç¬”è®°]]></title>
    <url>%2Fnote-interview%2F</url>
    <content type="text"><![CDATA[ä½è¿ç®—å¯ä»¥èŠ‚çº¦ä¼ è¾“å’Œå‚¨å­˜çš„ç©ºé—´ unityï¼Œc#ï¼Œluaï¼Œopenglï¼Œæ¸²æŸ“]]></content>
  </entry>
  <entry>
    <title><![CDATA[åŠ äº†å‡ ä¸ªéŸ³ä¹æ”¶è—å¤¹]]></title>
    <url>%2FmusicFavorites%2F</url>
    <content type="text"><![CDATA[æƒ³ç€ç»™æŠŠæœ€å–œæ¬¢,æœ€å¸¸å¬çš„å‡ é¦–æ­ŒæŒ‰é£æ ¼åˆ†ç±»,é€ äº†è¿™ä¹ˆå‡ ä¸ªæ­Œå• æ²»æ„ˆ çˆ± é™è°§ æœæ°”è“¬å‹ƒ ä¼˜ç¾å¿§ä¼¤ Â§ å¯¹è¿™äº›æ­Œå†™ç‚¹ä¸œè¥¿ Â§ æ²»æ„ˆ Â§ urar å¾ˆç¾å¥½. Â§ è´è¶æ³‰è¾¹ åŒæ ·å¾ˆç¾å¥½å¾ˆæ¸©é¦¨,æ›´åŠ äº†ç‚¹å›å¿†çš„æ„Ÿè§‰ Â§ Growing! å°±æ˜¯è®©äººæ’’å¨‡çš„æ­Œ Â§ çˆ± Â§ Letter åŠ¨ç”»HandShakerçš„BGMä¸­å¬åˆ°çš„. å‰é¢ä¸€æ®µä»£è¡¨ä¹¦ä¿¡çš„å¸¸è§„å†…å®¹,åé¢æ·±æ·±çš„æ„Ÿæƒ…å–·æ¶Œè€Œå‡º. ä¸åƒå°æƒ…ä¾£ä¹‹é—´çš„çˆ±,åƒæ˜¯è€å¤«è€å¦»æˆ–è€…äº²æƒ…çš„çˆ± è¿™å°Letterä¸åƒæƒ…ä¹¦è€Œæ˜¯åƒå®¶ä¹¦ Â§ LuvLetter æƒ…ä¹¦. å†™æƒ…ä¹¦å’Œçº ç»“è¦ä¸è¦å°†æƒ…ä¹¦é€å‡ºå»çš„è¿‡ç¨‹,ç†è§£çš„æ˜¯çº ç»“ç€å¾ˆç—›è‹¦ç„¶åæ²¡èƒ½é€å‡ºå». ä¸­é—´æœ‰çº ç»“çš„ç—›è‹¦,ä¹Ÿæœ‰æƒ³è±¡çš„ç¾å¥½ç»“å±€. Â§ æ‹ æ—¥æ¨ç»™æˆ‘çš„,é«˜æ½®éƒ¨åˆ†å¾ˆå¥½å¬ Â§ æ„›å”„ å½“åˆçœ‹ä¸€ä¸ªé«˜æœ¨åŒå­¦çš„AMVæ³¨æ„åˆ°çš„,å¾ˆçœŸæƒ…å®æ„Ÿ Â§ å°å°æ‹æ­Œ åŒæ ·æ˜¯é«˜æœ¨åŒå­¦edæ”¶å½•çš„ å½“åˆè§‰å¾—é«˜æ¡¥æä¾ç‰ˆæœ¬çš„å¥½å¬,æ¯”è¾ƒç”œç¾æ¥ç€,åæ¥è¿˜æ˜¯è§‰å¾—æ–°å£ç»“è¡£å”±çš„å¥½å¬,æå¸¦æ²™å“‘ç‚¹çš„å£°éŸ³å¾ˆæ¸©æŸ”å¾ˆçŸ¥æ€§ Â§ ã•ã‚ˆãªã‚‰ã®å¤ å•Š Â§ é™è°§ Â§ Mountain stream é«˜ä¸­æ—¶å€™å­¦æ ¡å°±ç»å¸¸æ”¾çš„ Â§ é™½ã ã¾ã‚Šé“ã¨ã‚Œã‚“ã¡ã‚‡ã‚“ æ‚ å“‰æ—¥å¸¸å¤§ç‹çš„BGM Â§ ãµã‚‹ã•ã¨ã®åŒ‚ã„ å¤ç›®å‹äººå¸çš„BGM Â§ æœæ°”è“¬å‹ƒ Â§ RYDEEN æœæ°”è“¬å‹ƒ Â§ ä¼˜ç¾å¿§ä¼¤ Â§ ãŠã†ã¡ã«å¸°ã‚ŠãŸã„ Â§ ã¡ã„ã•ãªå†’é™ºè€… ç´ æ™´çš„ed. Â§ Arriettyâ€™s Song å€Ÿä¸œè¥¿çš„å°äººé˜¿è‰åŸƒè’‚çš„ä¸»é¢˜æ›² Â§ æ˜¥ã‚ˆã€æ¥ã„ çœ‹äº†ä¸€ä¸ªæ½®å­¦è§†é¢‘çŸ¥é“çš„â€¦ç€å®å¾ˆå¥½å¬ Â§ ã“ã®æ„Ÿæƒ…ã¯ä½¿å‘½ islandçš„æ›²å­ Â§ ã•ã‚ˆãªã‚‰ã®å¤ å•Š]]></content>
      <categories>
        <category>æ—¥å¸¸</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[pythonå¤šé‡ç»§æ‰¿initçš„é—®é¢˜]]></title>
    <url>%2Fpython-mult-inherit-init%2F</url>
    <content type="text"><![CDATA[ç»§æ‰¿çš„æ—¶å€™,initçˆ¶ç±»æ—¶,å¹³æ—¶ç”¨ideå†™ä»£ç ä¹ æƒ¯äº†è¿™æ ·å†™,å› ä¸ºæ•²ä¸€ä¸ªsuperå†å›è½¦å°±æœ‰äº†è¿™ä¹ˆä¸€è¡Œ 1super(C, self).__init__() 12345678910111213141516class A: def __init__(self): self.a = "a" class B: def __init__(self): self.b = "b"class C(A,B): def __init__(self): super(C, self).__init__()if __name__ == '__main__': c = C() print(c.__dict__) # &gt;&gt;&gt; &#123;'a': 'a'&#125; å¯ä»¥çœ‹å‡ºé—®é¢˜äº†,Cç±»åªinitäº†Aç±»,å¹¶æ²¡æœ‰init Bç±» ä¸‹é¢æ˜¯æˆ‘çæ‘¸å‡ºæ¥çš„è§£å†³æ–¹æ³• 1234567891011121314151617181920class A: def __init__(self): self.a = "a"class B: def __init__(self): self.b = "b"class C(A, B): def __init__(self): A.__init__(self) B.__init__(self)if __name__ == '__main__': c = C() print(c.__dict__) # &gt;&gt;&gt; &#123;'a': 'a', 'b': 'b'&#125;]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[chromeæ’ä»¶è¸©å‘]]></title>
    <url>%2Fchrome-crx%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[è‡ªåŠ¨ç©ç“œæ¸¸è¿è¿çœ‹çš„è„šæœ¬]]></title>
    <url>%2Fazurlane-llk%2F</url>
    <content type="text"><![CDATA[åšäº†ä¸ªè‡ªåŠ¨ç©è¿è¿çœ‹çš„è„šæœ¬. github : https://github.com/HHHHhgqcdxhg/azurlane-linkup Â§ å›¾ç‰‡æ•´ç† å°†åŸå›¾æ•´ç†æˆä»¥ä¸‹æ ¼å¼ åŸå›¾: æ•´ç†å‡º: 1234567[[ 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.] [ 0. 16. 2. 4. 1. 3. 1. 2. 17. 3. 0.] [ 0. 8. 7. 14. 4. 10. 12. 18. 5. 5. 0.] [ 0. 6. 6. 9. 15. 7. 11. 8. 9. 10. 0.] [ 0. 11. 12. 13. 13. 14. 15. 16. 17. 18. 0.] [ 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.]] #è¿™ä¸ªäºŒç»´æ•°ç»„æ˜¯æŠ½è±¡çš„è¿è¿çœ‹"åœ°å›¾",å°†åŸè¿è¿çœ‹ç›¸åŒçš„å›¾ç‰‡æ¢æˆåŒæ ·çš„æ•°å­—,åœ¨åœ¨å‘¨å›´å¡«å……0è¡¨ç¤ºé€šè·¯ å’Œ 12[[1, 6], [1, 4], [1, 7], [1, 2], [1, 9], [1, 5], [2, 4], [1, 3], [2, 9], [2, 8], [3, 2], [3, 1], [3, 5], [2, 2], [3, 7], [2, 1], [3, 8], [3, 3], [3, 9], [2, 5], [4, 1], [3, 6], [4, 2], [2, 6], [4, 4], [4, 3], [4, 5], [2, 3], [4, 6], [3, 4], [4, 7], [1, 1], [4, 8], [1, 8], [4, 9], [2, 7]]# è¿™ä¸ªæ•°ç»„æ¯ä¸€é¡¹è¡¨ç¤ºä¸€ç»„åæ ‡,å¹¶ä¸”ç¬¬ 2 * i ä¸ªå…ƒç´ ä»£è¡¨çš„å›¾ç‰‡å’Œç¬¬ 2 * i + 1 ä¸ªå…ƒç´ ä»£è¡¨çš„å›¾ç‰‡ç›¸åŒ Â§ æ±‚è§£ Â§ ç®—æ³• å¹¿åº¦ä¼˜å…ˆæš´æœ,æœç´¢æ‰€æœ‰å¯ä»¥åˆ°è¾¾çš„å›¾ç‰‡å—,åˆ¤æ–­ç›®æ ‡æ˜¯å¦åœ¨å…¶ä¸­. ä»£ç åœ¨æºç ä¸­çš„findLineFetchæ–¹æ³•å’ŒpointSearchæ–¹æ³•,æ³¨é‡Šè¿˜å†™çš„è›®è¯¦ç»†çš„,è¿™é‡Œä¸å†è§£é‡Š. Â§ å®è¡Œç‚¹å‡»: è·Ÿä¸Šæ¬¡çš„ç¿»ç‰Œæ¸¸æˆè„šæœ¬å·®ä¸å¤š Â§ ç»“æœ 7.80sè§†é¢‘: av45062991 7.80sç•™äº†è§†é¢‘,æœ‰ä¸€ä¸ª7.27sçš„æ²¡å½•å¥½â€¦ è¿½æ±‚æè‡´çš„è¯åº”è¯¥èƒ½è·‘è¿›7ç§’å†…,è¯´ä¸å®šèƒ½è·‘è¿›6ç§’å†…,æˆ‘åšä¸åˆ°ä¸€å®šæ˜¯å› ä¸ºæˆ‘å¤ªèœäº† Â§ æ—¶é—´æµªè´¹ æˆªå›¾è€—æ—¶ å› ä¸ºå¼€å±€å‰æˆªå›¾ä¼šæœ‰æ•°å­—é®æŒ¡,æ‰€ä»¥ç­‰æ•°å­—æ¶ˆå®Œ,å†è¿›è¡Œæˆªå›¾.å› ä¸ºæœ‰ä¸€äº›IOæ“ä½œ,æ‰€ä»¥å°±å¾ˆæ…¢â€¦ ç®—æ³•è€—æ—¶ å˜›,æˆ‘è¿™ä¸ªç®—æ³•æ˜¯å¹¿åº¦ä¼˜å…ˆæš´æœ,åº”è¯¥æ¯”è¾ƒæ…¢. ç‚¹å‡»é—´éš”ä¸ç»Ÿä¸€ â†‘è¿™ä¸ªå½¢å®¹ä¸æ˜¯å¾ˆå‡†ç¡®.å¥½åƒ,å½“ä¸¤ä¸ªæœ‰æ•ˆçš„ç‚¹è¢«ç‚¹å‡»æ—¶,å¦‚æœè·ç¦»æ¯”è¾ƒè¿‘,ä¸‹æ¬¡å¯ä»¥ç‚¹å‡»çš„æ—¶é—´é—´éš”å°±æ¯”è¾ƒçŸ­,åä¹‹äº¦ç„¶.åªæ˜¯æ¨æµ‹,ä¸å¤ªç¡®å®š.å› ä¸ºè¯•çš„æ—¶å€™,ç»å¸¸å‰é¢å¥½å¤šéƒ½æ²¡äº‹,æœ€åä¸¤ä¸‰ç»„ç‚¹çš„æ—¶å€™å‡ºé”™,æ€€ç–‘æ˜¯æ’åˆ°æœ€åçš„ç»„ä¸€èˆ¬è·ç¦»æ¯”è¾ƒè¿œå¯¼è‡´çš„ç»“æœ.]]></content>
      <tags>
        <tag>ç¢§è“èˆªçº¿</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Plus Ultra!]]></title>
    <url>%2Fbokuhiro-movie%2F</url>
    <content type="text"><![CDATA[]]></content>
      <categories>
        <category>åŠ¨æ¼«</category>
      </categories>
      <tags>
        <tag>åŠ¨æ¼«</tag>
        <tag>æˆ‘çš„è‹±é›„å­¦é™¢</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¢§è“èˆªçº¿ç¿»ç‰Œå°æ¸¸æˆå¤ç°]]></title>
    <url>%2Fblhx-fanpai%2F</url>
    <content type="text"><![CDATA[git repo:https://github.com/HHHHhgqcdxhg/azurlane-fanpai å·²éƒ¨ç½²åœ¨:https://blog.ggemo.com/azurlane-fanpai/dist/index.html ä¸€ä¸‹åˆæ’¸å‡ºæ¥çš„webå¤ç°çš„ç¢§è“èˆªçº¿ç¿»ç‰Œå°æ¸¸æˆ. ä¸€è·¯å†™ä¸‹æ¥æ²¡é‡åˆ°å‘,ä½†ä¹Ÿæ²¡è€ƒè™‘æ€§èƒ½.]]></content>
      <categories>
        <category>ç¢§è“èˆªçº¿</category>
      </categories>
      <tags>
        <tag>ç¢§è“èˆªçº¿</tag>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç©æ¸¸æˆ è¿˜æ„¿]]></title>
    <url>%2Fdevotion%2F</url>
    <content type="text"><![CDATA[çœŸçš„å“äººâ€¦å˜å†™åšå®¢è¾¹ç©å§. Â§ æ¸¸æˆè¿‡ç¨‹ å°å¥³å­©é€è¿‡å¢™æ´çœ‹çˆ¸çˆ¸æ’•å†™çš„å­—â€¦æƒ³äº†æƒ³,ä»¥åå†™ä»£ç é”™åˆ°æ¼ç¾æˆæ€’äº†ä¹Ÿåªæ³¨é‡Šä¸åˆ  å¼¹ç è¿·å®«çœŸæ˜¯ç»äº† è¢«è€å©†è¿½æ€é‚£é‡Œå“åäº†.ç”¨æ‰‹æŒ¡ä½å±å¹•çœ‹ä¸åˆ°ä¸»è¦ç”»é¢,ç„¶åä¸€ç›´éƒ½ä¸çŸ¥é“è¦è½¬å¤´è·‘â€¦å›å¤´ç¿»äº†åˆ«äººçš„è§†é¢‘æ‰çŸ¥é“è¦è·‘â€¦ æ‹”èˆŒå¤´é‚£é‡ŒçœŸå¿ƒä¸æ•¢çœ‹â€¦ä¾æ—§æ‹¿æ‰‹é®å±å¹• Â§ è¯„ä»· ç¬¬ä¸€æ¬¡ç©ææ€–æ¸¸æˆæ¥ç€,å› ä¸ºè·Ÿé£å°±å»ç©äº†,å“å¾—ä¸è½». è¿˜æ˜¯ä¸å–œæ¬¢è¿™ç§,ä¸ºææ€–è€Œææ€–çš„æ¸¸æˆ.é‡Œé¢çš„ä¸€äº›ä»·å€¼è§‚ä¹Ÿä¸è®¤åŒ. Â§ å‡‰å‡‰ 2019å¹´2æœˆ23æ—¥æ›´æ–° è‡ªæ–­è´¢è·¯çš„å‚»é€¼ç©æ„]]></content>
      <categories>
        <category>æ¸¸æˆ</category>
      </categories>
      <tags>
        <tag>æ¸¸æˆ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[win32æŒ‰é”®ç ]]></title>
    <url>%2Fvkcode%2F</url>
    <content type="text"><![CDATA[123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147VK_CODE = &#123; 'backspace': 0x08, 'tab': 0x09, 'clear': 0x0C, 'enter': 0x0D, 'shift': 0x10, 'ctrl': 0x11, 'alt': 0x12, 'pause': 0x13, 'caps_lock': 0x14, 'esc': 0x1B, 'spacebar': 0x20, 'page_up': 0x21, 'page_down': 0x22, 'end': 0x23, 'home': 0x24, 'left_arrow': 0x25, 'up_arrow': 0x26, 'right_arrow': 0x27, 'down_arrow': 0x28, 'select': 0x29, 'print': 0x2A, 'execute': 0x2B, 'print_screen': 0x2C, 'ins': 0x2D, 'del': 0x2E, 'help': 0x2F, '0': 0x30, '1': 0x31, '2': 0x32, '3': 0x33, '4': 0x34, '5': 0x35, '6': 0x36, '7': 0x37, '8': 0x38, '9': 0x39, 'a': 0x41, 'b': 0x42, 'c': 0x43, 'd': 0x44, 'e': 0x45, 'f': 0x46, 'g': 0x47, 'h': 0x48, 'i': 0x49, 'j': 0x4A, 'k': 0x4B, 'l': 0x4C, 'm': 0x4D, 'n': 0x4E, 'o': 0x4F, 'p': 0x50, 'q': 0x51, 'r': 0x52, 's': 0x53, 't': 0x54, 'u': 0x55, 'v': 0x56, 'w': 0x57, 'x': 0x58, 'y': 0x59, 'z': 0x5A, 'numpad_0': 0x60, 'numpad_1': 0x61, 'numpad_2': 0x62, 'numpad_3': 0x63, 'numpad_4': 0x64, 'numpad_5': 0x65, 'numpad_6': 0x66, 'numpad_7': 0x67, 'numpad_8': 0x68, 'numpad_9': 0x69, 'multiply_key': 0x6A, 'add_key': 0x6B, 'separator_key': 0x6C, 'subtract_key': 0x6D, 'decimal_key': 0x6E, 'divide_key': 0x6F, 'F1': 0x70, 'F2': 0x71, 'F3': 0x72, 'F4': 0x73, 'F5': 0x74, 'F6': 0x75, 'F7': 0x76, 'F8': 0x77, 'F9': 0x78, 'F10': 0x79, 'F11': 0x7A, 'F12': 0x7B, 'F13': 0x7C, 'F14': 0x7D, 'F15': 0x7E, 'F16': 0x7F, 'F17': 0x80, 'F18': 0x81, 'F19': 0x82, 'F20': 0x83, 'F21': 0x84, 'F22': 0x85, 'F23': 0x86, 'F24': 0x87, 'num_lock': 0x90, 'scroll_lock': 0x91, 'left_shift': 0xA0, 'right_shift ': 0xA1, 'left_control': 0xA2, 'right_control': 0xA3, 'left_menu': 0xA4, 'right_menu': 0xA5, 'browser_back': 0xA6, 'browser_forward': 0xA7, 'browser_refresh': 0xA8, 'browser_stop': 0xA9, 'browser_search': 0xAA, 'browser_favorites': 0xAB, 'browser_start_and_home': 0xAC, 'volume_mute': 0xAD, 'volume_Down': 0xAE, 'volume_up': 0xAF, 'next_track': 0xB0, 'previous_track': 0xB1, 'stop_media': 0xB2, 'play/pause_media': 0xB3, 'start_mail': 0xB4, 'select_media': 0xB5, 'start_application_1': 0xB6, 'start_application_2': 0xB7, 'attn_key': 0xF6, 'crsel_key': 0xF7, 'exsel_key': 0xF8, 'play_key': 0xFA, 'zoom_key': 0xFB, 'clear_key': 0xFE, '+': 0xBB, ',': 0xBC, '-': 0xBD, '.': 0xBE, '/': 0xBF, ';': 0xBA, '[': 0xDB, '\\': 0xDC, ']': 0xDD, "'": 0xDE, "`": 0xC0&#125; win32æŒ‰é”®ç .ç•™ç€ä¸€ä»½çœç€æ¯æ¬¡å†æ‰¾äº†]]></content>
      <categories>
        <category>æ‚</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¢§è“èˆªçº¿ç¿»ç‰Œæ¸¸æˆè„šæœ¬]]></title>
    <url>%2Fblhx-fanpai4-45%2F</url>
    <content type="text"><![CDATA[åŒ¹é…ç›¸åŒçš„ç‰Œæ—¶æ˜¯è£ä¸‹æ¯å¼ ç‰Œå,ç›´æ¥å¯¹æ¯”æ¯å¼ å›¾ç‰‡çš„æ•°ç»„æ˜¯å¦ç›¸åŒ ç¿»ç‰Œçš„æ—¶å€™æƒ³è¦åŒæ—¶ç‚¹ä¸¤å¼ ç‰Œ,ä½†æ˜¯æŸ¥äº†ä¸‹adbå¥½åƒæ²¡æœ‰æ”¯æŒmult touch,ç„¶åæƒ³åˆ°åœ¨æ¨¡æ‹Ÿå™¨ä¸Šç»™æ¯ä¸ªç‰Œçš„ä½ç½®è®¾ç½®å¿«æ·é”®,ç¿»ç‰Œçš„æ—¶å€™è°ƒç”¨win32apiç‚¹å‡»å¯¹åº”çš„å¿«æ·é”®æ¥ç¿»ç‰Œ. æœ€ç»ˆæˆç»©4.45ç§’.bç«™è§†é¢‘:https://www.bilibili.com/video/av44287472/ ä¸‹é¢æ˜¯å®Œæ•´ä»£ç .å…¶ä¸­vkcode.VK_CODEæ˜¯win32æŒ‰é”®ç æ˜ å°„è¡¨,åœ¨è¿™ç¯‡åšå®¢æœ‰ 82~89è¡Œé‚£äº›å‡ ä¸ªsleepçš„å‚æ•°æ˜¯è¯•å‡ºæ¥çš„,å†å°å°±å®¹æ˜“å‡ºé”™äº† 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293#! /usr/bin/env python# -*- coding: utf-8 -*-import timeimport osimport cv2import numpy as npimport win32apiimport win32confrom vkcode import VK_CODEclass Blhx: def __init__(self, adbPATH, sharedPATH): self.adb = adbPATH self.sharedPATH = sharedPATH def getScreen(self, filePath="/sdcard/Pictures/tmp.png"): os.system(f"&#123;self.adb&#125; -e shell screencap -p &#123;filePath&#125;") time.sleep(0.5) return cv2.imread(f"&#123;self.sharedPATH&#125;\\tmp.png") def tap(self, X, Y): os.system(f"&#123;self.adb&#125; -e shell input tap &#123;X&#125; &#123;Y&#125;") def cutEvery(self, img): ims = [] matched = [] for y in range(3): for x in range(6): startX = 148 * x + 238 startY = 162 * y + 179 endX = startX + 90 endY = startY + 129 im = img[startY:endY, startX:endX, :] thisImInfo = (y, x, im) hasmatch = False for i, imgInfo in enumerate(ims): difference = cv2.subtract(im, imgInfo[2]) result = not np.any(difference) if result: hasmatch = True matched.append(imgInfo[:2]) matched.append(thisImInfo[:2]) del ims[i] continue if not hasmatch: ims.append(thisImInfo) return matchedkeyboardsMap = [ "QWERTY".lower(), "ASDFGH".lower(), "ZXCVBN".lower()]def mian(): blhx = Blhx(r"E:\programfiles\adb\adb.exe", "J:\ldmnqshare") blhx.tap(800, 485) time.sleep(1.1) print("jietu") im = blhx.getScreen() pos = blhx.cutEvery(im) ks = [] for i, p in enumerate(pos): k = keyboardsMap[p[0]][p[1]] ks.append(k) kl = ks.__len__() if not kl == 18: print("æ²¡åŒ¹é…å¥½") return time.sleep(1) for x in range(9): k0 = 2 * x k1 = k0 + 1 kNode0 = ks[k0] kNode1 = ks[k1] win32api.keybd_event(VK_CODE[kNode0], 0, 0, 0) time.sleep(0.04) win32api.keybd_event(VK_CODE[kNode1], 0, 0, 0) time.sleep(0.04) win32api.keybd_event(VK_CODE[kNode0], 0, win32con.KEYEVENTF_KEYUP, 0) time.sleep(0.04) win32api.keybd_event(VK_CODE[kNode1], 0, win32con.KEYEVENTF_KEYUP, 0) print("tap") time.sleep(0.375)if __name__ == '__main__': mian()]]></content>
      <categories>
        <category>ç¢§è“èˆªçº¿</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>ç¢§è“èˆªçº¿</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Cuclasses]]></title>
    <url>%2FCuclasses%2F</url>
    <content type="text"><![CDATA[Â§ ä»‹ç» Cuclassesæ˜¯æˆ‘æ­£åœ¨å†™çš„pythonåº“,å†…å®¹æ˜¯é›†åˆäº†ä¸€äº›å¸¸ç”¨çš„ç±»å’Œæ–¹æ³• Â§ é¡¹ç›®åœ°å€ pypi(å°‘æœ‰æ›´æ–°):https://pypi.org/project/cuclasses/ github:https://github.com/HHHHhgqcdxhg/cuclasses Â§ æ¨¡å— Â§ cuclasses.DottableDict é¡¾åæ€ä¹‰,èƒ½ç”¨ â€œ.â€ è®¿é—®çš„dict.å› ä¸ºå–œæ¬¢jsè®¿é—®å¯¹è±¡å±æ€§çš„æ–¹å¼,å¯ä»¥ç”¨ä¸‹æ ‡,ä¹Ÿå¯ä»¥ç”¨ç‚¹. Â§ cuclasses.singleton è£…é¥°å™¨. è¢«è£…é¥°çš„ç±»ä¸ºå•ä¾‹æ¨¡å¼ Â§ cuclasses.CallableDict å¯ä»¥è°ƒç”¨çš„dict,è°ƒç”¨æ—¶è¿”å›è‡ªèº«. Â§ cuclasses.StrKeyDict åœ¨æŸ¥è¯¢æ—¶æŠŠéå­—ç¬¦ä¸²é”®è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„dict Â§ cuclasses.headerCopy2Dict å› ä¸ºåœ¨å¤åˆ¶chromeå¼€å‘è€…å·¥å…·networké‡Œè¯·æ±‚çš„headeræ—¶å¾ˆä¸æ–¹ä¾¿,å°±å¼„äº†è¿™ä¸ªâ€¦æŠŠchromeé‡Œçš„headerså¤åˆ¶è¿›å»,ä¼šè½¬æ¢æˆå­—å…¸ 123456789101112headerStr = """Accept: application/json, text/plain, */*Accept-Encoding: gzip, deflate, brAccept-Language: zh-CN,zh;q=0.9Connection: keep-aliveCookie: l=v; buvid3=08DBF55E-086D-4BE2-9FCB-4B60BFA5F05A140254infocHost: message.bilibili.comOrigin: https://www.bilibili.comReferer: https://www.bilibili.com/video/av9912938/?p=11User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36"""a = headerCopy2Dict(headerStr)print(a)#&gt;&gt;&gt; &#123;'Accept': 'application/json, text/plain, */*', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'zh-CN,zh;q=0.9', 'Connection': 'keep-alive', 'Host': 'message.bilibili.com', 'Origin': 'https://www.bilibili.com', 'Referer': 'https://www.bilibili.com/video/av9912938/?p=11', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36'&#125; Â§ cuclasses.timePrint ä¸Šä¸‹æ–‡ç®¡ç†å™¨. å¸¦æ—¶é—´æˆ³çš„print.éšæ—¶å¯æŒ‡å®šæ—¶é—´æ ¼å¼ 12345678910111213141516with timePrint() as print: print(0) # &gt;&gt;&gt; [2019-02-10 16:23:35] 0 print(1, strf="[%Y-%m-%d %H:%M:%S]1") # &gt;&gt;&gt; [2019-02-10 16:23:35]1 1with timePrint("[%Y-%m-%d %H:%M:%S]2") as print: print(2) # &gt;&gt;&gt; [2019-02-10 16:23:35]2 2 print(3, strf="[%Y-%m-%d %H:%M:%S]3") # &gt;&gt;&gt; [2019-02-10 16:23:35]3 3print(4)# &gt;&gt;&gt; 4 Â§ cuclasses.timeCount è£…é¥°å™¨.æ¥å—ä¸¤ä¸ªå‚æ•°. è¢«è£…é¥°çš„å‡½æ•°å°†åœ¨æ‰§è¡Œåæ‰“å°æ‰§è¡Œæ—¶é—´ 12:param enable: è®¾ä¸ºFalseåˆ™ä¸è®¡æ—¶,ç›´æ¥æ‰§è¡Œå‡½æ•°:param method: å¯é€‰æ‹©çš„è®¡æ—¶æ‰€ç”¨çš„è·å–æ—¶é—´çš„å‡½æ•°.é»˜è®¤time.perf_counter,æˆ–è€…ä¹Ÿå¯ä»¥é€‰å¡«time.time,python3.7å¯ä»¥æŒ‰éœ€é€‰ç”¨time.perf_counter_ns 1234567@timeCount()def bar(): print(&#123;"a": "c"&#125;)bar()#&gt;&gt;&gt; &#123;'a': 'c'&#125;#&gt;&gt;&gt; func bar excuted in : 6.044444444444444e-05 Â§ cuclasses.Downloader ä¸‹è½½å™¨. 1234:param directory:ä¸‹è½½åˆ°çš„ç›®å½•:param urls:éœ€è¦ä¸‹è½½çš„èµ„æºç›®å½•:param threads:å¹¶è¡Œä¸‹è½½çš„çº¿ç¨‹æ•°:param headers:è¯·æ±‚å¤´,é»˜è®¤ä¸º&#123;&quot;user-agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36&quot;&#125; with open("xx.json","r") as f: data = json.load(f) d = Downloader(directory=r"E:\ACG\comic\general\ã©ã†ã—ã¦ç§ãŒç¾è¡“ç§‘ã«",urls=data) d.downloadAll()]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æœ¬ç«™çš„æ­å»º]]></title>
    <url>%2Fbuild-blog%2F</url>
    <content type="text"><![CDATA[Â§ ä¾èµ– æœ¬åšå®¢åŸºäºHexoç”Ÿæˆ,é€‰ç”¨Next.Mixinsä½œä¸ºä¸»é¢˜ Â§ æ­£æ–‡ Â§ ä¸»é¢˜ ä¸æ˜¯å¾ˆå–œæ¬¢é»‘é»‘çš„é¢œè‰²,å°±æŠŠcssé‡Œé¢œè‰²æ”¹äº†æ”¹,æ”¹æˆäº†è“è‰²çš„ä¸»é¢˜ Â§ å†™ä½œå·¥å…· VSC + MPEå†™mdä¸è¦å¤ªçˆ½(atom,sublimeåº”è¯¥ä¸€æ ·) Â§ å›¾åºŠ å›¾åºŠç”¨çš„æ˜¯ä¸ƒç‰›äº‘ ä¸Šä¼ å›¾ç‰‡è‡³å›¾åºŠçš„å·¥å…·æ˜¯PicGo,åŒæ ·ä¸è¦å¤ªçˆ½ ç°åœ¨æ˜¯vs-picgoäº†,çˆ½ä¸ŠåŠ çˆ½ Â§ deploy ä¸æ˜¯å¾ˆæ¸…æ¥šhexo cleanå’Œhexo generateçš„å…³ç³»,ç´¢æ€§æ¯æ¬¡deployçš„æ—¶å€™éƒ½å…ˆhexo cleanå†hexo gå†hexo d.å› ä¸ºå¾ˆéº»çƒ¦,å°±å†™äº†æ®µC++åšæˆä¸ªexe int main() { system("hexo clean"); system("hexo g"); system("hexo d"); return 0; } ä¹‹åå°±æŠŠç¼–è¯‘å‡ºæ¥çš„exeå‘½åä¸ºd.exeæ”¾åˆ°é¡¹ç›®æ ¹ç›®å½•,ä¹‹åæ¯æ¬¡deployå°±./då°±å®Œäº‹äº† Â§ è¯„è®º ä¹‹å‰é€‰ç”¨çš„livere,ç°åœ¨æ¢æˆäº†Valine]]></content>
      <categories>
        <category>æ‚</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ï½†ï½”ï½ ä¸‰ æ¬¡ æ¡ æ‰‹]]></title>
    <url>%2FsomeFTP%2F</url>
    <content type="text"><![CDATA[]]></content>
      <categories>
        <category>æ‚</category>
      </categories>
      <tags>
        <tag>æ— å˜å¤´</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[azurlane-paintingå¼€å‘ç¬”è®°]]></title>
    <url>%2Fazurlane-painting%2F</url>
    <content type="text"><![CDATA[dalaoçš„å¼€å‘è¿‡ç¨‹ æˆ‘çš„å¼€å‘è¿‡ç¨‹ repo : https://github.com/HHHHhgqcdxhg/azurlane-painting å›¾ç‰‡å¤„ç†è¿‡ç¨‹: å°†å›¾ç‰‡ç¼©å° -&gt; å°†å›¾ç‰‡è‰²å½©èšç±»åˆ°16è‰² -&gt; å°†èšç±»åçš„16è‰²å½’åˆ°èˆ°bæŒ‡å®šçš„8è‰² -&gt; åˆæˆç”»æ¿å›¾ç‰‡]]></content>
      <categories>
        <category>ç¢§è“èˆªçº¿</category>
      </categories>
      <tags>
        <tag>ç¢§è“èˆªçº¿</tag>
        <tag>opencv</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[bilibiliæœºå™¨äººæ›´æ–°æ—¥å¿—]]></title>
    <url>%2Fbili-bot-release-log%2F</url>
    <content type="text"><![CDATA[19/03/03 é‡æ„é¡¹ç›®.ä¹‹å‰å–æ¶ˆè½¬å‘ç‰¹å®šæ¨æ–‡çš„åŠŸèƒ½æš‚æ—¶æ²¡åŠ ä¸Š 19/02/18 å–æ¶ˆå¯¹ä»¥å…³é”®å­—&quot;ã€ãŠçŸ¥ã‚‰ã›&quot;å¼€å¤´çš„æ¨ç‰¹çš„å›¾ç‰‡æ‰“æ°´å°(é‚£ä¸ªå›¾å¤ªå°äº†) 19/02/07 å–æ¶ˆå¯¹ä»¥å…³é”®å­—&quot;ã€æ¥ç¶šéšœå®³&quot;å¼€å¤´çš„æ¨ç‰¹çš„è½¬æ¨(å³æ—¥æœæœåŠ¡å™¨æ•…éšœå’Œæ•…éšœä¿®å¤çš„æ¨æ–‡) 19/01/27 å¢åŠ å›¾ç‰‡æ°´å° 18/12/24 ä¿®å¤IOSç«¯ç‚¹å¼€å¤§å›¾ä¸€ç›´æ­£åœ¨åŠ è½½çš„é—®é¢˜ 18/12/21 è‡ªåŠ¨åœ¨å›å¤ä¸­å‘é€æœºç¿» 18/12/20 å–æ¶ˆå¯¹ä»¥å…³é”®å­—&quot;ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹&quot;å¼€å¤´çš„æ¨ç‰¹çš„è½¬æ¨(å³æ—¥æœç»´æŠ¤è¯´æ˜) 18/12/19 ä’•é»ƒè‹½æœºå™¨äººå¼€å§‹è¿è¡Œ]]></content>
      <categories>
        <category>bot</category>
      </categories>
      <tags>
        <tag>bot</tag>
        <tag>bilibot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Bç«™ç¢§è“èˆªçº¿è½¬æ¨å§¬ä»‹ç»]]></title>
    <url>%2Fbili-bot-help%2F</url>
    <content type="text"><![CDATA[Â§ ç®€ä»‹ å¤§å®¶å¥½,è¿™é‡Œæ˜¯ä’•é»ƒè‹½æœºå™¨äººçš„ä»‹ç» Bç«™ç©ºé—´: https://space.bilibili.com/300123440 è”ç³»ä¸»äºº: ç‚¹å‡»è¿™é‡Œ Â§ ä¸»è¦æ´»åŠ¨ Â§ è½¬å‘ç¢§è“èˆªçº¿æ—¥æœå®˜æ¨ è½¬å‘ç¢§è“èˆªçº¿æ—¥æœå®˜æ¨ç”±è‡ªåŠ¨ç¨‹åºæ§åˆ¶ä¼šå®æ—¶è½¬å‘ç¢§è“èˆªçº¿å®˜æ–¹æ¨ç‰¹åˆ°bilibiliåŠ¨æ€,å¹¶åœ¨è¯„è®ºåŒºé™„ä¸Šç™¾åº¦ç¿»è¯‘å¾—æ¥çš„è¯‘æ–‡ Â§ ç¢§è“èˆªçº¿ç›´æ’­è½¬æ’­ ç›´æ’­é—´: https://live.bilibili.com/21334927 è¿‘æœŸè½¬æ’­è®¡åˆ’(ä»¥ä¸‹æ—¶é—´å‡ä¸ºåŒ—äº¬æ—¶é—´): æ—  Â§ æœºå™¨äººç‰¹æ€§ å› ä¸ºæ˜¯æœºå™¨äºº,æ‰€ä»¥å¾ˆå¤šæ–¹é¢ä¸å¯èƒ½æ¯”å¾—ä¸Šä¸‡ç‰©ä¹‹çµé•¿çš„äººç±»å•¦. ä’•é»ƒè‹½æœºå™¨äººä¼šåŸºæœ¬æ— å·®åˆ«åœ°æ¬è¿æ¨ç‰¹,åšä¸åˆ°å¯¹ä¼˜è´¨å†…å®¹çš„ç­›é€‰,è¿™ç‚¹è¿˜å¾—äº¤ç»™æˆ‘ä»¬å„ä½upå•¦. åŒæ—¶å¦‚æœé‡åˆ°æ¨ç‰¹å†…å®¹æ”¾åˆ°å›½å†…è¿‡äºç‘Ÿç´çš„,ä’•é»ƒè‹½æœºå™¨äººä¹Ÿä¼šè½¬å‘,è¿™å°±ä¼šè¢«å®˜æ–¹åˆ æ‰â€¦ æœ‰æ—¶å€™ä¸»äººä¼šè°ƒè¯•æœºå™¨äººåŠŸèƒ½,å¯èƒ½ä¼šå‘ä¸€äº›è¿·ä¹‹åŠ¨æ€,è¿™æ—¶å¦‚æœçœ‹åˆ°äº†æ— è§†å°±å¥½ å½“ç„¶è¿™ç§ä¸€èˆ¬ä¼šåœ¨åŠå¤œè¿›è¡Œ,å¹¶ä¸”å°½å¿«åˆ æ‰ Â§ æƒ³è¦å…¶ä»–çš„è½¬æ¨å§¬? å¦‚æœä½ æƒ³åƒæœ¬è½¬æ¨å§¬ä¸€æ ·,å®æ—¶æ¬è¿å…¶ä»–çš„æ¨ä¸»çš„æ¨ç‰¹åˆ°Bç«™åŠ¨æ€,VTuberå•¦,åŠ¨ç”»æ¸¸æˆæ¨ç‰¹å•¦,éƒ½å¯ä»¥è”ç³»ä’•é»ƒè‹½ éœ€è¦è‡ªå¤‡ä¸€ä¸ªæ‹¿æ¥è½¬æ¨çš„Bç«™è´¦å· æ³¨æ„Bç«™é™åˆ¶ ç»‘å®šäº†æ‰‹æœºå·å¹¶ä¸”ç»è¿‡å®åè®¤è¯çš„è´¦å·æ‰èƒ½å‘åŠ¨æ€ Â§ å…¶ä»–çš„è½¬æ¨å§¬ Bç«™uid Bç«™åå­— åŸæ¨ä¸» å¤‡æ³¨ æš‚æ—  Â§ å…¶ä»–çš„ä’•é»ƒè‹½ ä’•é»ƒè‹½é™¤äº†Bç«™çš„è¿™ä¸ªæœºå™¨äººä»¥å¤–,è¿˜æœ‰QQæœºå™¨äºº,ä¼šå®æ—¶è½¬å‘ç¢§è“èˆªçº¿æ—¥æœå®˜æ¨åˆ°QQç¾¤ 881800897 ç‚¹æ­¤åŠ ç¾¤ æˆ–è€…æ‰«æäºŒç»´ç : Â§ è”ç³»ä¸»äºº ä¸»äººæ˜¯@è”³è¼è‚å°é»ƒè‹½. è™½è¯´æ˜¯æœºå™¨äºº,ä¸»äººä¹Ÿä¼šä¸Šè¿™ä¸ªè´¦å·,å¶å°”æ³¨å…¥çµé­‚ä¸è¦åƒæƒŠå“¦. å¯ä»¥é€šè¿‡&quot;å…³äºæˆ‘&quot;ä¸­çš„ç¤¾äº¤å¹³å°ä¸æˆ‘è”ç³»,æˆ–åŠ å…¥ä¸Šæ–¹çš„QQç¾¤è¿›è¡Œè”ç³». Â§ ç¿»è¯‘åˆä½œ æœºç¿»çœŸæ˜¯éå¸¸èœå“¦,éƒ½ä¸çŸ¥é“è¢«åæ§½å¤šå°‘éäº†å‘œå‘œ. æ‰€ä»¥ç°åœ¨å¯»æ‰¾åˆä½œçš„ç¿»è¯‘dalao,ç¿»è¯‘ç¢§è“èˆªçº¿ç›¸å…³æ¨æ–‡,æ¬¢è¿è”ç³»æˆ‘ Â§ å…¶ä»– ä’•é»ƒè‹½Bç«™ç¢§è“èˆªçº¿è½¬æ¨å§¬æ›´æ–°æ—¥å¿— ä’•é»ƒè‹½QQæœºå™¨äººä½¿ç”¨æŒ‡å— Â§ æŠ•å–‚ è¿è¡Œæœºå™¨äººè¿˜æ˜¯æœ‰æˆæœ¬åœ¨çš„å“¦,å¸Œæœ›æœ‰é’±äººdalaoèƒ½å¸®ä’•é»ƒè‹½åˆ†æ‹…ä¸€ä¸‹ æ‰“èµÂ¥3.00 æ‰“èµÂ¥10.00 æ‰“èµÂ¥23.33 æ‰“èµÂ¥66.66 æ‰“èµÂ¥100.00 å‰å¾€https://blog.ggemo.com/feed/æ›´å¤šæ‰“èµæ¸ é“.]]></content>
      <categories>
        <category>bot</category>
      </categories>
      <tags>
        <tag>bot</tag>
        <tag>bilibot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°é»„ç“œæœºå™¨äººä½¿ç”¨æŒ‡å—]]></title>
    <url>%2Fbot-help%2F</url>
    <content type="text"><![CDATA[Â§ ä»‹ç» å°é»„ç“œæœºå™¨äººQQ:2482513293 æƒ³è¦è‡ªå·±çš„ç¾¤æ‹¥æœ‰å°é»„ç“œçš„è¯ä¸ç”¨æ‰“æ‹›å‘¼,ç›´æ¥æ‹‰å°±å¥½å“¦ å°é»„ç“œè¯¦ç»†åŠŸèƒ½åˆ—è¡¨è§ä¸‹æ–‡ æ‰€æœ‰å¯èƒ½çƒ¦äººçš„åŠŸèƒ½éƒ½æ˜¯å¯ä»¥ç¾¤ç®¡ç†å‘é€æŒ‡ä»¤å¼€å¯/å…³é—­çš„ æƒ³è¦åšä¸€ä¸ªè·Ÿå°é»„ç“œç±»ä¼¼çš„æœºå™¨äºº,å¯ä»¥è·³è½¬è‡³æŠ€æœ¯ç›¸å…³ Â§ åŠ ç¾¤å‡†åˆ™ å› ä¸ºåŠ ç¾¤å¤ªå¤šä¼šä½¿æœåŠ¡å™¨è´Ÿæ‹…å¤ªå¤§,æ‰€ä»¥ä¼šæ§åˆ¶åŠ ç¾¤æ•°é‡. ä¸ä¹æ„åŠ å…¥çš„ç¾¤: äººæ•°æ¯”è¾ƒå°‘çš„ç¾¤.å› ä¸ºç™¾åä¸ªäººåŠä»¥ä¸‹çš„ç¾¤éš¾ä»¥ä¿è¯ç®¡ç†å’Œç¾¤å‘˜çš„ç´ è´¨ ä¸æ„Ÿå…´è¶£çš„ç¾¤.èˆ°bç¾¤å’Œkirara fantasiaç¾¤ä»¥å¤–çš„é‚€è¯·ä¸å‡ºæ„å¤–åº”è¯¥ä¸ä¼šæ¥å— Â§ åŠŸèƒ½åˆ—è¡¨ Â§ æ— æŒ‡ä»¤åŠŸèƒ½ ç‚¹å‡»åŠŸèƒ½è·³è½¬åˆ°å¯¹åº”ä½ç½® åŠŸèƒ½ æœºå™¨äººéœ€è¦ç®¡ç†æƒé™ æ§åˆ¶å¼€å…³ è½¬å‘æ¨ç‰¹åŠŸèƒ½ å¦ !tweetConfigæŒ‡ä»¤ å¤è¯»æœºéšæœºç¦è¨€åŠŸèƒ½ æ˜¯ !fuduBanConfigæŒ‡ä»¤ æ–°äººå…¥ç¾¤æé†’åŠŸèƒ½ å¦ !welcomeConfigæŒ‡ä»¤ Â§ æŒ‡ä»¤åŠŸèƒ½ æŒ‡ä»¤åŠŸèƒ½æ˜¯é€šè¿‡å‘é€ä»¥æ„Ÿå¹å·å¼€å§‹çš„æŒ‡ä»¤è§¦å‘çš„åŠŸèƒ½,ä¸­æ–‡æˆ–è‹±æ–‡æ„Ÿå¹å·å‡å¯,æ— è§†å¤§å°å†™. ç‚¹å‡»åŠŸèƒ½è·³è½¬åˆ°å¯¹åº”ä½ç½® æŒ‡ä»¤ åŠŸèƒ½ æœºå™¨äººéœ€è¦ç®¡ç†æƒé™ é™ç®¡ç†å¯ç”¨ æ§åˆ¶å¼€å…³ !help å¸®åŠ©åŠŸèƒ½ å¦ å¦ æ—  !fuck ä¼—è£åŠŸèƒ½ æ˜¯ å¦ æŒ‡ä»¤ !sleep é‡‘è´¨ç¡çœ åŠŸèƒ½ æ˜¯ å¦ æŒ‡ä»¤ !del å®šæ—¶æ’¤å›æ¶ˆæ¯åŠŸèƒ½ æ˜¯ å¦ æŒ‡ä»¤ !recipe è·å–ä¸€ä»½å‡çš„é£Ÿè°±åŠŸèƒ½ å¦ å¦ æŒ‡ä»¤ !build ç¢§è“èˆªçº¿å»ºé€ æ¨¡æ‹Ÿå™¨ å¦ å¦ æŒ‡ä»¤ !tweetConfig è®¾ç½®è½¬å‘æ¨ç‰¹çš„åŠŸèƒ½ å¦ æ˜¯ æ—  !enable å¼€å¯åŠŸèƒ½çš„åŠŸèƒ½ å¦ æ˜¯ æ—  !disable å…³é—­åŠŸèƒ½çš„åŠŸèƒ½ å¦ æ˜¯ æ—  !report è”ç³»ä¸»äººåŠŸèƒ½ å¦ æ˜¯ æ—  Â§ åŠŸèƒ½è¯¦æƒ… Â§ æ–°äººå…¥ç¾¤æé†’åŠŸèƒ½ !welcomeConfigæŒ‡ä»¤é™ç®¡ç†å¯ç”¨ æœ‰æ–°äººå…¥ç¾¤æ—¶,å°é»„ç“œæœºå™¨äººå°†@æ–°äºº,å‘é€å…¥ç¾¤æé†’ ç®¡ç†å¯é€šè¿‡å‘é€ !welcomeConfig + å†…å®¹ æ¥æŒ‡å®šå…¥ç¾¤æé†’å†…å®¹ å¦‚: 12!welcomeConfigæ¬¢è¿åŠ å…¥å–„è‰¯å¯çˆ±å°æµ·è±¹ä¿æŠ¤è€…åä¼šç¾¤!è¯·å…ˆé˜…è¯»ç¾¤ç½®é¡¶å…¬å‘Šå“¦! æ³¨: è®¾ç½®çš„å…¥ç¾¤æé†’ä¸å®œå¤ªé•¿,é¿å…åˆ·å±.å»ºè®®æé†’é˜…è¯»ç¾¤å…¬å‘Š,å†…å®¹å†™åœ¨ç¾¤å…¬å‘Šå³å¯ è®¾ç½®çš„å…¥ç¾¤æé†’ä¸­çš„å›¾ç‰‡å°†è¢«å¿½ç•¥ !welcomeConfigåä¸è·Ÿå†…å®¹,å°†å–æ¶ˆå…¥ç¾¤æé†’ Â§ å¤è¯»åŠŸèƒ½ é€šè¿‡æŒ‡ä»¤å¼€/å…³åŠŸèƒ½ å°é»„ç“œæ£€æµ‹åˆ°æœ‰äººåœ¨å¤è¯»,å°±ä¼šè·Ÿç€å¤è¯» å› ä¸å ªç½‘ç»œæš´åŠ›æœºå™¨äººå‘æ¶ˆæ¯å¤ªå¤šä¼šè¢«è…¾è®¯åˆ¶è£,æœ¬åŠŸèƒ½åœæ­¢ä½¿ç”¨ Â§ å¤è¯»æœºéšæœºç¦è¨€åŠŸèƒ½ !fuduBanConfigæŒ‡ä»¤é™ç®¡ç†å¯ç”¨ | æœºå™¨äººéœ€è¦ç®¡ç†æƒé™ ç®¡ç†å¯é€šè¿‡å‘é€ç±»ä¼¼ä¸‹é¢çš„æ¶ˆæ¯,æ›´æ”¹ç¦è¨€å¤è¯»æœºé…ç½® 1234567!fuduBanConfig&#123; &quot;banLen&quot;: 2, &quot;banMult&quot;: 10, &quot;banRebel&quot;: false, &quot;randMemberMode&quot;: 2, &quot;randTimeMode&quot;: 3&#125; å¯¹é…ç½®çš„è§£é‡Šå¦‚ä¸‹: å­—æ®µåæè¿°å¯é€‰å€¼å¯¹åº”æ•ˆæœbanLenè§¦å‘å¤è¯»ç¦è¨€æ¡æ•°>= 2å¤è¯»æ¡æ•°(ç®—ä¸Š è¢«å¤è¯»çš„é‚£ä¸€æ¡) å¤§äºç­‰äº è¿™ä¸ªå€¼æ—¶,è§¦å‘å¤è¯»ç¦è¨€ banMultç¦è¨€åŠ›åº¦>= 1æ§åˆ¶ç¦è¨€æ—¶é•¿çš„åŠ›åº¦banRebel æ˜¯å¦å¼€å¯ç¦è¨€å¤è¯»æœºå›å¾’trueæ­¤æ—¶,å¦‚æœæ˜¯å‚ä¸å¤è¯»çš„äººæ‰“æ–­å¤è¯»,åˆ™ä¸å†è¿›è¡Œå¤è¯»æœºéšæœºæŠ½å–,è€Œæ˜¯ç›´æ¥æŠ½ä¸­è¿™åå¤è¯»æœºå›å¾’falseæ­£å¸¸è¿›è¡Œå¤è¯»æœºæŠ½å–randMemberModeæŠ½å–å¤è¯»æœºçš„æ¨¡å¼0å…³é—­æœ¬åŠŸèƒ½,ä¸å†ç¦è¨€å¤è¯»æœº1éšæœºæŠ½å–ä¸€åå¤è¯»æœº2æ­£æ€åˆ†å¸ƒéšæœºæŠ½å–ä¸€åå¤è¯»æœº3å–å€’æ•°ç¬¬äºŒä¸ªå¤è¯»æœºrandTimeModeæŠ½å–ç¦è¨€æ—¶é•¿çš„æ¨¡å¼1ç»å…¸éšæœº,ç¦è¨€æ—¶é—´ä¸º (1~æœ¬è½®å¤è¯»æ¡æ•° ä¹‹é—´çš„éšæœºæ•°) * banMult2å¤è¯»æ€»é•¿ç›¸å…³,ç¦è¨€æ—¶é—´ä¸º æœ¬è½®å¤è¯»æ¡æ•° * banMult3å›ºå®šæ—¶é•¿,ç¦è¨€æ—¶é•¿ä¸º banMult4æŒ‰åº§ä½,è¢«æŠ½åˆ°çš„å¤è¯»æœºåœ¨æœ¬è½®å¤è¯»ä¸­æ˜¯å€’æ•°ç¬¬nä¸ª,æ—¶é•¿å°±ä¸º n * banMult Â§ ä¼—è£åŠŸèƒ½ æœ¬åŠŸèƒ½ä¸ºæŒ‡ä»¤åŠŸèƒ½,é€šè¿‡å‘é€ !fuck + @ä¸€åç¾¤å‘˜ è§¦å‘ é€šè¿‡æŒ‡ä»¤å¼€/å…³åŠŸèƒ½ | æœºå™¨äººéœ€è¦ç®¡ç†æƒé™ åœ¨ä¸€äººé€šè¿‡è¯¥æŒ‡ä»¤å¼€å¯å¯¹ä¸€åç¾¤å‘˜Açš„ä¼—è£ä¹‹å,å°†å¼€å§‹ä¸‰åˆ†é’Ÿçš„è®¡æ—¶,ç»Ÿè®¡ä¸‰åˆ†é’Ÿå†…é€šè¿‡è¯¥æŒ‡ä»¤å‚ä¸å¯¹ç¾¤å‘˜Açš„ä¼—è£çš„äººæ•°,äºä¸‰åˆ†é’Ÿåå¯¹ç¾¤å‘˜Aè¿›è¡Œåˆ¶è£(ç¦è¨€) ç¦è¨€æ—¶é•¿: å‚ä¸æœ¬è½®ä¼—è£äººæ•° ç¦è¨€æ—¶é•¿(åˆ†é’Ÿ) &lt;= 2 ä¸ç¦è¨€ 3 5 4 10 &gt;= 5 æ¯å¤šä¸€äºº,æ—¶é•¿åŠ 2 æ³¨: !fuckåé¢è·Ÿä¸Š@ä¸€åç¾¤å‘˜,è¿™ä¸ª@å¿…é¡»æ˜¯èƒ½@åˆ°äººçš„,å¤åˆ¶ç²˜è´´çš„ä¸ç®¡ç”¨ ä¸è¦é‡å¤å‚ä¸ä¼—è£,å¦åˆ™ä¼šè¢«ç¦è¨€1åˆ†é’Ÿ ä¸è¦å†ä¼—è£ç¾¤ä¸»ç®¡ç†è¾£! ä¸è¦æ¬ºè´Ÿäººå“¦,æ‹¿æ¥åˆ¶è£æµ·è±¹æ­£é€‚åˆ Â§ å®šæ—¶æ’¤å›æ¶ˆæ¯åŠŸèƒ½ æœ¬åŠŸèƒ½ä¸ºæŒ‡ä»¤åŠŸèƒ½,é€šè¿‡å‘é€ !del + æ—¶é•¿ + ç©ºæ ¼ + æ¶ˆæ¯ è§¦å‘ é€šè¿‡æŒ‡ä»¤å¼€/å…³åŠŸèƒ½ | æœºå™¨äººéœ€è¦ç®¡ç†æƒé™ ç¤ºä¾‹: 1!del 10 è¿™æ¡æ¶ˆæ¯å°†åœ¨10ç§’åè¢«æ’¤å› æ³¨: å¦‚ !del åä¸åŠ æ—¶é•¿,ç›´æ¥è·Ÿæ¶ˆæ¯,åˆ™é»˜è®¤æ’¤å›æ—¶é•¿ä¸º5ç§’ å¦‚è®¾ç½®æ—¶é•¿,è®°å¾—æ—¶é•¿æ•°å­—å’Œåé¢æ¶ˆæ¯ä¸­é—´ç”¨ç©ºæ ¼åˆ†éš” è®¾ç½®æ—¶é•¿æœ€å¤§ä¸º600,è¶…è¿‡è¿™ä¸ªå€¼å°†æ”¹ä¸º5 æœ¬åŠŸèƒ½ä¸ºé™ éç®¡ç†ç¾¤å‘˜ ä½¿ç”¨ Â§ é‡‘è´¨ç¡çœ åŠŸèƒ½ æœ¬åŠŸèƒ½ä¸ºæŒ‡ä»¤åŠŸèƒ½,é€šè¿‡å‘é€ !sleep è§¦å‘ é€šè¿‡æŒ‡ä»¤å¼€/å…³åŠŸèƒ½ | æœºå™¨äººéœ€è¦ç®¡ç†æƒé™ 22:00~æ¬¡æ—¥03:59å‘é€æŒ‡ä»¤,å‘é€è€…å°†è¢«ç¦è¨€6å°æ—¶ Â§ é£Ÿè°±åŠŸèƒ½ æœ¬åŠŸèƒ½ä¸ºæŒ‡ä»¤åŠŸèƒ½,é€šè¿‡å‘é€ !recipe æˆ– !gbfè§¦å‘ é€šè¿‡æŒ‡ä»¤å¼€/å…³åŠŸèƒ½ | æ¶ˆè€—é»„ç“œç‰‡ : 20 å‘é€ä¸€ä»½åˆ†äº«,æ ‡é¢˜å’Œå›¾ç‰‡ä¸ºéšæœºé£Ÿè°±çš„æ ‡é¢˜å’Œå›¾ç‰‡,ç‚¹å¼€å´æ˜¯granbluefantasy.jp Â§ ç¢§è“èˆªçº¿å»ºé€ æ¨¡æ‹Ÿå™¨ æœ¬åŠŸèƒ½ä¸ºæŒ‡ä»¤åŠŸèƒ½,é€šè¿‡å‘é€ !build è§¦å‘ é€šè¿‡æŒ‡ä»¤å¼€/å…³åŠŸèƒ½ | æ¶ˆè€—é»„ç“œç‰‡ : 40 !buildå¯æ¥å—æœ€å¤šä¸¤ä¸ªæ­£æ•´æ•°å‚æ•°,ç”¨é€—å·åˆ†éš”(ä¸­è‹±æ–‡æ ‡ç‚¹å‡å¯) æŒ‡ä»¤ æ•ˆæœ !build æŠ½å–1æ± 10æ¬¡ !build x æŠ½å–xæ± 10æ¬¡,xå¯ä¸º1,2,3 !build x,y æŠ½å–xæ± yæ¬¡,yä¸º1~10 æ³¨: æ¦‚ç‡ä¿è¯æŒ‰ç…§å®˜æ–¹ç»™å‡ºçš„æ¦‚ç‡ å¡æ± ä¿¡æ¯æ¥è‡ªç€è¿·ç¢§è“èˆªçº¿wikiå»ºé€ æ¨¡æ‹Ÿå™¨ ä¸å‡†å¤‡åšé™æ—¶å»ºé€ çš„å¡æ± ,æƒ³ç©çš„è¯·ç§»æ­¥ç€è¿·ç¢§è“èˆªçº¿wikié™æ—¶å»ºé€ æ¨¡æ‹Ÿå™¨ æœ¬åŠŸèƒ½éœ€è¦ç”Ÿæˆå›¾ç‰‡å‘é€å›¾ç‰‡,å¯¹æœåŠ¡å™¨èµ„æºæ¶ˆè€—è¿‡å¤§,ä¸è¦ç©å¤ªè¿‡åˆ†å“¦ å¦‚æœ!buildæ²¡æœ‰ååº”,æˆ–è€…åªå›å¤æ–‡å­—ä¸æ˜¾ç¤ºå›¾ç‰‡,å°±ä»£è¡¨è¢«è…¾è®¯é™åˆ¶äº†,è¿™æ—¶å€™å°±è¦ç¨åå†è¯• Â§ è½¬å‘æ¨ç‰¹åŠŸèƒ½ !tweetConfigæŒ‡ä»¤é™ç®¡ç†å¯ç”¨ å°é»„ç“œä¼šå®æ—¶(Real Time)è½¬å‘æŒ‡å®šæ¨ç‰¹ç”¨æˆ·å‘é€çš„æ–°æ¨ç‰¹è‡³qqç¾¤ æ–°åŠ çš„ç¾¤æ˜¯ä¸ä¼šè½¬å‘æ¨ç‰¹çš„,éœ€è¦ç»è¿‡è®¾ç½®å,å¯è½¬å‘æŒ‡å®šæ¨ç‰¹ è®¾ç½®æ–¹æ³•:å‘é€ç±»ä¼¼å¦‚ä¸‹çš„æ¶ˆæ¯,å¯æ·»åŠ æˆ–ä¿®æ”¹æ¨ç‰¹è½¬å‘: 12345678910111213!tweetConfig&#123; &quot;follow&quot;:&#123; &quot;name&quot;:&quot;@azurlane_staff&quot;, &quot;nickName&quot;:&quot;ç¢§è“èˆªçº¿æ—¥æœæ¨ç‰¹&quot; &#125;, &quot;groupInfo&quot;: &#123; &quot;nickName&quot;: &quot;åœ¨è¿™é‡Œå¡«å†™ç¾¤å&quot;, &quot;trans&quot;: false, &quot;sendRT&quot;: false, &quot;mediaOnly&quot;:false, &quot;follow&quot;: true &#125;&#125; ä»¥ä¸‹ä¸ºå¯¹ä¸Šé¢é…ç½®çš„è§£é‡Š: 12345678910111213!tweetConfig&#123; &quot;follow&quot;:&#123; &quot;name&quot;:&quot;è¿™é‡Œå¡«å…¥éœ€è¦å…³æ³¨çš„äººçš„æ¨ç‰¹Id,ä»¥@å¼€å¤´&quot;, &quot;nickName&quot;:&quot;è¿™é‡Œå¡«å…¥å…³æ³¨çš„äººçš„ç§°å‘¼&quot; &#125;, &quot;groupInfo&quot;: &#123; &quot;nickName&quot;: &quot;ç¾¤å&quot;, //åœ¨è¿™é‡Œå¡«å†™ç¾¤å,ç†è®ºä¸Šéšä¾¿å¡«,ä¸»è¦ç›®çš„æ˜¯è®©ä½œè€…è¾¨è¯†å‡ºæ˜¯å“ªä¸ªç¾¤ &quot;trans&quot;: true, //æ˜¯å¦éœ€è¦å‘é€ä¸€éå°†ç»è¿‡ç™¾åº¦ç¿»è¯‘çš„æ¨æ–‡,æŠŠtrueæ”¹æˆfalseå°†ä¸ç¿»è¯‘ &quot;sendRT&quot;: false, //æ˜¯å¦éœ€è¦å‘é€ è½¬å‘å’Œå›å¤åˆ«äººçš„æ¨ç‰¹,å»ºè®®å…³é—­,æ‰“å¼€å¾ˆçƒ¦äººçš„,æŠŠfalseæ”¹æˆtrueæ‰“å¼€ &quot;mediaOnly&quot;: false, //å°†falseæ”¹æˆtrue,å°†åªå‘æœ‰å›¾ç‰‡å†…å®¹çš„æ¨ç‰¹,çº¯æ–‡å­—æ¨ç‰¹å°†å¿½ç•¥,é€‚åˆå…³æ³¨ç”»å¸ˆ &quot;follow&quot;: true //å°†trueæ”¹ä¸ºfalse,å°†ä¸è½¬å‘æ­¤äººçš„æ¨ç‰¹ &#125;&#125; æ³¨æ„: è¿™æ¡æ¶ˆæ¯é™¤å¼€å¤´çš„!tweetConfigä»¥å¤–,å…¨éƒ¨å¤§å°å†™æ•æ„Ÿä¸”å¿…é¡»ç”¨åŠè§’æ ‡ç‚¹ç¬¦å·(å³è‹±æ–‡æ ‡ç‚¹) å¤§æ‹¬å·,å†’å·,é€—å·,å¼•å·éƒ½ä¸èƒ½æ¼ ä¸è¦å°†trueæ‰“æˆture,falseæ‰“æˆflaseâ€¦ è‹¥å‡ºç°&quot;æŸ¥æ‰¾ç”¨æˆ·ä¿¡æ¯å¤±è´¥&quot;æç¤º,è¯·ç¡®å®šå…³æ³¨çš„äººçš„idä»¥@ç¬¦å·å¼€å¤´,ç¡®è®¤æ— è¯¯åç¨åå†è¯• å°é»„ç“œæœºå™¨äººå®šæ—¶æ¯å‘¨å››å–æ¶ˆå¯¹ åªæœ‰ä¸€ä¸ªç¾¤å…³æ³¨çš„æ¨ç‰¹ çš„å…³æ³¨ é™„å½•ä¸­ç»™å‡ºäº†äº›å¸¸ç”¨æ¨ç‰¹ä¾›å‚è€ƒ Â§ å¼€å¯åŠŸèƒ½çš„åŠŸèƒ½ æœ¬åŠŸèƒ½ä¸ºæŒ‡ä»¤åŠŸèƒ½,é€šè¿‡å‘é€ !enable + å…¶ä»–åŠŸèƒ½æŒ‡ä»¤ è§¦å‘ é™ç®¡ç†å¯ç”¨ æŒ‡ä»¤ åŠŸèƒ½ !enable !sleep å¼€å¯é‡‘è´¨ç¡çœ åŠŸèƒ½ !enable !fuck å¼€å¯ä¼—è£åŠŸèƒ½ !enable !recipe å¼€å¯é£Ÿè°±åŠŸèƒ½ !enable !build å¼€å¯ç¢§è“èˆªçº¿å»ºé€ æ¨¡æ‹Ÿå™¨ !enable !del å¼€å¯å®šæ—¶æ’¤å›æ¶ˆæ¯åŠŸèƒ½ æ³¨:æ— è§†æ‰€æœ‰æ„Ÿå¹å·å…¨/åŠè§’,ä¸åŒºåˆ†å¤§å°å†™ Â§ å…³é—­åŠŸèƒ½çš„åŠŸèƒ½ æœ¬åŠŸèƒ½ä¸ºæŒ‡ä»¤åŠŸèƒ½,é€šè¿‡å‘é€ !disable + å…¶ä»–åŠŸèƒ½æŒ‡ä»¤ è§¦å‘ é™ç®¡ç†å¯ç”¨ æŒ‡ä»¤ åŠŸèƒ½ !disable !sleep å…³é—­é‡‘è´¨ç¡çœ åŠŸèƒ½ !disable !fuck å…³é—­ä¼—è£åŠŸèƒ½ !disable !recipe å…³é—­é£Ÿè°±åŠŸèƒ½ !disable !build å…³é—­ç¢§è“èˆªçº¿å»ºé€ æ¨¡æ‹Ÿå™¨ !disable !del å…³é—­å®šæ—¶æ’¤å›æ¶ˆæ¯åŠŸèƒ½ æ³¨:æ— è§†æ‰€æœ‰æ„Ÿå¹å·å…¨/åŠè§’,ä¸åŒºåˆ†å¤§å°å†™ Â§ è”ç³»ä¸»äººåŠŸèƒ½ æœ¬åŠŸèƒ½ä¸ºæŒ‡ä»¤åŠŸèƒ½,é€šè¿‡å‘é€ !report è§¦å‘ !reportæŒ‡ä»¤é™ç®¡ç†å¯ç”¨ æœºå™¨äººæ¥æ”¶åˆ°ä»¥!reportå¼€å¤´çš„æ¶ˆæ¯,ä¼šå‘é€ç»™ä¸»äººçœ‹åˆ° æ³¨: ä¹±ç©æ­¤åŠŸèƒ½ä¼šæ‰“æ‰°åˆ°ä¸»äººçš„,è¯·ä¸è¦ä¹±ç© æœºå™¨äººåŠŸèƒ½ç›¸å…³è¯·å…ˆä»”ç»†é˜…è¯»æœ¬ç¯‡æ–‡æ¡£å¯¹åº”éƒ¨åˆ†ä»¥åŠQ&amp;Aéƒ¨åˆ† åœ¨ç¾¤é‡Œç›´æ¥@å°é»„ç“œæœºå™¨äºº,ä¸»äººä¸€èˆ¬æƒ…å†µä¸‹çœ‹ä¸åˆ°çš„ ç§èŠå°é»„ç“œæœºå™¨äºº,ä¸»äººä¸€èˆ¬æƒ…å†µä¸‹çœ‹ä¸åˆ° ä½¿ç”¨!reportæŒ‡ä»¤çš„æ¶ˆæ¯,ä¸»äººä¼šçœ‹åˆ°,å¹¶å°½é‡åŠæ—¶å›åº” æŒ‰ç…§ä¸‹é¢è”ç³»æ–¹å¼è”ç³»ä¸»äºº,æ˜¯æ¯”è¾ƒæœ‰æ•ˆçš„è”ç³»æ–¹å¼ æœ‰äº‹è¯·ç›´æ¥è¯´äº‹,å…æ‰&quot;åœ¨å—&quot;ä¹‹ç±»çš„æ‰“æ‹›å‘¼å†…å®¹ è°¢ç»æ— äº‹éªšæ‰° ä¸»äººQQ:2894700792 åŠ å¥½å‹çš„è®¤è¯ä¿¡æ¯è¯·è®¤çœŸå¡«å†™ Â§ é»„ç“œç‰‡ç³»ç»Ÿ å‡ºäºç›®çš„: é˜²æ­¢åŠŸèƒ½æ»¥ç”¨å¯¹å°é»„ç“œæœåŠ¡å™¨é€ æˆå¤ªå¤§è´Ÿæ‹… é˜²æ­¢æŸäº›åŠŸèƒ½é€ æˆåˆ·å± é˜²æ­¢è¢«txé™åˆ¶ ç°åœ¨å®è£…é»„ç“œç‰‡ç³»ç»Ÿ,æŸäº›åŠŸèƒ½éœ€è¦æ¶ˆè€—é»„ç“œç‰‡(é»„ç“œç‰‡å°±æ˜¯ç±»ä¼¼ä½“åŠ›çš„ä¸œè¥¿å•¦) Â§ è·å¾—é»„ç“œç‰‡ å°é»„ç“œæœºå™¨äººä¼šåœ¨æ¯å¤©å‡Œæ™¨04:30,ä¸­åˆ13:30,æ™šä¸Š19:30å°†æ‰€æœ‰ç¾¤å‹çš„é»„ç“œç‰‡ç½®ä¸º40ç‚¹. å³,é»„ç“œç‰‡ä¸å¯ç§¯æ”’,æ¯ä¸ªæ—¶é—´æ®µ40ç‚¹ Â§ æ¶ˆè€—é»„ç“œç‰‡ æ¶ˆè€—é»„ç“œç‰‡çš„åŠŸèƒ½ åŠŸèƒ½ æ¶ˆè€—é»„ç“œç‰‡æ•°/æ¬¡ ç¢§è“èˆªçº¿å»ºé€ æ¨¡æ‹Ÿå™¨ 40 é£Ÿè°±åŠŸèƒ½ 20 Â§ å…¶ä»– Â§ å°é»„ç“œæœºå™¨äººçš„ç®¡ç†æƒé™ ç»™å°é»„ç“œç®¡ç†æƒé™å,æœºå™¨äººå¹¶ä¸èƒ½é©¬ä¸Šæ„è¯†åˆ°è‡ªå·±æ˜¯ç®¡ç†,éœ€è¦é‡å¯æ’ä»¶,è¿™æ—¶é€šè¿‡è”ç³»ä¸»äººåŠŸèƒ½å‘ŠçŸ¥é‡å¯ Â§ é™ç®¡ç†å¯ç”¨åŠŸèƒ½ æœ¬æ–‡ä¸­çš„&quot;ç®¡ç†&quot;,çš†æŒ‡ ç®¡ç†orç¾¤ä¸» æŠŠéƒ¨åˆ†åŠŸèƒ½åšæˆä»…é™ç®¡ç†å¯ç”¨,ç›®çš„æ˜¯è¿‡æ»¤æ‰æ²¡ç´ è´¨çš„äºº,å¸Œæœ›èº«ä¸ºç®¡ç†èƒ½æ„è¯†åˆ°è‡ªå·±çš„ä¸€ä»½ç´ è´¨,ä¸è¦é—²æ¥æ— äº‹reportç©,æˆ–è€…å‡­ä¸€å·±ä¹‹è§å…³æ³¨ä¸€äº›å¥‡æ€ªæˆ–æ— èŠçš„æ¨ç‰¹ Â§ ideaç›¸å…³ æœ‰è§‰å¾—å¥½ç©çš„æœºå™¨äººçš„ç©æ³•çš„æƒ³æ³•,å¯ä»¥è”ç³»ä¸»äººå“¦ Â§ æŠ€æœ¯ç›¸å…³ å› ä¸ºå°é»„ç“œæœºå™¨äººé¡¹ç›®ä¸­æœ‰å¾ˆå¤šå°é»„ç“œçš„apikeyå’ŒOAuthè®¤è¯ä¿¡æ¯,å¼€æºå¾ˆéº»çƒ¦,æ‰€ä»¥é—­æº å°é»„ç“œæœºå™¨äººé¡¹ç›®ä»£ç æ˜¯ä½¿ç”¨pythonç¼–å†™,é€šè¿‡richardchien/coolq-http-apiå’Œrichardchien/python-aiocqhttpæ§åˆ¶é…·Qå®ç°çš„, ç›‘å¬æ–°æ¨ç‰¹æ˜¯é€šè¿‡tweepy.StreamListenerå®ç° é…·Qåªèƒ½è·‘åœ¨windowsæˆ–æœ‰å›¾å½¢ç•Œé¢çš„linuxæœåŠ¡å™¨ä¸Š,æœ¬äººä½¿ç”¨çš„æœåŠ¡å™¨æ˜¯é˜¿é‡Œäº‘æœåŠ¡å™¨çš„å­¦ç”Ÿæœº Â§ å…¶ä»–çš„ä’•é»ƒè‹½ ä’•é»ƒè‹½bilibiliæœºå™¨äºº:@ç¢§è“èˆªçº¿è½¬æ¨å§¬ ä¼šå°†ç¢§è“èˆªçº¿æ–°æ—¥æ¨è½¬å‘åˆ°Bç«™åŠ¨æ€,å¹¶åœ¨è¯„è®ºåŒºé™„ä¸Šç¿»è¯‘ ä’•é»ƒè‹½Bç«™æœºå™¨äººä»‹ç» ä’•é»ƒè‹½å¾®åšæœºå™¨äºº:@ç¢§è“èˆªçº¿è½¬æ¨å§¬(å’ŒBç«™çš„åŒåå“¦) ä¼šå°†ç¢§è“èˆªçº¿æ–°æ—¥æ¨è½¬å‘åˆ°å¾®åš Â§ å…¶ä»–ç›¸å…³ å¸Œæœ›ç¾¤å‹ä»¬ç´ è´¨èŠå¤© Â§ æŠ•å–‚ è¿è¡Œæœºå™¨äººè¿˜æ˜¯æœ‰æˆæœ¬åœ¨çš„å“¦,å¸Œæœ›æœ‰é’±äººdalaoèƒ½å¸®ä’•é»ƒè‹½åˆ†æ‹…ä¸€ä¸‹ æ›´å¤šæ‰“èµæ¸ é“: https://blog.ggemo.com/feed/ æ‰“èµÂ¥3.00 æ‰“èµÂ¥10.00 æ‰“èµÂ¥23.33 æ‰“èµÂ¥66.66 æ‰“èµÂ¥100.00 Â§ QA Â§ QA1 Q: å»ºé€ æ¨¡æ‹Ÿå™¨æ€ä¹ˆæ²¡æœ‰é™å®šæ± ? A: ä’•é»ƒè‹½æœºå™¨äººçš„å»ºé€ æ¨¡æ‹Ÿå™¨æ•°æ®æ¥æºä¸ºç€è¿·ç¢§è“èˆªçº¿wikiå»ºé€ æ¨¡æ‹Ÿå™¨.è€Œwikiå¹¶æ²¡æœ‰é™å®šæ± è¯¦ç»†ä¿¡æ¯,åœ¨ç€è¿·ç¢§è“èˆªçº¿wikié™æ—¶å»ºé€ æ¨¡æ‹Ÿå™¨ä¸­,æœªçŸ¥è§’è‰²ç”¨é—®å·ä»£æ›¿,è€Œä’•é»ƒè‹½å»ºé€ æ¨¡æ‹Ÿå™¨æ¯”è¾ƒåœ¨æ„çœŸå®å’Œç¾è§‚,ä¸ä¹æ„ç”¨é—®å·è¿™ç§.æƒ³ç©çš„è¯è¿˜è¯·å‰å¾€ç€è¿·ç¢§è“èˆªçº¿wikié™æ—¶å»ºé€ æ¨¡æ‹Ÿå™¨. Â§ QA2 Q: å»ºé€ æ¨¡æ‹Ÿå™¨æ¦‚ç‡æ˜¯ä¸æ˜¯æœ‰é—®é¢˜å•Š? A: æ¦‚ç‡çº¯ç²¹æŒ‰ç…§å®˜æ–¹ç»™å‡ºçš„æ¦‚ç‡è¿›è¡ŒéšæœºæŠ½å–,ç„¶è€Œå®é™…æ¸¸æˆä¸­å¯èƒ½å¹¶éå¦‚æ­¤(è¯¦ç»†å¯ä»¥çœ‹ä¸‹è¿™ä¸ªè§†é¢‘: bilibili-æ­ç§˜æ¸¸æˆæ°ªé‡‘æŠ½å¡çš„â€œé»‘å¹•â€ã€æ¸¸æˆä¾¦æŸ¥å†°ã€‘-èŠ’æœå†°OL),æ•…å¯èƒ½æ„Ÿå®˜ä¸Šå’ŒçœŸå®æ¸¸æˆä¸­æœ‰æ‰€ä¸åŒ. Â§ QA3 Q: !buildç»å¸¸ä¼šæ²¡æœ‰ååº”æˆ–è€…åªå›å¤æ–‡å­—æ²¡æœ‰å›¾ç‰‡,æ˜¯æ€ä¹ˆå›äº‹? A: å›¾ç‰‡å‘å¤šäº†ä¼šè¢«è…¾è®¯é™åˆ¶,ä¸€æ®µæ—¶é—´å†…å‘ä¸å‡ºå›¾ç‰‡çš„,è¿™ç§æ—¶å€™è¿˜è¯·ç¨å€™å†è¯• Â§ QA4 Q: ä¸ºä»€ä¹ˆæˆ‘æ‹‰ä’•é»ƒè‹½æœºå™¨äººè¿›ç¾¤æˆ–è€…åŠ å¥½å‹æ²¡æœ‰ååº”? A: åŠ ç¾¤å‡†åˆ™è§æœ¬é¡µåŠ ç¾¤å‡†åˆ™.åŠ å¥½å‹æ²¡æœ‰ååº”ä¸€å®šæ˜¯å› ä¸ºåŠ å¥½å‹ç†ç”±æ˜¯ä¹±å¡«. Â§ QA5 Q: ä’•é»ƒè‹½æœºå™¨äººæ˜¯æœ‰æ”¶è´¹çš„å—? A: ä’•é»ƒè‹½æœºå™¨äººæš‚æ—¶æ²¡æœ‰ä»»ä½•ä»˜è´¹åŠŸèƒ½,å…¥ç¾¤æ— ç§Ÿé‡‘,é»„ç“œç‰‡ä¸å¯å……å€¼.ä¸è¿‡å¦‚æœä½ é’±æ¯”è¾ƒå¤šè¿˜å–œæ¬¢ä’•é»ƒè‹½çš„è¯è¿˜è¯·é€šè¿‡æœ¬é¡µé¢çš„æŠ•å–‚è¿›è¡Œèµ„åŠ©. Â§ QA6 Q: å¯ä»¥ æ‹/åˆ‡/å‰/ç”¨ é»„ç“œå—? A: æ˜¯ä¸å¯ä»¥çš„. Â§ QA7 Q: ä’•é»ƒè‹½ä¸»äººæ˜¯ä¸ªä»€ä¹ˆäºº? A: https://blog.ggemo.com/about/ Â§ é™„å½•-å¸¸ç”¨æ¨ç‰¹id æ¨ç‰¹id å¤‡æ³¨ @korindo åšä¸½ç¥ä¸»æ¨ç‰¹ @kirarafantasia èŠ³æ–‡ç¤¾æ‰‹æ¸¸ãã‚‰ã‚‰ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ã‚¢å®˜æ¨ @azurlane_staff ç¢§è“èˆªçº¿æ—¥æœå®˜æ¨]]></content>
      <categories>
        <category>bot</category>
      </categories>
      <tags>
        <tag>qqbot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonç¨‹åºæ‰“åŒ…æˆexe]]></title>
    <url>%2Fpy2exe%2F</url>
    <content type="text"><![CDATA[Â§ å‰è¨€ ç”¨pythonå†™äº†ä¸ªé¡¹ç›®(åœ¨è¿™)æƒ³å‘å¸ƒå‡ºå»ç»™æ²¡æœ‰pythonç¯å¢ƒçš„äººç”¨.è¯•äº†pyinstaller,æ‰“åŒ…å‡ºæ¥ä¸èƒ½æ­£å¸¸è·‘â€¦äºæ˜¯å¿ƒç”Ÿæ·«æŠ€,å°†pythonç¯å¢ƒè·Ÿé¡¹ç›®æ”¾åˆ°ä¸€èµ·,ç„¶åæ‹¿Cå†™å‡ è¡Œç¨‹åº,é€šè¿‡system callçš„æ–¹å¼è°ƒç”¨pythonè¿è¡Œé¡¹ç›®è„šæœ¬,å†å°†è¿™ä¸ªCç¨‹åºç¼–è¯‘æˆexeâ€¦ Â§ pythonç¯å¢ƒçš„å‡†å¤‡ æˆ‘é¦–å…ˆè¯•äº†æ‹¿è™šæ‹Ÿç¯å¢ƒ,ç„¶åå‘ç°è™šæ‹Ÿç¯å¢ƒå°‘äº†ä¸€å †dllâ€¦æ‹¿è‡ªå·±çš„pythonç¯å¢ƒå§,ä¸€å †è¿™ä¸ªé¡¹ç›®ç”¨ä¸ç€çš„åº“,æ‰“åŒ…è¿›å»å¤ªå¤§,æŒ‘å‡ºæ¥å¤ªéº»çƒ¦â€¦ç´¢æ€§å¦å¤–è£…ä¸€ä¸ªpython.æˆ‘æœ¬èº«ç¯å¢ƒæ˜¯3.6.7ç‰ˆæœ¬çš„,åˆå»å¦å¤–è£…äº†ä¸ª3.7.2ç‰ˆæœ¬.å®‰è£…æ—¶æ³¨æ„æŠŠä»€ä¹ˆè®¾ç½®ç¯å¢ƒå˜é‡,å‘æ‰€æœ‰ç”¨æˆ·å®‰è£…éƒ½å–æ¶ˆäº†,ç•™ç€pipå°±å¥½,ä¹‹åæ‹¿pipæŠŠåŒ…éƒ½è£…å¥½,ç„¶åæŠŠæ•´ä¸ªpythonç›®å½•æ‹·è´åˆ°é¡¹ç›®æ ¹ç›®å½•å°±å®Œäº‹äº† Â§ å‡†å¤‡ä¸€ä¸ªexe è¿™å°±æ¯”è¾ƒé‡è›®â€¦ç¨‹åºå…¥å£12345678910111213141516171819202122```C++#include &lt;iostream&gt;#include &lt;windows.h&gt;#include &lt;direct.h&gt; using namespace std;int main(int argc, char * argv[])&#123; string cwd = _getcwd(NULL, 0); string cmd = &quot;\\Python37-32\\python.exe __main__.py&quot;; cmd = cwd + cmd; for (int i = 1; i &lt; argc; i++) &#123; cmd += &quot; &quot;; cmd += argv[i]; &#125; const char *cmd_c_str = cmd.c_str(); // cout &lt;&lt; cmd_c_str&lt;&lt;endl; system(cmd_c_str); //system(&quot;pause&quot;); return 0;&#125; ç¼–è¯‘å¥½æ‹¿å‡ºæ¥æ”¾åˆ°é¡¹ç›®æ ¹ç›®å½•å°±å®Œäº‹äº†]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¡Œé¢è¿½ç•ªåŠ©æ‰‹]]></title>
    <url>%2FbangumiDesktopAssistant%2F</url>
    <content type="text"><![CDATA[æœ¬é¡¹ç›®gitä»“åº“:https://dev.tencent.com/u/hhhhhg/p/bangumiDesktopAssistant å°è¯•äº†æ‰“åŒ…æˆexeå´åšä¸åˆ°,æ‰€ä»¥åº”è¯¥åªæœ‰è£…äº†pythonæ‰èƒ½ç”¨äº†XD pythonç‰ˆæœ¬æ˜¯3.6.4(å› ä¸ºç”¨åˆ°äº†få‰ç¼€å­—ç¬¦ä¸²,æ‰€ä»¥å¤§æ¦‚éœ€è¦è‡³å°‘3.6ç‰ˆæœ¬),æ“ä½œç³»ç»Ÿåªè¯•äº†windows ä½¿ç”¨: 1234git clone https://git.dev.tencent.com/hhhhhg/bangumiDesktopAssistant.gitcd bangumiDesktopAssistantpip install -r requirements.txtpython __main__.py åœ¨ä»»åŠ¡æ æ‰¾åˆ°å›¾æ ‡(å’Œé¡¹ç›®å¤´åƒæ˜¯åŒä¸€å¼ å›¾ç‰‡),å³é”®å¯è¿›è¡Œè¿½ç•ªç¼–è¾‘æˆ–è€…é€€å‡ºç¨‹åº. è¿½ç•ªç¼–è¾‘å·¥å…·æŒ‰è¦æ±‚å¡«å…¥ä¿¡æ¯,å¯ç”Ÿæˆä¸€ä»½ç•ªå‰§ä¿¡æ¯,ä¿å­˜åœ¨src/db/bangumisInfoä¸­,å¦‚æœå¡«å…¥å¾—å½“,ä¸å‘ç”Ÿæ„å¤–,åˆ™å¯æ­£å¸¸ä½¿ç”¨. é‡åˆ°ç‰¹æ®Šæƒ…å†µ(æ¯”å¦‚ç•ªå‰§åœæ›´)åˆ™éœ€è¦æ‰‹åŠ¨æ”¹å¯¹åº”çš„jsonæ–‡ä»¶ä¸­çš„chapterséƒ¨åˆ†â€¦ æœ‰ç•ªå‰§æ›´æ–°æ—¶,ä¼šæ’­æ”¾éŸ³é¢‘,ä¸ºsrc/audio/alarm.wav é€æ˜åº¦,é…è‰²ç­‰é…ç½®å­˜åœ¨src/db/config.jsonä¸­,å¯ä»¥è½»æ˜“æ›´æ”¹ é…ç½®å¥½ç¯å¢ƒå,ä¹‹åå¯ä»¥è¿è¡Œbangumi.batæ¥è¿è¡Œæœ¬å·¥å…·,ä¹Ÿå¯åœ¨æ³¨å†Œè¡¨ä¸­å°†bangumi.batè®¾ä¸ºå¼€æœºè‡ªå¯ è¿è¡Œæˆªå›¾: 1080på±å¹•ä¸‹unfocusedçŠ¶æ€è¡¨ç° 1080på±å¹•ä¸‹focusedçŠ¶æ€(é¼ æ ‡æ‚¬åœåœ¨ä¹‹ä¸Šæ—¶)è¡¨ç° ä¹‹å‰ç”¨tkinterå†™äº†ä¸¤å¤©äº†,å¯Ÿè§‰æœ‰ç‚¹ä¸å¥½ç”¨,åˆæ¢æˆäº†PyQt5. è€—èµ„æºæ–¹é¢,å¹³å¸¸åœ¨åå°è¿è¡Œå°±å ç”¨åå‡ äºŒåMå†…å­˜]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>gui</tag>
        <tag>åŠ¨æ¼«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æŠ•å–‚]]></title>
    <url>%2Ffeed%2F</url>
    <content type="text"><![CDATA[æˆ‘å¾ˆåŠªåŠ›(à¸‡ â€¢Ì€_â€¢Ì)à¸‡ è¯·ç»™æˆ‘é’± (Ïƒ $ï¹ƒ$)Ïƒ åšä’•é»ƒè‹½æœºå™¨äººè¿˜æ˜¯æœ‰äº›æˆæœ¬åœ¨çš„,è¯·å¸®å¸®ä’•é»ƒè‹½å›å›æœ¬å§! Â§ çˆ±å‘ç”µ ï¿¥ çˆ±å‘ç”µ Â§ æ”¯ä»˜å® æ‰“èµÂ¥3.00 æ‰“èµÂ¥10.00 æ‰“èµÂ¥23.33 æ‰“èµÂ¥66.66 æ‰“èµÂ¥100.00 Â§ å¾®ä¿¡ æ‰“èµÂ¥3.00 æ‰“èµÂ¥10.00 æ‰“èµÂ¥23.33 æ‰“èµÂ¥66.66 æ‰“èµÂ¥100.00 Â§ è¯·ç»™æˆ‘é’± æˆ‘ä»€ä¹ˆéƒ½ä¸ä¼šåšçš„ .hgImgHolder{width:auto;height:200px;float:left}]]></content>
  </entry>
</search>
